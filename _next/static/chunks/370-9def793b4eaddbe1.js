(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{87613:(e,t,r)=>{"use strict";r.d(t,{R:()=>o,a:()=>a});class n{constructor(e){let t=function(){let e=0xefc8249d;return function(t){let r=t.toString();for(let t=0;t<r.length;t++){let n=.02519603282416938*(e+=r.charCodeAt(t));e=n>>>0,n-=e,n*=e,e=n>>>0,n-=e,e+=0x100000000*n}return(e>>>0)*23283064365386963e-26}}();this.c=1,this.s0=t(" "),this.s1=t(" "),this.s2=t(" "),this.s0-=t(e),this.s0<0&&(this.s0+=1),this.s1-=t(e),this.s1<0&&(this.s1+=1),this.s2-=t(e),this.s2<0&&(this.s2+=1)}next(){let e=2091639*this.s0+23283064365386963e-26*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=Math.trunc(e))}}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){let r=new n(e),a=r.next.bind(r);return t&&i(t,r),a.state=()=>i(r,{}),a}class s{constructor(e){this.state=e||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;let e=this.state,t=a(e.prngstate?"":e.seed,e.prngstate),r=t();return this.state={...e,prngstate:t.state()},r}api(){let e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(let n in t){let i=t[n];r[n]=t=>void 0===t?Math.floor(e()*i)+1:Array.from({length:t}).map(()=>Math.floor(e()*i)+1)}return{...r,Die:function(t=6,r){return void 0===r?Math.floor(e()*t)+1:Array.from({length:r}).map(()=>Math.floor(e()*t)+1)},Number:()=>e(),Shuffle:t=>{let r=[...t],n=t.length,i=0,a=Array.from({length:n});for(;n;){let t=Math.trunc(n*e());a[i++]=r[t],r[t]=r[--n]}return a},_private:this}}}let o={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new s(e).api(),setup:({game:e})=>{let{seed:t}=e;return void 0===t&&(t=s.seed()),{seed:t}},playerView:()=>void 0}},69381:(e,t,r)=>{"use strict";let n,i;r.d(t,{K:()=>tR});var a,s,o,l,c,u={};r.r(u),r.d(u,{Decoder:()=>tb,Encoder:()=>tg,PacketType:()=>l,protocol:()=>ty}),r(3690);var d=r(80134);let h=(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){!function(e,t,r){var n;(n=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==p(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var g="function"==typeof Symbol&&Symbol.observable||"@@observable",v=function(){return Math.random().toString(36).substring(7).split("").join(".")},b={INIT:"@@redux/INIT"+v(),REPLACE:"@@redux/REPLACE"+v(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+v()}};function _(e,t,r){if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw Error(y(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw Error(y(1));return r(_)(e,t)}if("function"!=typeof e)throw Error(y(2));var n,i=e,a=t,s=[],o=s,l=!1;function c(){o===s&&(o=s.slice())}function u(){if(l)throw Error(y(3));return a}function d(e){if("function"!=typeof e)throw Error(y(4));if(l)throw Error(y(5));var t=!0;return c(),o.push(e),function(){if(t){if(l)throw Error(y(6));t=!1,c();var r=o.indexOf(e);o.splice(r,1),s=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(y(7));if(void 0===e.type)throw Error(y(8));if(l)throw Error(y(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=s=o,r=0;r<t.length;r++)(0,t[r])();return e}return h({type:b.INIT}),(n={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw Error(y(10));i=e,h({type:b.REPLACE})}})[g]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(y(11));function t(){e.next&&e.next(u())}return t(),{unsubscribe:d(t)}}})[g]=function(){return this},e},n}function w(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function x(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw Error(y(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map(function(e){return e(i)});return n=w.apply(void 0,a)(r.dispatch),m(m({},r),{},{dispatch:n})}}}var E=r(83157);function P(e){if(void 0!==e.processMove)return e;if(void 0===e.name&&(e.name="default"),void 0===e.deltaState&&(e.deltaState=!1),void 0===e.disableUndo&&(e.disableUndo=!1),void 0===e.setup&&(e.setup=()=>({})),void 0===e.moves&&(e.moves={}),void 0===e.playerView&&(e.playerView=({G:e})=>e),void 0===e.plugins&&(e.plugins=[]),e.plugins.forEach(e=>{if(void 0===e.name)throw Error("Plugin missing name attribute");if(e.name.includes(" "))throw Error(e.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw Error(e.name+": Game name must not include spaces");let t=function({moves:e,phases:t,endIf:r,onEnd:n,turn:i,events:a,plugins:s}){void 0===e&&(e={}),void 0===a&&(a={}),void 0===s&&(s=[]),void 0===t&&(t={}),r||(r=()=>void 0),n||(n=({G:e})=>e),i||(i={});let o={...t};""in o&&(0,E.e)("cannot specify phase with empty name"),o[""]={};let l={},c=new Set,u=null;Object.keys(e).forEach(e=>c.add(e));let d=(e,t)=>{let r=(0,E.F)(e,t,s);return e=>r({...(0,E.a)(e),G:e.G,ctx:e.ctx,playerID:e.playerID})},h=e=>t=>e({...(0,E.a)(t),G:t.G,ctx:t.ctx}),p={onEnd:d(n,E.G.GAME_ON_END),endIf:h(r)};for(let e in o){let t=o[e];if(!0===t.start&&(u=e),void 0!==t.moves)for(let r of Object.keys(t.moves))l[e+"."+r]=t.moves[r],c.add(r);for(let r in void 0===t.endIf&&(t.endIf=()=>void 0),void 0===t.onBegin&&(t.onBegin=({G:e})=>e),void 0===t.onEnd&&(t.onEnd=({G:e})=>e),void 0===t.turn&&(t.turn=i),void 0===t.turn.order&&(t.turn.order=E.T.DEFAULT),void 0===t.turn.onBegin&&(t.turn.onBegin=({G:e})=>e),void 0===t.turn.onEnd&&(t.turn.onEnd=({G:e})=>e),void 0===t.turn.endIf&&(t.turn.endIf=()=>!1),void 0===t.turn.onMove&&(t.turn.onMove=({G:e})=>e),void 0===t.turn.stages&&(t.turn.stages={}),(0,E.b)(t.turn,!0),t.turn.stages){let n=t.turn.stages[r].moves||{};for(let t of Object.keys(n))l[e+"."+r+"."+t]=n[t],c.add(t)}if(t.wrapped={onBegin:d(t.onBegin,E.G.PHASE_ON_BEGIN),onEnd:d(t.onEnd,E.G.PHASE_ON_END),endIf:h(t.endIf)},t.turn.wrapped={onMove:d(t.turn.onMove,E.G.TURN_ON_MOVE),onBegin:d(t.turn.onBegin,E.G.TURN_ON_BEGIN),onEnd:d(t.turn.onEnd,E.G.TURN_ON_END),endIf:h(t.turn.endIf)},"function"!=typeof t.next){let{next:e}=t;t.next=()=>e||null}t.wrapped.next=h(t.next)}function f(e){return e.phase?o[e.phase]:o[""]}function m(e){return e}function y(e,t){let r=new Set,n=new Set;for(let s=0;s<t.length;s++){var i,a;let{fn:o,arg:l,...c}=t[s];if(o===O){n.clear();let t=e.ctx.phase;if(r.has(t)){let t={...e.ctx,phase:null};return{...e,ctx:t}}r.add(t)}let u=[];if(e=o(e,{...c,arg:l,next:u}),o===k)break;let d=(i=e,p.endIf(i));if(d){t.push({fn:k,arg:d,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}let h=f((a=e).ctx).wrapped.endIf(a);if(h){t.push({fn:O,arg:h,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}if([m,x,P].includes(o)){let r=function(e){let t=f(e.ctx),r=e.ctx.numMoves||0;return!!t.turn.maxMoves&&r>=t.turn.maxMoves||t.turn.wrapped.endIf(e)}(e);if(r){t.push({fn:S,arg:r,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}}t.push(...u)}return e}function g(e,{next:t}){return t.push({fn:v}),e}function v(e,{next:t}){let{G:r,ctx:n}=e;return r=f(n).wrapped.onBegin(e),t.push({fn:b}),{...e,G:r,ctx:n}}function b(e,{currentPlayer:t}){let{ctx:r}=e,n=f(r);t?(r={...r,currentPlayer:t},n.turn.activePlayers&&(r=(0,E.c)(r,n.turn.activePlayers))):r=(0,E.I)(e,n.turn);let i=r.turn+1;r={...r,turn:i,numMoves:0,_prevActivePlayers:[]};let a=n.turn.wrapped.onBegin({...e,ctx:r});return{...e,G:a,ctx:r,_undo:[],_redo:[]}}function _(e,{arg:t,next:r,phase:n}){let i=f({phase:n}),{ctx:a}=e;if(t&&t.next){if(!(t.next in o))return(0,E.e)("invalid phase: "+t.next),e;a={...a,phase:t.next}}else a={...a,phase:i.wrapped.next(e)||null};return e={...e,ctx:a},r.push({fn:v}),e}function w(e,{arg:t,currentPlayer:r,next:n}){let{G:i,ctx:a}=e,s=f(a),{endPhase:o,ctx:l}=(0,E.U)(e,r,s.turn,t);return a=l,e={...e,G:i,ctx:a},o?n.push({fn:O,turn:a.turn,phase:a.phase}):n.push({fn:b,currentPlayer:a.currentPlayer}),e}function x(e,{arg:t,playerID:r}){if(("string"==typeof t||t===E.S.NULL)&&(t={stage:t}),"object"!=typeof t)return e;(0,E.b)(t);let{ctx:n}=e,{activePlayers:i,_activePlayersMinMoves:a,_activePlayersMaxMoves:s,_activePlayersNumMoves:o}=n;return void 0!==t.stage&&(null===i&&(i={}),i[r]=t.stage,o[r]=0,t.minMoves&&(null===a&&(a={}),a[r]=t.minMoves),t.maxMoves&&(null===s&&(s={}),s[r]=t.maxMoves)),n={...n,activePlayers:i,_activePlayersMinMoves:a,_activePlayersMaxMoves:s,_activePlayersNumMoves:o},{...e,ctx:n}}function P(e,{arg:t}){return{...e,ctx:(0,E.c)(e.ctx,t)}}function k(e,{arg:t,phase:r}){e=O(e,{phase:r}),void 0===t&&(t=!0),e={...e,ctx:{...e.ctx,gameover:t}};let n=p.onEnd(e);return{...e,G:n}}function O(e,{arg:t,next:r,turn:n,automatic:i}){let{phase:a,turn:s}=(e=S(e,{turn:n,force:!0,automatic:!0})).ctx;if(r&&r.push({fn:_,arg:t,phase:a}),null===a)return e;let o=f(e.ctx).wrapped.onEnd(e),l={...e.ctx,phase:null},c=(0,E.g)("endPhase",t),{_stateID:u}=e,d={action:c,_stateID:u,turn:s,phase:a};i&&(d.automatic=!0);let h=[...e.deltalog||[],d];return{...e,G:o,ctx:l,deltalog:h}}function S(e,{arg:t,next:r,turn:n,force:i,automatic:a,playerID:s}){if(n!==e.ctx.turn)return e;let{currentPlayer:o,numMoves:l,phase:c,turn:u}=e.ctx,d=f(e.ctx);if(!i&&d.turn.minMoves&&(l||0)<d.turn.minMoves)return(0,E.i)(`cannot end turn before making ${d.turn.minMoves} moves`),e;let h=d.turn.wrapped.onEnd(e);r&&r.push({fn:w,arg:t,currentPlayer:o});let p={...e.ctx,activePlayers:null};if(t&&t.remove){s=s||o;let t=p.playOrder.filter(e=>e!=s),n=p.playOrderPos>t.length-1?0:p.playOrderPos;if(p={...p,playOrder:t,playOrderPos:n},0===t.length)return r.push({fn:O,turn:u,phase:c}),e}let m=(0,E.g)("endTurn",t),{_stateID:y}=e,g={action:m,_stateID:y,turn:u,phase:c};a&&(g.automatic=!0);let v=[...e.deltalog||[],g];return{...e,G:h,ctx:p,deltalog:v,_undo:[],_redo:[]}}function I(e,{arg:t,next:r,automatic:n,playerID:i}){i=i||e.ctx.currentPlayer;let{ctx:a,_stateID:s}=e,{activePlayers:o,_activePlayersNumMoves:l,_activePlayersMinMoves:c,_activePlayersMaxMoves:u,phase:d,turn:h}=a,p=null!==o&&i in o,m=f(a);if(!t&&p){let e=m.turn.stages[o[i]];e&&e.next&&(t=e.next)}if(r&&r.push({fn:x,arg:t,playerID:i}),!p)return e;let y=l[i]||0;if(c&&c[i]&&y<c[i])return(0,E.i)(`cannot end stage before making ${c[i]} moves`),e;o={...o},delete o[i],c&&(c={...c},delete c[i]),u&&(u={...u},delete u[i]),a=(0,E.d)({...a,activePlayers:o,_activePlayersMinMoves:c,_activePlayersMaxMoves:u});let g={action:(0,E.g)("endStage",t),_stateID:s,turn:h,phase:d};n&&(g.automatic=!0);let v=[...e.deltalog||[],g];return{...e,ctx:a,deltalog:v}}function C(t,r,n){let i=f(t),a=i.turn.stages,{activePlayers:s}=t;if(s&&void 0!==s[n]&&s[n]!==E.S.NULL&&void 0!==a[s[n]]&&void 0!==a[s[n]].moves){let e=a[s[n]].moves;if(r in e)return e[r]}else if(i.moves){if(r in i.moves)return i.moves[r]}else if(r in e)return e[r];return null}let A={endStage:function(e,t){return y(e,[{fn:I,playerID:t}])},setStage:function(e,t,r){return y(e,[{fn:I,arg:r,playerID:t}])},endTurn:function(e,t,r){return y(e,[{fn:S,turn:e.ctx.turn,phase:e.ctx.phase,arg:r}])},pass:function(e,t,r){return y(e,[{fn:S,turn:e.ctx.turn,phase:e.ctx.phase,force:!0,arg:r}])},endPhase:function(e){return y(e,[{fn:O,phase:e.ctx.phase,turn:e.ctx.turn}])},setPhase:function(e,t,r){return y(e,[{fn:O,phase:e.ctx.phase,turn:e.ctx.turn,arg:{next:r}}])},endGame:function(e,t,r){return y(e,[{fn:k,turn:e.ctx.turn,phase:e.ctx.phase,arg:r}])},setActivePlayers:function(e,t,r){return y(e,[{fn:P,arg:r}])}},M=[];return!1!==a.endTurn&&M.push("endTurn"),!1!==a.pass&&M.push("pass"),!1!==a.endPhase&&M.push("endPhase"),!1!==a.setPhase&&M.push("setPhase"),!1!==a.endGame&&M.push("endGame"),!1!==a.setActivePlayers&&M.push("setActivePlayers"),!1!==a.endStage&&M.push("endStage"),!1!==a.setStage&&M.push("setStage"),{ctx:e=>({numPlayers:e,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:e})].map((e,t)=>t+""),playOrderPos:0,phase:u,activePlayers:null}),init:e=>y(e,[{fn:g}]),isPlayerActive:function(e,t,r){return t.activePlayers?r in t.activePlayers:t.currentPlayer===r},eventHandlers:A,eventNames:Object.keys(A),enabledEventNames:M,moveMap:l,moveNames:[...c.values()],processMove:function(e,t){let{playerID:r,type:n}=t,{currentPlayer:i,activePlayers:a,_activePlayersMaxMoves:s}=e.ctx,o=C(e.ctx,n,r),l=!o||"function"==typeof o||!0!==o.noLimit,{numMoves:c,_activePlayersNumMoves:u}=e.ctx;l&&(r===i&&c++,a&&u[r]++),e={...e,ctx:{...e.ctx,numMoves:c,_activePlayersNumMoves:u}},s&&u[r]>=s[r]&&(e=I(e,{playerID:r,automatic:!0}));let d=f(e.ctx).turn.wrapped.onMove({...e,playerID:r});return y(e={...e,G:d},[{fn:m}])},processEvent:function(e,t){let{type:r,playerID:n,args:i}=t.payload;return"function"!=typeof A[r]?e:A[r](e,n,...Array.isArray(i)?i:[i])},getMove:C}}(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(e=>e.name),processMove:(r,n)=>{let i=t.getMove(r.ctx,n.type,n.playerID);if(k(i)&&(i=i.move),i instanceof Function){let t=(0,E.F)(i,E.G.MOVE,e.plugins),a=[];return void 0!==n.args&&(a=Array.isArray(n.args)?n.args:[n.args]),t({...(0,E.a)(r),G:r.G,ctx:r.ctx,playerID:n.playerID},...a)}return(0,E.e)(`invalid move object: ${n.type}`),r.G}}}function k(e){return e instanceof Object&&void 0!==e.move}!function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"}(a||(a={})),function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"}(s||(s={}));let O=e=>null!==e.payload.playerID&&void 0!==e.payload.playerID,S=(e,t,r)=>void 0===r.undoable||(r.undoable instanceof Function?r.undoable({G:e,ctx:t}):r.undoable);function I(e,t){if(t.game.disableUndo)return e;let r={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return"MAKE_MOVE"===t.action.type&&(r.moveType=t.action.payload.type),{...e,_undo:[...e._undo,r],_redo:[]}}function C(e,t,r){let n={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return void 0!==i&&(n.metadata=i),"object"==typeof r&&!0===r.redact?n.redact=!0:"object"==typeof r&&r.redact instanceof Function&&(n.redact=r.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[n]}}function A(e,t,r){let[n,i]=(0,E.q)(e,r);return i?[n,N(t,s.PluginActionInvalid,i)]:[n]}function M(e){if(!e)return[null,void 0];let{transients:t,...r}=e;return[r,t]}function N(e,t,r){return{...e,transients:{error:{type:t,payload:r}}}}let D=e=>t=>r=>{let n=t(r);if(r.type===E.p)return n;{let[,t]=M(e.getState());return void 0!==t?(e.dispatch((0,E.r)()),{...n,transients:t}):n}};function T({game:e,isClient:t}){return e=P(e),(r=null,n)=>{let[i]=M(r);switch(n.type){case E.p:return i;case E.o:{let r;if(i={...i,deltalog:[]},t)return i;if(void 0!==i.ctx.gameover)return(0,E.e)("cannot call event after game end"),N(i,s.GameOver);if(O(n)&&!e.flow.isPlayerActive(i.G,i.ctx,n.payload.playerID))return(0,E.e)(`disallowed event: ${n.payload.type}`),N(i,s.InactivePlayer);i=(0,E.E)(i,{game:e,isClient:!1,playerID:n.payload.playerID});let a=e.flow.processEvent(i,n);if([a,r]=A(a,i,{game:e,isClient:!1}),r)return r;return{...a=I(a,{game:e,action:n}),_stateID:i._stateID+1}}case E.M:{let r;let a=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,n.payload.type,n.payload.playerID||i.ctx.currentPlayer);if(null===o)return(0,E.e)(`disallowed move: ${n.payload.type}`),N(i,s.UnavailableMove);if(t&&!1===o.client)return i;if(void 0!==i.ctx.gameover)return(0,E.e)("cannot make move after game end"),N(i,s.GameOver);if(O(n)&&!e.flow.isPlayerActive(i.G,i.ctx,n.payload.playerID))return(0,E.e)(`disallowed move: ${n.payload.type}`),N(i,s.InactivePlayer);i=(0,E.E)(i,{game:e,isClient:t,playerID:n.payload.playerID});let l=e.processMove(i,n.payload);if(l===E.n)return(0,E.e)(`invalid move: ${n.payload.type} args: ${n.payload.args}`),N(i,s.InvalidMove);let c={...i,G:l};if(t&&(0,E.N)(c,{game:e}))return i;if(i=c,t){let t;if([i,t]=A(i,a,{game:e,isClient:!0}),t)return t;return{...i,_stateID:i._stateID+1}}if(i=C(i,n,o),i=e.flow.processMove(i,n.payload),[i,r]=A(i,a,{game:e}),r)return r;return{...i=I(i,{game:e,action:n}),_stateID:i._stateID+1}}case E.m:case E.l:case E.k:return n.state;case E.j:{if(i={...i,deltalog:[]},e.disableUndo)return(0,E.e)("Undo is not enabled"),N(i,s.ActionDisabled);let{G:t,ctx:r,_undo:a,_redo:o,_stateID:l}=i;if(a.length<2)return(0,E.e)("No moves to undo"),N(i,s.ActionInvalid);let c=a[a.length-1],u=a[a.length-2];if(O(n)&&n.payload.playerID!==c.playerID)return(0,E.e)("Cannot undo other players' moves"),N(i,s.ActionInvalid);if(c.moveType&&!S(t,r,e.flow.getMove(u.ctx,c.moveType,c.playerID)))return(0,E.e)("Move cannot be undone"),N(i,s.ActionInvalid);return{...i=C(i,n),G:u.G,ctx:u.ctx,plugins:u.plugins,_stateID:l+1,_undo:a.slice(0,-1),_redo:[c,...o]}}case E.R:{if(i={...i,deltalog:[]},e.disableUndo)return(0,E.e)("Redo is not enabled"),N(i,s.ActionDisabled);let{_undo:t,_redo:r,_stateID:a}=i;if(0===r.length)return(0,E.e)("No moves to redo"),N(i,s.ActionInvalid);let o=r[0];if(O(n)&&n.payload.playerID!==o.playerID)return(0,E.e)("Cannot redo other players' moves"),N(i,s.ActionInvalid);return{...i=C(i,n),G:o.G,ctx:o.ctx,plugins:o.plugins,_stateID:a+1,_undo:[...t,o],_redo:r.slice(1)}}case E.f:return(0,E.h)(i,n,{game:e});case E.P:{let e=i,t=JSON.parse(JSON.stringify(e)),r=(0,d.X6)(t,n.patch);if(r.some(e=>null!==e))return(0,E.e)(`Patch ${JSON.stringify(n.patch)} apply failed`),N(e,a.PatchFailed,r);return t}default:return i}}}function j({game:e,numPlayers:t,setupData:r}){e=P(e),t||(t=2);let n={G:{},ctx:e.flow.ctx(t),plugins:{}};n=(0,E.t)(n,{game:e}),n=(0,E.E)(n,{game:e,playerID:void 0});let i=(0,E.a)(n);n.G=e.setup({...i,ctx:n.ctx},r);let a={...n,_undo:[],_redo:[],_stateID:0};return a=e.flow.init(a),[a]=(0,E.q)(a,{game:e}),e.disableUndo||(a._undo=[{G:a.G,ctx:a.ctx,plugins:a.plugins}]),a}class R{constructor({transportDataCallback:e,gameName:t,playerID:r,matchID:n,credentials:i,numPlayers:a}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=e,this.gameName=t||"default",this.playerID=r||null,this.matchID=n||"default",this.credentials=i,this.numPlayers=a||2}subscribeToConnectionStatus(e){this.connectionStatusCallback=e}setConnectionStatus(e){this.isConnected=e,this.connectionStatusCallback()}notifyClient(e){this.transportDataCallback(e)}}class L extends R{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}let B=e=>new L(e);class W{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(e){this.clients.set(e,e),this.mountDebug(e),this.notifySubscribers()}unregister(e){if(this.clients.delete(e),this.currentClient===e)for(let[e]of(this.unmountDebug(),this.clients)){if(this.debugPanel)break;this.mountDebug(e)}this.notifySubscribers()}subscribe(e){let t=Symbol();return this.subscribers.set(t,e),e(this.getState()),()=>{this.subscribers.delete(t)}}switchPlayerID(e){if(this.currentClient.multiplayer){for(let[t]of this.clients)if(t.playerID===e&&!1!==t.debugOpt&&t.multiplayer===this.currentClient.multiplayer){this.switchToClient(t);return}}this.currentClient.updatePlayerID(e),this.notifySubscribers()}switchToClient(e){e!==this.currentClient&&(this.unmountDebug(),this.mountDebug(e),this.notifySubscribers())}notifySubscribers(){let e=this.getState();this.subscribers.forEach(t=>{t(e)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(e=>!1!==e.debugOpt)}mountDebug(e){let t;if(!1===e.debugOpt||null!==this.debugPanel||"undefined"==typeof document)return;let r=document.body;e.debugOpt&&!0!==e.debugOpt&&(t=e.debugOpt.impl||t,r=e.debugOpt.target||r),t&&(this.currentClient=e,this.debugPanel=new t({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}let U=new W;function G(e,t,r){return r||null!=e||(e=t.getState().ctx.currentPlayer),e}function z(e,t,r,n,i,a){let s={};for(let o of t)s[o]=(...t)=>{let s=E.A[e](o,t,G(n,r,a),i);r.dispatch(s)};return s}let q=z.bind(null,"makeMove"),$=z.bind(null,"gameEvent"),V=z.bind(null,"plugin");class F{constructor({game:e,debug:t,numPlayers:r,multiplayer:n,matchID:i,playerID:a,credentials:s,enhancer:o}){this.game=P(e),this.playerID=a,this.matchID=i||"default",this.credentials=s,this.multiplayer=n,this.debugOpt=t,this.manager=U,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=T({game:this.game,isClient:void 0!==n}),this.initialState=null,n||(this.initialState=j({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch((0,E.u)(this.initialState))},this.undo=()=>{let e=(0,E.v)(G(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.redo=()=>{let e=(0,E.w)(G(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.log=[];let l=x(D,()=>e=>t=>{let r=e(t);return this.notifySubscribers(),r},e=>t=>r=>{let n=e.getState(),i=t(r);return"clientOnly"in r||r.type===E.p||this.transport.sendAction(n,r),i},e=>t=>r=>{let n=t(r),i=e.getState();switch(r.type){case E.M:case E.o:case E.j:case E.R:{let e=i.deltalog;this.log=[...this.log,...e];break}case E.m:this.log=[];break;case E.P:case E.l:{let e=-1;this.log.length>0&&(e=this.log[this.log.length-1]._stateID);let t=r.deltalog||[];t=t.filter(t=>t._stateID>e),this.log=[...this.log,...t];break}case E.k:this.initialState=r.initialState,this.log=r.log||[]}return n});o=void 0!==o?w(l,o):l,this.store=_(this.reducer,this.initialState,o),n||(n=B),this.transport=n({transportDataCallback:e=>this.receiveTransportData(e),gameKey:e,game:this.game,matchID:i,playerID:a,credentials:s,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=e=>{this.transport.sendChatMessage(this.matchID,{id:h(7),sender:this.playerID,payload:e})}}receiveMatchData(e){this.matchData=e,this.notifySubscribers()}receiveChatMessage(e){this.chatMessages=[...this.chatMessages,e],this.notifySubscribers()}receiveTransportData(e){let[t]=e.args;if(t===this.matchID)switch(e.type){case"sync":{let[,t]=e.args,r=(0,E.s)(t);this.receiveMatchData(t.filteredMetadata),this.store.dispatch(r);break}case"update":{let[,t,r]=e.args,n=this.store.getState();if(t._stateID>=n._stateID){let e=(0,E.z)(t,r);this.store.dispatch(e)}break}case"patch":{let[,t,r,n,i]=e.args,a=this.store.getState()._stateID;if(t!==a)break;let s=(0,E.y)(t,r,n,i);this.store.dispatch(s),this.store.getState()._stateID===a&&this.transport.requestSync();break}case"matchData":{let[,t]=e.args;this.receiveMatchData(t);break}case"chat":{let[,t]=e.args;this.receiveChatMessage(t)}}}notifySubscribers(){Object.values(this.subscribers).forEach(e=>e(this.getState()))}overrideGameState(e){this.gameStateOverride=e,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(e){let t=Object.keys(this.subscribers).length;return this.subscribers[t]=e,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&e(this.getState()),()=>{delete this.subscribers[t]}}getInitialState(){return this.initialState}getState(){let e=this.store.getState();if(null!==this.gameStateOverride&&(e=this.gameStateOverride),null===e)return e;let t=!0,r=this.game.flow.isPlayerActive(e.G,e.ctx,this.playerID);return this.multiplayer&&!r&&(t=!1),this.multiplayer||null===this.playerID||void 0===this.playerID||r||(t=!1),void 0!==e.ctx.gameover&&(t=!1),this.multiplayer||(e={...e,G:this.game.playerView({G:e.G,ctx:e.ctx,playerID:this.playerID}),plugins:(0,E.x)(e,this)}),{...e,log:this.log,isActive:t,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=q(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=$(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=V(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(e){this.playerID=e,this.createDispatchers(),this.transport.updatePlayerID(e),this.notifySubscribers()}updateMatchID(e){this.matchID=e,this.createDispatchers(),this.transport.updateMatchID(e),this.notifySubscribers()}updateCredentials(e){this.credentials=e,this.createDispatchers(),this.transport.updateCredentials(e),this.notifySubscribers()}}let{parse:H,stringify:J}=JSON,{keys:K}=Object;r(42191);var Y=r(87613);class X{constructor({enumerate:e,seed:t}){this.enumerateFn=e,this.seed=t,this.iterationCounter=0,this._opts={}}addOpt({key:e,range:t,initial:r}){this._opts[e]={range:t,value:r}}getOpt(e){return this._opts[e].value}setOpt(e,t){e in this._opts&&(this._opts[e].value=t)}opts(){return this._opts}enumerate(e,t,r){return this.enumerateFn(e,t,r).map(e=>"payload"in e?e:"move"in e?(0,E.B)(e.move,e.args,r):"event"in e?(0,E.g)(e.event,e.args,r):void 0)}random(e){let t;if(void 0!==this.seed){let e=this.prngstate?"":this.seed,r=(0,Y.a)(e,this.prngstate);t=r(),this.prngstate=r.state()}else t=Math.random();if(e){if(!Array.isArray(e))return Math.floor(t*e);{let r=Math.floor(t*e.length);return e[r]}}return t}}class Q extends X{constructor({enumerate:e,seed:t,objectives:r,game:n,iterations:i,playoutDepth:a,iterationCallback:s}){super({enumerate:e,seed:t}),void 0===r&&(r=()=>({})),this.objectives=r,this.iterationCallback=s||(()=>{}),this.reducer=T({game:n}),this.iterations=i,this.playoutDepth=a,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:"number"==typeof i?i:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:"number"==typeof a?a:50,range:{min:1,max:100}})}createNode({state:e,parentAction:t,parent:r,playerID:n}){let{G:i,ctx:a}=e,s=[],o=[];if(void 0!==n)s=this.enumerate(i,a,n),o=this.objectives(i,a,n);else if(a.activePlayers)for(let e in a.activePlayers)s.push(...this.enumerate(i,a,e)),o.push(this.objectives(i,a,e));else s=this.enumerate(i,a,a.currentPlayer),o=this.objectives(i,a,a.currentPlayer);return{state:e,parent:r,parentAction:t,actions:s,objectives:o,children:[],visits:0,value:0}}select(e){if(e.actions.length>0||0===e.children.length)return e;let t=null,r=0;for(let n of e.children){let i=n.visits+Number.EPSILON,a=n.value/i+Math.sqrt(2*Math.log(e.visits)/i);(null==t||a>r)&&(r=a,t=n)}return this.select(t)}expand(e){let t=e.actions;if(0===t.length||void 0!==e.state.ctx.gameover)return e;let r=this.random(t.length),n=t[r];e.actions.splice(r,1);let i=this.reducer(e.state,n),a=this.createNode({state:i,parentAction:n,parent:e});return e.children.push(a),a}playout({state:e}){let t=this.getOpt("playoutDepth");"function"==typeof this.playoutDepth&&(t=this.playoutDepth(e.G,e.ctx));for(let r=0;r<t&&void 0===e.ctx.gameover;r++){let{G:t,ctx:r}=e,n=r.currentPlayer;r.activePlayers&&(n=Object.keys(r.activePlayers)[0]);let i=this.enumerate(t,r,n),a=this.objectives(t,r,n),s=Object.keys(a).reduce((e,n)=>{let i=a[n];return i.checker(t,r)?e+i.weight:e},0);if(s>0)return{score:s};if(!i||0===i.length)return;let o=this.random(i.length);e=this.reducer(e,i[o])}return e.ctx.gameover}backpropagate(e,t={}){e.visits++,void 0!==t.score&&(e.value+=t.score),!0===t.draw&&(e.value+=.5),e.parentAction&&t.winner===e.parentAction.payload.playerID&&e.value++,e.parent&&this.backpropagate(e.parent,t)}play(e,t){let r=this.createNode({state:e,playerID:t}),n=this.getOpt("iterations");"function"==typeof this.iterations&&(n=this.iterations(e.G,e.ctx));let i=()=>{let e=null;for(let t of r.children)(null==e||t.visits>e.visits)&&(e=t);return{action:e&&e.parentAction,metadata:r}};return new Promise(e=>{let t=()=>{for(let e=0;e<25&&this.iterationCounter<n;e++){let e=this.select(r),t=this.expand(e),n=this.playout(t);this.backpropagate(t,n),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:n,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){let r=()=>{this.iterationCounter<n?(t(),setImmediate(r)):e(i())};r()}else{for(;this.iterationCounter<n;)t();e(i())}})}}let Z=(e,t)=>{if(!e||"string"!=typeof e)throw Error(`Expected ${t} string, got "${e}".`)},ee=e=>Z(e,"game name"),et=e=>Z(e,"match ID"),er=(e,t)=>{if(!e)throw Error(`Expected body, got “${e}”.`);for(let r in t){let n=t[r],i=Array.isArray(n)?n:[n],a=e[r];if(!i.includes(typeof a)){let e=i.join("|");throw TypeError(`Expected body.${r} to be of type ${e}, got “${a}”.`)}}};class en extends Error{constructor(e,t){super(e),this.details=t}}class ei{constructor({server:e=""}={}){this.server=e.replace(/\/$/,"")}async request(e,t){let r=await fetch(this.server+e,t);if(!r.ok){let e;try{e=await r.clone().json()}catch{try{e=await r.text()}catch(t){e=t.message}}throw new en(`HTTP status ${r.status}`,e)}return r.json()}async post(e,t){let r={method:"post",body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}};return t.init&&(r={...r,...t.init,headers:{...r.headers,...t.init.headers}}),this.request(e,r)}async listGames(e){return this.request("/games",e)}async listMatches(e,t,r){ee(e);let n="";if(t){let e=[],{isGameover:r,updatedBefore:i,updatedAfter:a}=t;void 0!==r&&e.push(`isGameover=${r}`),i&&e.push(`updatedBefore=${i}`),a&&e.push(`updatedAfter=${a}`),e.length>0&&(n="?"+e.join("&"))}return this.request(`/games/${e}${n}`,r)}async getMatch(e,t,r){return ee(e),et(t),this.request(`/games/${e}/${t}`,r)}async createMatch(e,t,r){return ee(e),er(t,{numPlayers:"number"}),this.post(`/games/${e}/create`,{body:t,init:r})}async joinMatch(e,t,r,n){return ee(e),et(t),er(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${e}/${t}/join`,{body:r,init:n})}async leaveMatch(e,t,r,n){ee(e),et(t),er(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/leave`,{body:r,init:n})}async updatePlayer(e,t,r,n){ee(e),et(t),er(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/update`,{body:r,init:n})}async playAgain(e,t,r,n){return ee(e),et(t),er(r,{playerID:"string",credentials:"string"}),this.post(`/games/${e}/${t}/playAgain`,{body:r,init:n})}}var ea=r(3276),es=r(97825),eo=r.n(es),el=r(12833);function ec(e){return e.type()===o.SYNC}!function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"}(o||(o={}));class eu{type(){return o.SYNC}connect(){}createMatch(e,t){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.","\nUsing the deprecated createGame method instead."),this.createGame(e,t);console.error("The database connector does not implement a createMatch method.")}listMatches(e){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.","\nUsing the deprecated listGames method instead."),this.listGames(e);console.error("The database connector does not implement a listMatches method.")}}let ed=({game:e,unlisted:t,setupData:r,numPlayers:n})=>{let i={gameName:e.name,unlisted:!!t,players:{},createdAt:Date.now(),updatedAt:Date.now()};void 0!==r&&(i.setupData=r);for(let e=0;e<n;e++)i.players[e]={id:e};return i},eh=({game:e,numPlayers:t,setupData:r,unlisted:n})=>{t&&"number"==typeof t||(t=2);let i=e.validateSetupData&&e.validateSetupData(r,t);return void 0!==i?{setupDataError:i}:{metadata:ed({game:e,numPlayers:t,setupData:r,unlisted:n}),initialState:j({game:e,numPlayers:t,setupData:r})}},ep=e=>Object.values(e.players).map(e=>{let{credentials:t,...r}=e;return r}),ef=e=>{let{credentials:t,...r}=e.payload;return{...e,payload:r}};class em{constructor(e,t,r,n){this.game=P(e),this.storageAPI=t,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=n}subscribe(e){this.subscribeCallback=e}async onUpdate(e,t,r,n){let i,a,s;if(!e||!e.payload)return{error:"missing action or action payload"};if(ec(this.storageAPI)?{metadata:i}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:i}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:e.payload.credentials,metadata:i}))return{error:"unauthorized action"};let o=ef(e);if(ec(this.storageAPI)?{state:a}=this.storageAPI.fetch(r,{state:!0}):{state:a}=await this.storageAPI.fetch(r,{state:!0}),void 0===a)return(0,E.e)(`game not found, matchID=[${r}]`),{error:"game not found"};if(void 0!==a.ctx.gameover){(0,E.e)(`game over - matchID=[${r}] - playerID=[${n}] - action[${o.payload.type}]`);return}let l=_(T({game:this.game}),a,x(D));if(o.type==E.j||o.type==E.R){let e=null!==a.ctx.activePlayers,t=a.ctx.currentPlayer===n;if(!e&&!t||e&&(void 0===a.ctx.activePlayers[n]||Object.keys(a.ctx.activePlayers).length>1)){(0,E.e)(`playerID=[${n}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,n)){(0,E.e)(`player not active - playerID=[${n}] - action[${o.payload.type}]`);return}let c=o.type==E.M?this.game.flow.getMove(a.ctx,o.payload.type,n):null;if(o.type==E.M&&!c){(0,E.e)(`move not processed - canPlayerMakeMove=false - playerID=[${n}] - action[${o.payload.type}]`);return}if(a._stateID!==t&&!(c&&k(c)&&c.ignoreStaleStateID)){(0,E.e)(`invalid stateID, was=[${t}], expected=[${a._stateID}] - playerID=[${n}] - action[${o.payload.type}]`);return}let u=l.getState();l.dispatch(o),a=l.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,t,u,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});let{deltalog:d,...h}=a;if(i&&(void 0===i.gameover||null===i.gameover)&&(s={...i,updatedAt:Date.now()},void 0!==a.ctx.gameover&&(s.gameover=a.ctx.gameover)),ec(this.storageAPI))this.storageAPI.setState(r,h,d),s&&this.storageAPI.setMetadata(r,s);else{let e=[this.storageAPI.setState(r,h,d)];s&&e.push(this.storageAPI.setMetadata(r,s)),await Promise.all(e)}}async onSync(e,t,r,n=2){let i={state:!0,metadata:!0,log:!0,initialState:!0},{state:a,initialState:s,log:o,metadata:l}=ec(this.storageAPI)?this.storageAPI.fetch(e,i):await this.storageAPI.fetch(e,i);if(this.auth&&null!=t&&!await this.auth.authenticateCredentials({playerID:t,credentials:r,metadata:l}))return{error:"unauthorized"};if(void 0===a){let t=eh({game:this.game,unlisted:!0,numPlayers:n,setupData:void 0});if("setupDataError"in t)return{error:"game requires setupData"};s=a=t.initialState,l=t.metadata,this.subscribeCallback({state:a,matchID:e}),ec(this.storageAPI)?this.storageAPI.createMatch(e,{initialState:s,metadata:l}):await this.storageAPI.createMatch(e,{initialState:s,metadata:l})}let c={state:a,log:o,filteredMetadata:l?ep(l):void 0,initialState:s};this.transportAPI.send({playerID:t,type:"sync",args:[e,c]})}async onConnectionChange(e,t,r,n){let i;if(null==t)return;if(ec(this.storageAPI)?{metadata:i}=this.storageAPI.fetch(e,{metadata:!0}):{metadata:i}=await this.storageAPI.fetch(e,{metadata:!0}),void 0===i)return(0,E.e)(`metadata not found for matchID=[${e}]`),{error:"metadata not found"};if(void 0===i.players[t])return(0,E.e)(`Player not in the match, matchID=[${e}] playerID=[${t}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:t,credentials:r,metadata:i}))return{error:"unauthorized"};i.players[t].isConnected=n;let a=ep(i);this.transportAPI.sendAll({type:"matchData",args:[e,a]}),ec(this.storageAPI)?this.storageAPI.setMetadata(e,i):await this.storageAPI.setMetadata(e,i)}async onChatMessage(e,t,r){if(this.auth){let{metadata:n}=await this.storageAPI.fetch(e,{metadata:!0});if(!(t&&"string"==typeof t.sender)||!await this.auth.authenticateCredentials({playerID:t.sender,credentials:r,metadata:n}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[e,t]})}}let ey=(e,t,r)=>({...r,G:e.playerView({G:r.G,ctx:r.ctx,playerID:t}),plugins:(0,E.x)(r,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),eg=e=>(t,r)=>{switch(r.type){case"patch":{let[n,i,a,s]=r.args,o=ev(s.deltalog,t),l=ey(e,t,s),c=s._stateID,u=ey(e,t,a);return{type:"patch",args:[n,i,c,(0,d.B8)(u,l),o]}}case"update":{let[n,i]=r.args,a=ev(i.deltalog,t);return{type:"update",args:[n,ey(e,t,i),a]}}case"sync":{let[n,i]=r.args,a=ey(e,t,i.state),s=ev(i.log,t);return{type:"sync",args:[n,{...i,state:a,log:s}]}}default:return r}};function ev(e,t){return void 0===e?e:e.map(e=>{if(null!==t&&+t==+e.action.payload.playerID||!0!==e.redact)return e;let r={...e.action.payload,args:null},{redact:n,...i}={...e,action:{...e.action,payload:r}};return i})}let eb=Object.create(null);eb.open="0",eb.close="1",eb.ping="2",eb.pong="3",eb.message="4",eb.upgrade="5",eb.noop="6";let e_=Object.create(null);Object.keys(eb).forEach(e=>{e_[eb[e]]=e});let ew={type:"error",data:"parser error"},ex="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),eE="function"==typeof ArrayBuffer,eP=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ek=({type:e,data:t},r,n)=>ex&&t instanceof Blob?r?n(t):eO(t,n):eE&&(t instanceof ArrayBuffer||eP(t))?r?n(t):eO(new Blob([t]),n):n(eb[e]+(t||"")),eO=(e,t)=>{let r=new FileReader;return r.onload=function(){t("b"+(r.result.split(",")[1]||""))},r.readAsDataURL(e)};function eS(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let eI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eC="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<eI.length;e++)eC[eI.charCodeAt(e)]=e;let eA=e=>{let t=.75*e.length,r=e.length,n,i=0,a,s,o,l;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<r;n+=4)a=eC[e.charCodeAt(n)],s=eC[e.charCodeAt(n+1)],o=eC[e.charCodeAt(n+2)],l=eC[e.charCodeAt(n+3)],u[i++]=a<<2|s>>4,u[i++]=(15&s)<<4|o>>2,u[i++]=(3&o)<<6|63&l;return c},eM="function"==typeof ArrayBuffer,eN=(e,t)=>{if("string"!=typeof e)return{type:"message",data:eT(e,t)};let r=e.charAt(0);return"b"===r?{type:"message",data:eD(e.substring(1),t)}:e_[r]?e.length>1?{type:e_[r],data:e.substring(1)}:{type:e_[r]}:ew},eD=(e,t)=>eM?eT(eA(e),t):{base64:!0,data:e},eT=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,ej=(e,t)=>{let r=e.length,n=Array(r),i=0;e.forEach((e,a)=>{ek(e,!1,e=>{n[a]=e,++i===r&&t(n.join("\x1e"))})})},eR=(e,t)=>{let r=e.split("\x1e"),n=[];for(let e=0;e<r.length;e++){let i=eN(r[e],t);if(n.push(i),"error"===i.type)break}return n};function eL(e){return e.reduce((e,t)=>e+t.length,0)}function eB(e,t){if(e[0].length===t)return e.shift();let r=new Uint8Array(t),n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function eW(e){if(e)return function(e){for(var t in eW.prototype)e[t]=eW.prototype[t];return e}(e)}eW.prototype.on=eW.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},eW.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},eW.prototype.off=eW.prototype.removeListener=eW.prototype.removeAllListeners=eW.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},eW.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this},eW.prototype.emitReserved=eW.prototype.emit,eW.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},eW.prototype.hasListeners=function(e){return!!this.listeners(e).length};let eU="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),eG="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function ez(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}let eq=eG.setTimeout,e$=eG.clearTimeout;function eV(e,t){t.useNativeTimers?(e.setTimeoutFn=eq.bind(eG),e.clearTimeoutFn=e$.bind(eG)):(e.setTimeoutFn=eG.setTimeout.bind(eG),e.clearTimeoutFn=eG.clearTimeout.bind(eG))}function eF(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class eH extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class eJ extends eW{constructor(e){super(),this.writable=!1,eV(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new eH(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=eN(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}class eK extends eJ{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){eR(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,ej(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=eF()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let eY=!1;try{eY="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let eX=eY;function eQ(){}class eZ extends eK{constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class e0 extends eW{constructor(e,t,r){super(),this.createRequest=e,eV(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;let t=ez(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=e0.requestsCount++,e0.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=eQ,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete e0.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function e1(){for(let e in e0.requests)e0.requests.hasOwnProperty(e)&&e0.requests[e].abort()}e0.requestsCount=0,e0.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",e1):"function"==typeof addEventListener&&addEventListener("onpagehide"in eG?"pagehide":"unload",e1,!1));let e2=function(){let e=e5({xdomain:!1});return e&&null!==e.responseType}();class e3 extends eZ{constructor(e){super(e);let t=e&&e.forceBase64;this.supportsBinary=e2&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new e0(e5,this.uri(),e)}}function e5(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||eX))return new XMLHttpRequest}catch(e){}if(!t)try{return new eG[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}let e4="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class e6 extends eJ{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,r=e4?{}:ez(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;ek(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(e){}n&&eU(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=eF()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}let e8=eG.WebSocket||eG.MozWebSocket;class e7 extends e6{createSocket(e,t,r){return e4?new e8(e,t,r):t?new e8(e,t):new e8(e)}doWrite(e,t){this.ws.send(t)}}class e9 extends eJ{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=function(e,t){i||(i=new TextDecoder);let r=[],n=0,a=-1,s=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(0===n){if(1>eL(r))break;let e=eB(r,1);s=(128&e[0])==128,n=(a=127&e[0])<126?3:126===a?1:2}else if(1===n){if(2>eL(r))break;let e=eB(r,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),n=3}else if(2===n){if(8>eL(r))break;let e=eB(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),i=t.getUint32(0);if(i>2097151){l.enqueue(ew);break}a=0x100000000*i+t.getUint32(4),n=3}else{if(eL(r)<a)break;let e=eB(r,a);l.enqueue(eN(s?e:i.decode(e),t)),n=0}if(0===a||a>e){l.enqueue(ew);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),a=new TransformStream({transform(e,t){var r;r=r=>{let n;let i=r.length;if(i<126)new DataView((n=new Uint8Array(1)).buffer).setUint8(0,i);else if(i<65536){let e=new DataView((n=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,i)}else{let e=new DataView((n=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(n[0]|=128),t.enqueue(n),t.enqueue(r)},ex&&e.data instanceof Blob?e.data.arrayBuffer().then(eS).then(r):eE&&(e.data instanceof ArrayBuffer||eP(e.data))?r(eS(e.data)):ek(e,!1,e=>{n||(n=new TextEncoder),r(n.encode(e))})}});a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();let s=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),s())}).catch(e=>{})};s();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;this._writer.write(r).then(()=>{n&&eU(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}let te={websocket:e7,webtransport:e9,polling:e3},tt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tn(e){if(e.length>8e3)throw"URI too long";let t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=tt.exec(e||""),a={},s=14;for(;s--;)a[tr[s]]=i[s]||"";return -1!=r&&-1!=n&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,a.path),a.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}(0,a.query),a}let ti="function"==typeof addEventListener&&"function"==typeof removeEventListener,ta=[];ti&&addEventListener("offline",()=>{ta.forEach(e=>e())},!1);class ts extends eW{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let r=tn(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=tn(t.host).host);eV(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,n=r.length;e<n;e++){let n=r[e].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}(this.opts.query)),ti&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ta.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&ts.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",ts.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let r=this.writeBuffer[t].data;if(r&&(e+="string"==typeof r?function(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(r):Math.ceil(1.33*(r.byteLength||r.size))),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,eU(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ts.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ti&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=ta.indexOf(this._offlineEventListener);-1!==e&&ta.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ts.protocol=4;class to extends ts{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;ts.priorWebsocketSuccess=!1;let n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r){if("pong"===e.type&&"probe"===e.data)this.upgrading=!0,this.emitReserved("upgrading",t),t&&(ts.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"===this.readyState||(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{let e=Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}}))};function i(){r||(r=!0,c(),t.close(),t=null)}let a=e=>{let r=Error("probe error: "+e);r.transport=t.name,i(),this.emitReserved("upgradeError",r)};function s(){a("transport closed")}function o(){a("socket closed")}function l(e){t&&e.name!==t.name&&i()}let c=()=>{t.removeListener("open",n),t.removeListener("error",a),t.removeListener("close",s),this.off("close",o),this.off("upgrading",l)};t.once("open",n),t.once("error",a),t.once("close",s),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}class tl extends to{constructor(e,t={}){let r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>te[e]).filter(e=>!!e)),super(e,r)}}tl.protocol;let tc="function"==typeof ArrayBuffer,tu=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,td=Object.prototype.toString,th="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===td.call(Blob),tp="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===td.call(File);function tf(e){return tc&&(e instanceof ArrayBuffer||tu(e))||th&&e instanceof Blob||tp&&e instanceof File}let tm=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ty=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(l||(l={}));class tg{constructor(e){this.replacer=e}encode(e){return(e.type===l.EVENT||e.type===l.ACK)&&function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(e(t[r]))return!0;return!1}if(tf(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===l.EVENT?l.BINARY_EVENT:l.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===l.BINARY_EVENT||e.type===l.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=function(e){let t=[],r=e.data;return e.data=function e(t,r){if(!t)return t;if(tf(t)){let e={_placeholder:!0,num:r.length};return r.push(t),e}if(Array.isArray(t)){let n=Array(t.length);for(let i=0;i<t.length;i++)n[i]=e(t[i],r);return n}if("object"==typeof t&&!(t instanceof Date)){let n={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e(t[i],r));return n}return t}(r,t),e.attachments=t.length,{packet:e,buffers:t}}(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}function tv(e){return"[object Object]"===Object.prototype.toString.call(e)}class tb extends eW{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let r=(t=this.decodeString(e)).type===l.BINARY_EVENT;r||t.type===l.BINARY_ACK?(t.type=r?l.EVENT:l.ACK,this.reconstructor=new t_(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(tf(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===l[r.type])throw Error("unknown packet type "+r.type);if(r.type===l.BINARY_EVENT||r.type===l.BINARY_ACK){let n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let i=e.substring(n,t);if(i!=Number(i)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){let n=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(n,t)}else r.nsp="/";let n=e.charAt(t+1);if(""!==n&&Number(n)==n){let n=t+1;for(;++t;){let r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){let n=this.tryParse(e.substr(t));if(tb.isPayloadValid(r.type,n))r.data=n;else throw Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case l.CONNECT:return tv(t);case l.DISCONNECT:return void 0===t;case l.CONNECT_ERROR:return"string"==typeof t||tv(t);case l.EVENT:case l.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===tm.indexOf(t[0]));case l.ACK:case l.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class t_{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,r;let e=(t=this.reconPack,r=this.buffers,t.data=function e(t,r){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<r.length)return r[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=e(t[n],r);else if("object"==typeof t)for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=e(t[n],r));return t}(t.data,r),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function tw(e,t,r){return e.on(t,r),function(){e.off(t,r)}}let tx=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tE extends eW{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[tw(e,"open",this.onopen.bind(this)),tw(e,"packet",this.onpacket.bind(this)),tw(e,"error",this.onerror.bind(this)),tw(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,n,i;if(tx.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let a={type:l.EVENT,data:t};if(a.options={},a.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++,r=t.pop();this._registerAckCallback(e,r),a.id=e}let s=null===(n=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===n?void 0:n.writable,o=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!s||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var r;let n=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===n){this.acks[e]=t;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))},n),a=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,e)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((r,n)=>{let i=(e,t)=>e?n(e):r(t);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...n)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...n)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:l.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(!(e.nsp!==this.nsp))switch(e.type){case l.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case l.EVENT:case l.BINARY_EVENT:this.onevent(e);break;case l.ACK:case l.BINARY_ACK:this.onack(e);break;case l.DISCONNECT:this.ondisconnect();break;case l.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...n){r||(r=!0,t.packet({type:l.ACK,id:e,data:n}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:l.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function tP(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}tP.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},tP.prototype.reset=function(){this.attempts=0},tP.prototype.setMin=function(e){this.ms=e},tP.prototype.setMax=function(e){this.max=e},tP.prototype.setJitter=function(e){this.jitter=e};class tk extends eW{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,eV(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new tP({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let n=t.parser||u;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new tl(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let n=tw(t,"open",function(){r.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=tw(t,"error",i);if(!1!==this._timeout){let e=this._timeout,r=this.setTimeoutFn(()=>{n(),i(Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(n),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(tw(e,"ping",this.onping.bind(this)),tw(e,"data",this.ondata.bind(this)),tw(e,"error",this.onerror.bind(this)),tw(e,"close",this.onclose.bind(this)),tw(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){eU(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new tE(this,e,t),this.nsps[e]=r),r}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let tO={};function tS(e,t){let r;"object"==typeof e&&(t=e,e=void 0);let n=function(e,t="",r){let n=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),n=tn(e)),!n.port&&(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),i=n.source,a=n.id,s=n.path,o=tO[a]&&s in tO[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?r=new tk(i,t):(tO[a]||(tO[a]=new tk(i,t)),r=tO[a]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}Object.assign(tS,{Manager:tk,Socket:tE,io:tS,connect:tS});class tI extends eu{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(e,t){this.initial.set(e,t.initialState),this.setState(e,t.initialState),this.setMetadata(e,t.metadata)}setMetadata(e,t){this.metadata.set(e,t)}setState(e,t,r){if(r&&r.length>0){let t=this.log.get(e)||[];this.log.set(e,[...t,...r])}this.state.set(e,t)}fetch(e,t){let r={};return t.state&&(r.state=this.state.get(e)),t.metadata&&(r.metadata=this.metadata.get(e)),t.log&&(r.log=this.log.get(e)||[]),t.initialState&&(r.initialState=this.initial.get(e)),r}wipe(e){this.state.delete(e),this.metadata.delete(e)}listMatches(e){return[...this.metadata.entries()].filter(([,t])=>!e||(void 0===e.gameName||t.gameName===e.gameName)&&(void 0===e.where||(void 0===e.where.isGameover||void 0!==t.gameover===e.where.isGameover)&&(void 0===e.where.updatedBefore||!(t.updatedAt>=e.where.updatedBefore))&&(void 0===e.where.updatedAfter||!(t.updatedAt<=e.where.updatedAfter)))).map(([e])=>e)}}class tC extends Map{constructor(e){super(),this.key=e,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(e=>this.set(...e))}sync(){let e=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(e))}set(e,t){return super.set(e,t),this.sync(),this}delete(e){let t=super.delete(e);return this.sync(),t}}class tA extends tI{constructor(e="bgio"){super();let t=t=>new tC(`${e}_${t}`);this.state=t("state"),this.initial=t("initial"),this.metadata=t("metadata"),this.log=t("log")}}class tM extends em{constructor({game:e,bots:t,storageKey:r,persist:n}){let i={},a={};if(e&&e.ai&&t)for(let r in t){let n=t[r];a[r]=new n({game:e,enumerate:e.ai.enumerate,seed:e.seed})}let s=({playerID:e,...t})=>{let r=i[e];void 0!==r&&r(o(e,t))},o=eg(e);super(e,n?new tA(r):new tI,{send:s,sendAll:e=>{for(let t in i)s({playerID:t,...e})}}),this.connect=(e,t)=>{i[e]=t},this.subscribe(({state:e,matchID:r})=>{if(!t)return;let n=function(e,t){if(void 0!==e.ctx.gameover)return null;if(e.ctx.activePlayers){for(let r of Object.keys(t))if(r in e.ctx.activePlayers)return r}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}(e,a);null!==n&&setTimeout(async()=>{let t=await a[n].play(e,n);await this.onUpdate(t.action,e._stateID,r,t.action.payload.playerID)},100)})}}class tN extends R{constructor({master:e,...t}){super(t),this.master=e}sendChatMessage(e,t){let r=[e,t,this.credentials];this.master.onChatMessage(...r)}sendAction(e,t){this.master.onUpdate(t,e._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,e=>this.notifyClient(e)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(e){this.matchID=e,this.connect()}updatePlayerID(e){this.playerID=e,this.connect()}updateCredentials(e){this.credentials=e,this.connect()}}let tD=new Map;class tT extends R{constructor({socket:e,socketOpts:t,server:r,...n}){super(n),this.server=r,this.socket=e,this.socketOpts=t}sendAction(e,t){let r=[t,e._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(e,t){let r=[e,t,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket){if(this.server){let e=this.server;-1==e.search(/^https?:\/\//)&&(e="http://"+this.server),"/"!=e.slice(-1)&&(e+="/"),this.socket=tS(e+this.gameName,this.socketOpts)}else this.socket=tS("/"+this.gameName,this.socketOpts)}this.socket.on("patch",(e,t,r,n,i)=>{this.notifyClient({type:"patch",args:[e,t,r,n,i]})}),this.socket.on("update",(e,t,r)=>{this.notifyClient({type:"update",args:[e,t,r]})}),this.socket.on("sync",(e,t)=>{this.notifyClient({type:"sync",args:[e,t]})}),this.socket.on("matchData",(e,t)=>{this.notifyClient({type:"matchData",args:[e,t]})}),this.socket.on("chat",(e,t)=>{this.notifyClient({type:"chat",args:[e,t]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){let e=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...e)}}updateMatchID(e){this.matchID=e,this.requestSync()}updatePlayerID(e){this.playerID=e,this.requestSync()}updateCredentials(e){this.credentials=e,this.requestSync()}}function tj({server:e,socketOpts:t}={}){return r=>new tT({server:e,socketOpts:t,...r})}function tR(e){var t;let{game:r,numPlayers:n,board:i,multiplayer:a,enhancer:s}=e,{loading:o,debug:l}=e;return void 0===o&&(o=()=>ea.createElement("div",{className:"bgio-loading"},"connecting...")),(t=class extends ea.Component{constructor(e){super(e),void 0===l&&(l=e.debug),this.client=new F({game:r,debug:l,numPlayers:n,multiplayer:a,matchID:e.matchID,playerID:e.playerID,credentials:e.credentials,enhancer:s})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(e){this.props.matchID!=e.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=e.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=e.credentials&&this.client.updateCredentials(this.props.credentials)}render(){let e=this.client.getState();if(null===e)return ea.createElement(o);let t=null;return i&&(t=ea.createElement(i,{...e,...this.props,isMultiplayer:!!a,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),ea.createElement("div",{className:"bgio-client"},t)}}).propTypes={matchID:eo().string,playerID:eo().string,credentials:eo().string,debug:eo().any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class tL{constructor({server:e,gameComponents:t,playerName:r,playerCredentials:n}){this.client=new ei({server:e}),this.gameComponents=t,this.playerName=r||"Visitor",this.playerCredentials=n,this.matches=[]}async refresh(){try{for(let e of(this.matches=[],await this.client.listGames())){if(!this._getGameComponents(e))continue;let{matches:t}=await this.client.listMatches(e);this.matches.push(...t)}}catch(e){throw Error("failed to retrieve list of matches ("+e+")")}}_getMatchInstance(e){for(let t of this.matches)if(t.matchID===e)return t}_getGameComponents(e){for(let t of this.gameComponents)if(t.game.name===e)return t}_findPlayer(e){for(let t of this.matches)if(t.players.some(t=>t.name===e))return t}async join(e,t,r){try{let n=this._findPlayer(this.playerName);if(n)throw Error("player has already joined "+n.matchID);if(!(n=this._getMatchInstance(t)))throw Error("game instance "+t+" not found");let i=await this.client.joinMatch(e,t,{playerID:r,playerName:this.playerName});n.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=i.playerCredentials}catch(e){throw Error("failed to join match "+t+" ("+e+")")}}async leave(e,t){try{let r=this._getMatchInstance(t);if(!r)throw Error("match instance not found");for(let n of r.players)if(n.name===this.playerName){await this.client.leaveMatch(e,t,{playerID:n.id.toString(),credentials:this.playerCredentials}),delete n.name,delete this.playerCredentials;return}throw Error("player not found in match")}catch(e){throw Error("failed to leave match "+t+" ("+e+")")}}async disconnect(){let e=this._findPlayer(this.playerName);e&&await this.leave(e.gameName,e.matchID),this.matches=[],this.playerName="Visitor"}async create(e,t){try{let r=this._getGameComponents(e);if(!r)throw Error("game not found");if(t<r.game.minPlayers||t>r.game.maxPlayers)throw Error("invalid number of players "+t);await this.client.createMatch(e,{numPlayers:t})}catch(t){throw Error("failed to create match for "+e+" ("+t+")")}}}class tB extends ea.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{""!==this.state.playerName&&this.props.onEnter(this.state.playerName)},this.onKeyPress=e=>{"Enter"===e.key&&this.onClickEnter()},this.onChangePlayerName=e=>{let t=e.target.value.trim();this.setState({playerName:t,nameErrorMsg:t.length>0?"":"empty player name"})}}render(){return ea.createElement("div",null,ea.createElement("p",{className:"phase-title"},"Choose a player name:"),ea.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),ea.createElement("span",{className:"buttons"},ea.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),ea.createElement("br",null),ea.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,ea.createElement("br",null)))}}tB.defaultProps={playerName:""};class tW extends ea.Component{constructor(){super(...arguments),this._createSeat=e=>e.name||"[free]",this._createButtonJoin=(e,t)=>ea.createElement("button",{key:"button-join-"+e.matchID,onClick:()=>this.props.onClickJoin(e.gameName,e.matchID,""+t)},"Join"),this._createButtonLeave=e=>ea.createElement("button",{key:"button-leave-"+e.matchID,onClick:()=>this.props.onClickLeave(e.gameName,e.matchID)},"Leave"),this._createButtonPlay=(e,t)=>ea.createElement("button",{key:"button-play-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,playerID:""+t,numPlayers:e.players.length})},"Play"),this._createButtonSpectate=e=>ea.createElement("button",{key:"button-spectate-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,numPlayers:e.players.length})},"Spectate"),this._createInstanceButtons=e=>{let t=e.players.find(e=>e.name===this.props.playerName),r=e.players.find(e=>!e.name);return t&&r?this._createButtonLeave(e):r?this._createButtonJoin(e,r.id):t?ea.createElement("div",null,[this._createButtonPlay(e,t.id),this._createButtonLeave(e)]):this._createButtonSpectate(e)}}render(){let e=this.props.match,t="OPEN";return e.players.some(e=>!e.name)||(t="RUNNING"),ea.createElement("tr",{key:"line-"+e.matchID},ea.createElement("td",{key:"cell-name-"+e.matchID},e.gameName),ea.createElement("td",{key:"cell-status-"+e.matchID},t),ea.createElement("td",{key:"cell-seats-"+e.matchID},e.players.map(e=>this._createSeat(e)).join(", ")),ea.createElement("td",{key:"cell-buttons-"+e.matchID},this._createInstanceButtons(e)))}}class tU extends ea.Component{constructor(e){for(let t of(super(e),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(e,t)=>ea.createElement("option",{key:"name-option-"+t,value:t},e.game.name),this._createNumPlayersOption=e=>ea.createElement("option",{key:"num-option-"+e,value:e},e),this._createNumPlayersRange=e=>Array.from({length:e.maxPlayers+1}).map((e,t)=>t).slice(e.minPlayers),this.onChangeNumPlayers=e=>{this.setState({numPlayers:Number.parseInt(e.target.value)})},this.onChangeSelectedGame=e=>{let t=Number.parseInt(e.target.value);this.setState({selectedGame:t,numPlayers:this.props.games[t].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)},e.games)){let e=t.game;e.minPlayers||(e.minPlayers=1),e.maxPlayers||(e.maxPlayers=4),console.assert(e.maxPlayers>=e.minPlayers)}this.state={selectedGame:0,numPlayers:e.games[0].game.minPlayers}}render(){return ea.createElement("div",null,ea.createElement("select",{value:this.state.selectedGame,onChange:e=>this.onChangeSelectedGame(e)},this.props.games.map((e,t)=>this._createGameNameOption(e,t))),ea.createElement("span",null,"Players:"),ea.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(e=>this._createNumPlayersOption(e))),ea.createElement("span",{className:"buttons"},ea.createElement("button",{onClick:this.onClickCreate},"Create")))}}!function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"}(c||(c={}));class tG extends ea.Component{constructor(e){super(e),this.state={phase:c.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=e=>{let t=this.state.playerName;this.connection=new tL({server:e.lobbyServer,gameComponents:e.gameComponents,playerName:t,playerCredentials:this.state.credentialStore[t]})},this._updateCredentials=(e,t)=>{this.setState(r=>{let n=Object.assign({},r.credentialStore);return n[e]=t,{credentialStore:n}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=e=>{this._startRefreshInterval(),this.setState({playerName:e,phase:c.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:c.ENTER,errorMsg:""})},this._createMatch=async(e,t)=>{try{await this.connection.create(e,t),await this.connection.refresh(),this.setState({})}catch(e){this.setState({errorMsg:e.message})}},this._joinMatch=async(e,t,r)=>{try{await this.connection.join(e,t,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(e){this.setState({errorMsg:e.message})}},this._leaveMatch=async(e,t)=>{try{await this.connection.leave(e,t),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(e){this.setState({errorMsg:e.message})}},this._startMatch=(e,t)=>{let r;let n=this.connection._getGameComponents(e);if(!n){this.setState({errorMsg:"game "+e+" not supported"});return}if(t.numPlayers>1&&(r=this.props.gameServer?tj({server:this.props.gameServer}):tj()),1==t.numPlayers){let e=n.game.maxPlayers,t={};for(let r=1;r<e;r++)t[r+""]=Q;r=function({bots:e,persist:t,storageKey:r}={}){return n=>{let i;let{gameKey:a,game:s}=n,o=tD.get(a);return o&&o.bots===e&&o.storageKey===r&&o.persist===t&&(i=o.master),i||(i=new tM({game:s,bots:e,persist:t,storageKey:r}),tD.set(a,{master:i,bots:e,persist:t,storageKey:r})),new tN({master:i,...n})}}({bots:t})}let i={app:this.props.clientFactory({game:n.game,board:n.board,debug:this.props.debug,multiplayer:r}),matchID:t.matchID,playerID:t.numPlayers>1?t.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:c.PLAY,runningMatch:i})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:c.LIST,runningMatch:null})},this._getPhaseVisibility=e=>this.state.phase!==e?"hidden":"phase",this.renderMatches=(e,t)=>e.map(e=>{let{matchID:r,gameName:n,players:i}=e;return ea.createElement(tW,{key:"instance-"+r,match:{matchID:r,gameName:n,players:Object.values(i)},playerName:t,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){let e=el.Ay.load("lobbyState")||{};e.phase&&e.phase===c.PLAY&&(e.phase=c.LIST),e.phase&&e.phase!==c.ENTER&&this._startRefreshInterval(),this.setState({phase:e.phase||c.ENTER,playerName:e.playerName||"Visitor",credentialStore:e.credentialStore||{}})}componentDidUpdate(e,t){let r=this.state.playerName,n=this.state.credentialStore[r];if(t.phase!==this.state.phase||t.credentialStore[r]!==n||t.playerName!==r){this._createConnection(this.props),this._updateConnection();let e={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};el.Ay.save("lobbyState",e,{path:"/"})}e.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){let{gameComponents:e,renderer:t}=this.props,{errorMsg:r,playerName:n,phase:i,runningMatch:a}=this.state;return t?t({errorMsg:r,gameComponents:e,matches:this.connection.matches,phase:i,playerName:n,runningMatch:a,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):ea.createElement("div",{id:"lobby-view",style:{padding:50}},ea.createElement("div",{className:this._getPhaseVisibility(c.ENTER)},ea.createElement(tB,{key:n,playerName:n,onEnter:this._enterLobby})),ea.createElement("div",{className:this._getPhaseVisibility(c.LIST)},ea.createElement("p",null,"Welcome, ",n),ea.createElement("div",{className:"phase-title",id:"match-creation"},ea.createElement("span",null,"Create a match:"),ea.createElement(tU,{games:e,createMatch:this._createMatch})),ea.createElement("p",{className:"phase-title"},"Join a match:"),ea.createElement("div",{id:"instances"},ea.createElement("table",null,ea.createElement("tbody",null,this.renderMatches(this.connection.matches,n))),ea.createElement("span",{className:"error-msg"},r,ea.createElement("br",null))),ea.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),ea.createElement("div",{className:this._getPhaseVisibility(c.PLAY)},a&&ea.createElement(a.app,{matchID:a.matchID,playerID:a.playerID,credentials:a.credentials}),ea.createElement("div",{className:"buttons",id:"match-exit"},ea.createElement("button",{onClick:this._exitMatch},"Exit match"))),ea.createElement("div",{className:"buttons",id:"lobby-exit"},ea.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}tG.propTypes={gameComponents:eo().array.isRequired,lobbyServer:eo().string,gameServer:eo().string,debug:eo().bool,clientFactory:eo().func,refreshInterval:eo().number},tG.defaultProps={debug:!1,clientFactory:tR,refreshInterval:2e3}},83157:(e,t,r)=>{"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[q]}function a(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===$}(e)||Array.isArray(e)||!!e[z]||!!(null===(t=e.constructor)||void 0===t?void 0:t[z])||u(e)||d(e))}function s(e,t,r){void 0===r&&(r=!1),0===o(e)?(r?Object.keys:V)(e).forEach(function(n){r&&"symbol"==typeof n||t(n,e[n],e)}):e.forEach(function(r,n){return t(n,r,e)})}function o(e){var t=e[q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:u(e)?2:d(e)?3:0}function l(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t,r){var n=o(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function u(e){return B&&e instanceof Map}function d(e){return W&&e instanceof Set}function h(e){return e.o||e.t}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=F(e);delete t[q];for(var r=V(t),n=0;n<r.length;n++){var i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function f(e,t){return void 0===t&&(t=!1),y(e)||i(e)||!a(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&s(e,function(e,t){return f(t,!0)},!0)),e}function m(){n(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function g(e){var t=H[e];return t||n(18,e),t}function v(e,t){t&&(g("Patches"),e.u=[],e.s=[],e.v=t)}function b(e){_(e),e.p.forEach(x),e.p=null}function _(e){e===R&&(R=e.l)}function w(e){return R={p:[],l:R,h:e,m:!0,_:0}}function x(e){var t=e[q];0===t.i||1===t.i?t.j():t.g=!0}function E(e,t){t._=t.p.length;var r=t.p[0],i=void 0!==e&&e!==r;return t.h.O||g("ES5").S(t,e,i),i?(r[q].P&&(b(t),n(4)),a(e)&&(e=P(t,e),t.l||O(t,e)),t.u&&g("Patches").M(r[q].t,e,t.u,t.s)):e=P(t,r,[]),b(t),t.u&&t.v(t.u,t.s),e!==G?e:void 0}function P(e,t,r){if(y(t))return t;var n=t[q];if(!n)return s(t,function(i,a){return k(e,n,t,i,a,r)},!0),t;if(n.A!==e)return t;if(!n.P)return O(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=p(n.k):n.o,a=i,o=!1;3===n.i&&(a=new Set(i),i.clear(),o=!0),s(a,function(t,a){return k(e,n,i,t,a,r,o)}),O(e,i,!1),r&&e.u&&g("Patches").N(n,r,e.u,e.s)}return n.o}function k(e,t,r,n,s,o,u){if(i(s)){var d=P(e,s,o&&t&&3!==t.i&&!l(t.R,n)?o.concat(n):void 0);if(c(r,n,d),!i(d))return;e.m=!1}else u&&r.add(s);if(a(s)&&!y(s)){if(!e.h.D&&e._<1)return;P(e,s),t&&t.A.l||O(e,s)}}function O(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&f(t,r)}function S(e,t){var r=e[q];return(r?h(r):e)[t]}function I(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function C(e){e.P||(e.P=!0,e.l&&C(e.l))}function A(e){e.o||(e.o=p(e.t))}function M(e,t,r){var n,i,a,s,o,l,c,h=u(t)?g("MapSet").F(t,r):d(t)?g("MapSet").T(t,r):e.O?(a=i={i:(n=Array.isArray(t))?1:0,A:r?r.A:R,P:!1,I:!1,R:{},l:r,t:t,k:null,o:null,j:null,C:!1},s=J,n&&(a=[i],s=K),l=(o=Proxy.revocable(a,s)).revoke,c=o.proxy,i.k=c,i.j=l,c):g("ES5").J(t,r);return(r?r.A:R).p.push(h),h}function N(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}r.d(t,{A:()=>eb,B:()=>ec,E:()=>eD,F:()=>eM,G:()=>D,I:()=>eq,M:()=>Z,N:()=>ej,P:()=>es,R:()=>et,S:()=>eF,T:()=>eV,U:()=>e$,a:()=>eA,b:()=>eW,c:()=>eU,d:()=>eG,e:()=>eO,f:()=>eo,g:()=>eu,h:()=>eC,i:()=>ek,j:()=>ei,k:()=>en,l:()=>ea,m:()=>er,n:()=>e_,o:()=>ee,p:()=>el,q:()=>eL,r:()=>ev,s:()=>eh,t:()=>eN,u:()=>em,v:()=>ey,w:()=>eg,x:()=>eB,y:()=>ep,z:()=>ef});var D,T,j,R,L="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),B="undefined"!=typeof Map,W="undefined"!=typeof Set,U="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,G=L?Symbol.for("immer-nothing"):((j={})["immer-nothing"]=!0,j),z=L?Symbol.for("immer-draftable"):"__$immer_draftable",q=L?Symbol.for("immer-state"):"__$immer_state",$=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),V="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,F=Object.getOwnPropertyDescriptors||function(e){var t={};return V(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},H={},J={get:function(e,t){if(t===q)return e;var r,n,i=h(e);if(!l(i,t))return(n=I(i,t))?"value"in n?n.value:null===(r=n.get)||void 0===r?void 0:r.call(e.k):void 0;var s=i[t];return e.I||!a(s)?s:s===S(e.t,t)?(A(e),e.o[t]=M(e.A.h,s,e)):s},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,r){var n=I(h(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=S(h(e),t),a=null==i?void 0:i[q];if(a&&a.t===r)return e.o[t]=r,e.R[t]=!1,!0;if((r===i?0!==r||1/r==1/i:r!=r&&i!=i)&&(void 0!==r||l(e.t,t)))return!0;A(e),C(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==S(e.t,t)||t in e.t?(e.R[t]=!1,A(e),C(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},K={};s(J,function(e,t){K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),K.deleteProperty=function(e,t){return K.set.call(this,e,t,void 0)},K.set=function(e,t,r){return J.set.call(this,e[0],t,r,e[0])};var Y=new(function(){function e(e){var t=this;this.O=U,this.D=!0,this.produce=function(e,r,i){if("function"==typeof e&&"function"!=typeof r){var s,o=r;return r=e,function(e){var n=this;void 0===e&&(e=o);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return t.produce(e,function(e){var t;return(t=r).call.apply(t,[n,e].concat(a))})}}if("function"!=typeof r&&n(6),void 0!==i&&"function"!=typeof i&&n(7),a(e)){var l=w(t),c=M(t,e,void 0),u=!0;try{s=r(c),u=!1}finally{u?b(l):_(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return v(l,i),E(e,l)},function(e){throw b(l),e}):(v(l,i),E(s,l))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===G&&(s=void 0),t.D&&f(s,!0),i){var d=[],h=[];g("Patches").M(e,s,d,h),i(d,h)}return s}n(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.produceWithPatches(r,function(t){return e.apply(void 0,[t].concat(i))})};var n,i,a=t.produce(e,r,function(e,t){n=e,i=t});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(function(e){return[e,n,i]}):[a,n,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){a(e)||n(8),i(e)&&(i(t=e)||n(22,t),e=function e(t){if(!a(t))return t;var r,n=t[q],i=o(t);if(n){if(!n.P&&(n.i<4||!g("ES5").K(n)))return n.t;n.I=!0,r=N(t,i),n.I=!1}else r=N(t,i);return s(r,function(t,i){var a;n&&(2===o(a=n.t)?a.get(t):a[t])===i||c(r,t,e(i))}),3===i?new Set(r):r}(t));var t,r=w(this),l=M(this,e,void 0);return l[q].C=!0,_(r),l},t.finishDraft=function(e,t){var r=(e&&e[q]).A;return v(r,t),E(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!U&&n(20),this.O=e},t.applyPatches=function(e,t){for(r=t.length-1;r>=0;r--){var r,n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var a=g("Patches").$;return i(e)?a(e,t):this.produce(e,function(e){return a(e,t)})},e}()),X=Y.produce;Y.produceWithPatches.bind(Y),Y.setAutoFreeze.bind(Y),Y.setUseProxies.bind(Y),Y.applyPatches.bind(Y),Y.createDraft.bind(Y),Y.finishDraft.bind(Y);var Q=r(87613);r(3690);let Z="MAKE_MOVE",ee="GAME_EVENT",et="REDO",er="RESET",en="SYNC",ei="UNDO",ea="UPDATE",es="PATCH",eo="PLUGIN",el="STRIP_TRANSIENTS",ec=(e,t,r,n)=>({type:Z,payload:{type:e,args:t,playerID:r,credentials:n}}),eu=(e,t,r,n)=>({type:ee,payload:{type:e,args:t,playerID:r,credentials:n}}),ed=(e,t,r,n)=>({type:ee,payload:{type:e,args:t,playerID:r,credentials:n},automatic:!0}),eh=e=>({type:en,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),ep=(e,t,r,n)=>({type:es,prevStateID:e,stateID:t,patch:r,deltalog:n,clientOnly:!0}),ef=(e,t)=>({type:ea,state:e,deltalog:t,clientOnly:!0}),em=e=>({type:er,state:e,clientOnly:!0}),ey=(e,t)=>({type:ei,payload:{type:null,args:null,playerID:e,credentials:t}}),eg=(e,t)=>({type:et,payload:{type:null,args:null,playerID:e,credentials:t}}),ev=()=>({type:el});var eb=Object.freeze({__proto__:null,makeMove:ec,gameEvent:eu,automaticGameEvent:ed,sync:eh,patch:ep,update:ef,reset:em,undo:ey,redo:eg,plugin:(e,t,r,n)=>({type:eo,payload:{type:e,args:t,playerID:r,credentials:n}}),stripTransients:ev});let e_="INVALID_MOVE";!function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"}(D||(D={})),function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks — the turn is already ending.",e.MaxTurnEndings="Maximum number of turn endings exceeded for this update.\nThis likely means game code is triggering an infinite loop.",e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phase’s `onEnd` hook — the phase is already ending.\nIf you’re trying to dynamically choose the next phase when a phase ends, use the phase’s `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phase’s `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."}(T||(T={}));class ew{constructor(e,t,r){this.flow=e,this.playerID=r,this.dispatch=[],this.initialTurn=t.turn,this.updateTurnContext(t,void 0),this.maxEndedTurnsPerAction=100*t.numPlayers}api(){let e={_private:this};for(let t of this.flow.eventNames)e[t]=(...e)=>{this.dispatch.push({type:t,args:e,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:Error("Events Plugin Error")})};return e}isUsed(){return this.dispatch.length>0}updateTurnContext(e,t){this.currentPhase=e.phase,this.currentTurn=e.turn,this.currentMethod=t}unsetCurrentMethod(){this.currentMethod=void 0}update(e){let t=e,r=({stack:e},r)=>({...t,plugins:{...t.plugins,events:{...t.plugins.events,data:{error:r+"\n"+e}}}});for(let t=0;t<this.dispatch.length;t++){let n=this.dispatch[t],i=n.turn!==e.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(n.error,T.MaxTurnEndings);if(void 0===n.calledFrom)return r(n.error,T.CalledOutsideHook);if(e.ctx.gameover)break;switch(n.type){case"endStage":case"setStage":case"setActivePlayers":switch(n.calledFrom){case D.TURN_ON_END:case D.PHASE_ON_END:return r(n.error,T.StageEventInOnEnd);case D.PHASE_ON_BEGIN:return r(n.error,T.StageEventInPhaseBegin);case D.TURN_ON_BEGIN:if("setActivePlayers"===n.type)break;return r(n.error,T.StageEventInTurnBegin)}if(i)continue;break;case"endTurn":if(n.calledFrom===D.TURN_ON_END||n.calledFrom===D.PHASE_ON_END)return r(n.error,T.EndTurnInOnEnd);if(i)continue;break;case"endPhase":case"setPhase":if(n.calledFrom===D.PHASE_ON_END)return r(n.error,T.PhaseEventInOnEnd);if(n.phase!==e.ctx.phase)continue}let a=ed(n.type,n.args,this.playerID);e=this.flow.processEvent(e,a)}return e}}let ex={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(r,...n)=>{let i=r.events;i&&i._private.updateTurnContext(r.ctx,t);let a=e(r,...n);return i&&i._private.unsetCurrentMethod(),a},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:r})=>new ew(e.flow,t,r).api()},eE=()=>{},eP=(...e)=>console.error(...e);function ek(e){eE(`INFO: ${e}`)}function eO(e){eP("ERROR:",e)}let eS=[{name:"plugin-immer",fnWrap:e=>(t,...r)=>{let n=!1,i=X(t.G,i=>{let a=e({...t,G:i},...r);if(a===e_){n=!0;return}return a});return n?e_:i}},Q.R,{name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},{name:"plugin-serializable",fnWrap:e=>(t,...r)=>e(t,...r)}],eI=[...eS,ex],eC=(e,t,r)=>(r.game.plugins.filter(e=>void 0!==e.action).filter(e=>e.name===t.payload.type).forEach(r=>{let n=r.name,i=e.plugins[n]||{data:{}},a=r.action(i.data,t.payload);e={...e,plugins:{...e.plugins,[n]:{...i,data:a}}}}),e),eA=({plugins:e})=>Object.entries(e||{}).reduce((e,[t,{api:r}])=>(e[t]=r,e),{}),eM=(e,t,r)=>[...eS,...r,ex].filter(e=>void 0!==e.fnWrap).reduce((e,{fnWrap:r})=>r(e,t),e),eN=(e,t)=>([...eI,...t.game.plugins].filter(e=>void 0!==e.setup).forEach(r=>{let n=r.name,i=r.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[n]:{data:i}}}}),e),eD=(e,t)=>([...eI,...t.game.plugins].filter(e=>void 0!==e.api).forEach(r=>{let n=r.name,i=e.plugins[n]||{data:{}},a=r.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[n]:{...i,api:a}}}}),e),eT=(e,t)=>([...eS,...t.game.plugins,ex].reverse().forEach(r=>{let n=r.name,i=e.plugins[n]||{data:{}};if(r.flush){let n=r.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[r.name]:{data:n}}}}else if(r.dangerouslyFlushRawState){let a=(e=r.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data})).plugins[n].data;e={...e,plugins:{...e.plugins,[r.name]:{data:a}}}}}),e),ej=(e,t)=>[...eI,...t.game.plugins].filter(e=>void 0!==e.noClient).map(r=>{let n=r.name,i=e.plugins[n];return!!i&&r.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data})}).includes(!0),eR=(e,t)=>[...eI,...t.game.plugins].filter(e=>void 0!==e.isInvalid).map(r=>{let{name:n}=r,i=e.plugins[n],a=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:i&&i.data});return!!a&&{plugin:n,message:a}}).find(e=>e)||!1,eL=(e,t)=>{let r=eT(e,t),n=eR(r,t);if(!n)return[r];let{plugin:i,message:a}=n;return eO(`${i} plugin declared action invalid:
${a}`),[e,n]},eB=({G:e,ctx:t,plugins:r={}},{game:n,playerID:i})=>([...eI,...n.plugins].forEach(({name:a,playerView:s})=>{if(!s)return;let{data:o}=r[a]||{data:{}},l=s({G:e,ctx:t,game:n,data:o,playerID:i});r={...r,[a]:{data:l}}}),r);function eW(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function eU(e,t){let r={},n=[],i=null,a={},s={};if(Array.isArray(t)){let e={};t.forEach(t=>e[t]=eF.NULL),r=e}else{if(eW(t),t.next&&(i=t.next),t.revert&&(n=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),void 0!==t.currentPlayer&&ez(r,a,s,e.currentPlayer,t.currentPlayer),void 0!==t.others)for(let n=0;n<e.playOrder.length;n++){let i=e.playOrder[n];i!==e.currentPlayer&&ez(r,a,s,i,t.others)}if(void 0!==t.all)for(let n=0;n<e.playOrder.length;n++)ez(r,a,s,e.playOrder[n],t.all);if(t.value)for(let e in t.value)ez(r,a,s,e,t.value[e]);if(t.minMoves)for(let e in r)void 0===a[e]&&(a[e]=t.minMoves);if(t.maxMoves)for(let e in r)void 0===s[e]&&(s[e]=t.maxMoves)}0===Object.keys(r).length&&(r=null),0===Object.keys(a).length&&(a=null),0===Object.keys(s).length&&(s=null);let o={};for(let e in r)o[e]=0;return{...e,activePlayers:r,_activePlayersMinMoves:a,_activePlayersMaxMoves:s,_activePlayersNumMoves:o,_prevActivePlayers:n,_nextActivePlayers:i}}function eG(e){let{activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i,_prevActivePlayers:a,_nextActivePlayers:s}=e;if(t&&0===Object.keys(t).length){if(s)e=eU(e,s),{activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i,_prevActivePlayers:a}=e;else if(a.length>0){let e=a.length-1;({activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i}=a[e]),a=a.slice(0,e)}else t=null,r=null,n=null}return{...e,activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:i,_prevActivePlayers:a}}function ez(e,t,r,n,i){("object"!=typeof i||i===eF.NULL)&&(i={stage:i}),void 0!==i.stage&&(eW(i),e[n]=i.stage,i.minMoves&&(t[n]=i.minMoves),i.maxMoves&&(r[n]=i.maxMoves))}function eq(e,t){let{G:r,ctx:n}=e,{numPlayers:i}=n,a={...eA(e),G:r,ctx:n},s=t.order,o=[...Array.from({length:i})].map((e,t)=>t+"");void 0!==s.playOrder&&(o=s.playOrder(a));let l=s.first(a),c=typeof l;"number"!==c&&eO(`invalid value returned by turn.order.first — expected number got ${c} “${l}”.`);let u=o[l]+"";return eU(n={...n,currentPlayer:u,playOrderPos:l,playOrder:o},t.activePlayers||{})}function e$(e,t,r,n){let i=r.order,{G:a,ctx:s}=e,o=s.playOrderPos,l=!1;if(n&&!0!==n)"object"!=typeof n&&eO(`invalid argument to endTurn: ${n}`),Object.keys(n).forEach(e=>{switch(e){case"remove":t=s.playOrder[o]+"";break;case"next":o=s.playOrder.indexOf(n.next),t=n.next;break;default:eO(`invalid argument to endTurn: ${e}`)}});else{let r={...eA(e),G:a,ctx:s},n=i.next(r),c=typeof n;(void 0!==n&&"number"!==c&&eO(`invalid value returned by turn.order.next — expected number or undefined got ${c} “${n}”.`),void 0===n)?l=!0:(o=n,t=s.playOrder[o]+"")}return{endPhase:l,ctx:s={...s,playOrderPos:o,currentPlayer:t}}}let eV={DEFAULT:{first:({ctx:e})=>0===e.turn?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},RESET:{first:()=>0,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},CONTINUE:{first:({ctx:e})=>e.playOrderPos,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},ONCE:{first:()=>0,next:({ctx:e})=>{if(e.playOrderPos<e.playOrder.length-1)return e.playOrderPos+1}},CUSTOM:e=>({playOrder:()=>e,first:()=>0,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}),CUSTOM_FROM:e=>({playOrder:({G:t})=>t[e],first:()=>0,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length})},eF={NULL:null};eF.NULL,eF.NULL,eF.NULL,eF.NULL},21070:(e,t)=>{"use strict";t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var n={},a=e.split(i),s=(t||{}).decode||r,o=0;o<a.length;o++){var l=a[o],c=l.indexOf("=");if(!(c<0)){var u=l.substr(0,c).trim(),d=l.substr(++c,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==n[u]&&(n[u]=function(e,t){try{return t(e)}catch(t){return e}}(d,s))}}return n},t.serialize=function(e,t,r){var i=r||{},s=i.encode||n;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!a.test(e))throw TypeError("argument name is invalid");var o=s(t);if(o&&!a.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c))throw Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(c)}if(i.domain){if(!a.test(i.domain))throw TypeError("option domain is invalid");l+="; Domain="+i.domain}if(i.path){if(!a.test(i.path))throw TypeError("option path is invalid");l+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;default:throw TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,n=encodeURIComponent,i=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},3690:e=>{var t,r,n=Object.prototype,i=Function.prototype.toString,a=n.hasOwnProperty,s=i.call(Object),o=n.toString,l=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!(e&&"object"==typeof e)||"[object Object]"!=o.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=l(e);if(null===t)return!0;var r=a.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)==s}},74019:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(3276);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...h}=e;return(0,n.createElement)("svg",{ref:t,...s,width:i,height:i,stroke:r,strokeWidth:l?24*Number(o)/Number(i):o,className:a("lucide",c),...h},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:l,...c}=r;return(0,n.createElement)(o,{ref:s,iconNode:t,className:a("lucide-".concat(i(e)),l),...c})});return r.displayName="".concat(e),r}},46194:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(74019).A)("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]])},39706:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(74019).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},98255:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(74019).A)("ShieldHalf",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 22V2",key:"zs6s6o"}]])},42411:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(74019).A)("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]])},13633:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(74019).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},28704:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(74019).A)("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]])},77904:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(74019).A)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]])},44959:(e,t,r)=>{"use strict";var n=r(61799);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},95879:e=>{"use strict";var t=Object.assign.bind(Object);e.exports=t,e.exports.default=e.exports},42191:(e,t,r)=>{var n=r(17013);"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//"),({189:function(){!function(e,t){"use strict";if(!e.setImmediate){var r,i,a,s,o,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);(h=h&&h.setTimeout?h:e,"[object process]"===({}).toString.call(e.process))?o=function(e){n.nextTick(function(){f(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(r="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&f(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),o=function(t){e.postMessage(r+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){f(e.data)},o=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(s=d.documentElement,o=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):o=function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=Function(""+e));for(var t=Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[l]=n,o(l),l++},h.clearImmediate=p}function p(e){delete c[e]}function f(e){if(u)setTimeout(f,0,e);else{var r=c[e];if(r){u=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{p(e),u=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)}})[189](),e.exports={}},31715:(e,t,r)=>{"use strict";var n=r(10152);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,a,s){if(s!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return r.PropTypes=r,r}},97825:(e,t,r)=>{e.exports=r(31715)()},10152:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},12833:(e,t,r)=>{"use strict";var n=r(17013),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=o(r(21070)),s=o(r(95879));function o(e){return e&&e.__esModule?e:{default:e}}var l="undefined"==typeof document||void 0!==n&&n.env&&!1,c={},u=void 0;function d(){return u&&!u.headersSent}function h(e){c=e?a.default.parse(e):{}}t.Ay={setRawCookie:h,load:function(e,t){var r=l?c:a.default.parse(document.cookie),n=r&&r[e];if(void 0===t&&(t=!n||"{"!==n[0]&&"["!==n[0]),!t)try{n=JSON.parse(n)}catch(e){}return n},loadAll:function(e){var t=l?c:a.default.parse(document.cookie);if(void 0===e&&(e=!t||"{"!==t[0]&&"["!==t[0]),!e)try{t=JSON.parse(t)}catch(e){}return t},select:function(e){var t=l?c:a.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(r,n){if(!e.test(n))return r;var i={};return i[n]=t[n],(0,s.default)({},r,i)},{}):t:{}},save:function(e,t,r){c[e]=t,(void 0===t?"undefined":i(t))==="object"&&(c[e]=JSON.stringify(t)),l||(document.cookie=a.default.serialize(e,c[e],r)),d()&&u.cookie&&u.cookie(e,t,r)},remove:function(e,t){delete c[e],t=void 0===t?{}:"string"==typeof t?{path:t}:(0,s.default)({},t),"undefined"!=typeof document&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=a.default.serialize(e,"",t)),d()&&u.clearCookie&&u.clearCookie(e,t)},plugToRequest:function(e,t){return e.cookie?c=e.cookie:e.cookies?c=e.cookies:e.headers&&e.headers.cookie?h(e.headers.cookie):c={},u=t,function(){u=null,c={}}}}},70081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffAny=t.diffObjects=t.diffArrays=t.intersection=t.subtract=t.isDestructive=void 0;var n=r(49486);function i(e,t){var r={};for(var i in e)n.hasOwnProperty.call(e,i)&&void 0!==e[i]&&(r[i]=1);for(var a in t)n.hasOwnProperty.call(t,a)&&void 0!==t[a]&&delete r[a];return Object.keys(r)}function a(e){for(var t=e.length,r={},i=0;i<t;i++){var a=e[i];for(var s in a)n.hasOwnProperty.call(a,s)&&void 0!==a[s]&&(r[s]=(r[s]||0)+1)}for(var s in r)r[s]<t&&delete r[s];return Object.keys(r)}function s(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function o(e,t,r,n){void 0===n&&(n=c);var i={"0,0":{operations:[],cost:0}},a=isNaN(e.length)||e.length<=0?0:e.length;return(function a(o,l){var c="".concat(o,",").concat(l),u=i[c];if(void 0===u){if(o>0&&l>0&&!n(e[o-1],t[l-1],r.add(String(o-1))).length)u=a(o-1,l-1);else{var d=[];if(o>0){var h=a(o-1,l);d.push(s(h,{op:"remove",index:o-1}))}if(l>0){var p=a(o,l-1),f={op:"add",index:o-1,value:t[l-1]};d.push(s(p,f))}if(o>0&&l>0){var m=a(o-1,l-1),y={op:"replace",index:o-1,original:e[o-1],value:t[l-1]};d.push(s(m,y))}u=d.sort(function(e,t){return e.cost-t.cost})[0]}i[c]=u}return u})(a,isNaN(t.length)||t.length<=0?0:t.length).operations.reduce(function(e,t){var i=e[0],s=e[1];if("add"===t.op){var o=t.index+1+s,l=o<a+s?String(o):"-",c={op:t.op,path:r.add(l).toString(),value:t.value};return[i.concat(c),s+1]}if("remove"===t.op){var c={op:t.op,path:r.add(String(t.index+s)).toString()};return[i.concat(c),s-1]}var u=r.add(String(t.index+s)),d=n(t.original,t.value,u);return[i.concat.apply(i,d),s]},[[],0])[0]}function l(e,t,r,n){void 0===n&&(n=c);var s=[];return i(e,t).forEach(function(e){s.push({op:"remove",path:r.add(e).toString()})}),i(t,e).forEach(function(e){s.push({op:"add",path:r.add(e).toString(),value:t[e]})}),a([e,t]).forEach(function(i){s.push.apply(s,n(e[i],t[i],r.add(i)))}),s}function c(e,t,r,i){if(void 0===i&&(i=c),e===t)return[];var a=(0,n.objectType)(e),s=(0,n.objectType)(t);return"array"==a&&"array"==s?o(e,t,r,i):"object"==a&&"object"==s?l(e,t,r,i):[{op:"replace",path:r.toString(),value:t}]}t.isDestructive=function(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t},t.subtract=i,t.intersection=a,t.diffArrays=o,t.diffObjects=l,t.diffAny=c},80134:(e,t,r)=>{"use strict";t.B8=t.X6=void 0;var n=r(69223),i=r(65916),a=r(70081);t.X6=function(e,t){return t.map(function(t){return(0,i.apply)(e,t)})},t.B8=function(e,t,r){var i=new n.Pointer;return(r?function e(t,n,i){var s=r(t,n,i);return Array.isArray(s)?s:(0,a.diffAny)(t,n,i,e)}:a.diffAny)(e,t,i)}},65916:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.InvalidOperationError=t.test=t.copy=t.move=t.replace=t.remove=t.add=t.TestError=t.MissingError=void 0;var a=r(69223),s=r(49486),o=r(70081),l=function(e){function t(t){var r=e.call(this,"Value required at path: ".concat(t))||this;return r.path=t,r.name="MissingError",r}return i(t,e),t}(Error);t.MissingError=l;var c=function(e){function t(t,r){var n=e.call(this,"Test failed: ".concat(t," != ").concat(r))||this;return n.actual=t,n.expected=r,n.name="TestError",n}return i(t,e),t}(Error);function u(e,t,r){if(Array.isArray(e)){if("-"==t)e.push(r);else{var n=parseInt(t,10);e.splice(n,0,r)}}else e[t]=r}function d(e,t){if(Array.isArray(e)){var r=parseInt(t,10);e.splice(r,1)}else delete e[t]}function h(e,t){var r=a.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new l(t.path):(u(r.parent,r.key,(0,s.clone)(t.value)),null)}function p(e,t){var r=a.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.value?new l(t.path):(d(r.parent,r.key),null)}function f(e,t){var r=a.Pointer.fromJSON(t.path).evaluate(e);if(null===r.parent)return new l(t.path);if(Array.isArray(r.parent)){if(parseInt(r.key,10)>=r.parent.length)return new l(t.path)}else if(void 0===r.value)return new l(t.path);return r.parent[r.key]=(0,s.clone)(t.value),null}function m(e,t){var r=a.Pointer.fromJSON(t.from).evaluate(e);if(void 0===r.value)return new l(t.from);var n=a.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new l(t.path):(d(r.parent,r.key),u(n.parent,n.key,r.value),null)}function y(e,t){var r=a.Pointer.fromJSON(t.from).evaluate(e);if(void 0===r.value)return new l(t.from);var n=a.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new l(t.path):(u(n.parent,n.key,(0,s.clone)(r.value)),null)}function g(e,t){var r=a.Pointer.fromJSON(t.path).evaluate(e);return(0,o.diffAny)(r.value,t.value,new a.Pointer).length?new c(r.value,t.value):null}t.TestError=c,t.add=h,t.remove=p,t.replace=f,t.move=m,t.copy=y,t.test=g;var v=function(e){function t(t){var r=e.call(this,"Invalid operation: ".concat(t.op))||this;return r.operation=t,r.name="InvalidOperationError",r}return i(t,e),t}(Error);t.InvalidOperationError=v,t.apply=function(e,t){switch(t.op){case"add":return h(e,t);case"remove":return p(e,t);case"replace":return f(e,t);case"move":return m(e,t);case"copy":return y(e,t);case"test":return g(e,t)}return new v(t)}},69223:(e,t)=>{"use strict";function r(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=t.escapeToken=t.unescapeToken=void 0,t.unescapeToken=r,t.escapeToken=n;var i=function(){function e(e){void 0===e&&(e=[""]),this.tokens=e}return e.fromJSON=function(t){var n=t.split("/").map(r);if(""!==n[0])throw Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(n).join("/")},e.prototype.evaluate=function(e){for(var t=null,r="",n=e,i=1,a=this.tokens.length;i<a;i++)t=n,"__proto__"!=(r=this.tokens[i])&&"constructor"!=r&&"prototype"!=r&&(n=(t||{})[r]);return{parent:t,key:r,value:n}},e.prototype.get=function(e){return this.evaluate(e).value},e.prototype.set=function(e,t){var r=this.evaluate(e);r.parent&&(r.parent[r.key]=t)},e.prototype.push=function(e){this.tokens.push(e)},e.prototype.add=function(t){return new e(this.tokens.concat(String(t)))},e}();t.Pointer=i},49486:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.objectType=t.hasOwnProperty=void 0,t.hasOwnProperty=Object.prototype.hasOwnProperty,t.objectType=function(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e},t.clone=function e(r){if(!(null!=r&&"object"==typeof r))return r;if(r.constructor==Array){for(var n=r.length,i=Array(n),a=0;a<n;a++)i[a]=e(r[a]);return i}if(r.constructor==Date)return new Date(+r);var s={};for(var o in r)t.hasOwnProperty.call(r,o)&&(s[o]=e(r[o]));return s}},68113:(e,t,r)=>{"use strict";r.d(t,{e2v:()=>h,ZpM:()=>C,pde:()=>eS,y$y:()=>A.o});var n=r(27628),i=r(57932),a=r(81778),s=r(68215),o=r(3276),l=r(12274),c=r(86343),u=r(68320),d=(0,a.Rf)((e,t)=>{let{Component:r,domRef:d,context:h,children:p,classNames:f,getButtonGroupProps:m}=function(e){var t,r;let c=(0,i.o)(),[u,d]=(0,a.rE)(e,n.G.variantKeys),{ref:h,as:p,children:f,color:m="default",size:y="md",variant:g="solid",radius:v,isDisabled:b=!1,isIconOnly:_=!1,disableRipple:w=null!=(t=null==c?void 0:c.disableRipple)&&t,disableAnimation:x=null!=(r=null==c?void 0:c.disableAnimation)&&r,className:E,...P}=u,k=(0,s.zD)(h),O=(0,o.useMemo)(()=>(0,n.G)({...d,className:E}),[(0,l.t6)(d),E]);return{Component:p||"div",children:f,domRef:k,context:(0,o.useMemo)(()=>({size:y,color:m,variant:g,radius:v,isIconOnly:_,isDisabled:b,disableAnimation:x,disableRipple:w,fullWidth:!!(null==e?void 0:e.fullWidth)}),[y,m,g,v,b,_,x,w,null==e?void 0:e.fullWidth]),classNames:O,getButtonGroupProps:(0,o.useCallback)(()=>({role:"group",...P}),[P])}}({...e,ref:t});return(0,u.jsx)(c.l,{value:h,children:(0,u.jsx)(r,{ref:d,className:f,...m(),children:p})})});d.displayName="NextUI.ButtonGroup";var h=d,[p,f]=(0,r(3485).q)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"}),m=r(71980),y=r(15831),g=(0,m.tv)({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-none","text-foreground","box-border","bg-content1",...y.zb],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),v=r(34508),b=r(41753),_=r(71870),w=r(59651),x=r(3430),E=r(89834),P=r(98794),k=r(37953),O=r(15144),S=r(27306),I=(0,a.Rf)((e,t)=>{let{children:r,context:n,Component:c,isPressable:d,disableAnimation:h,disableRipple:f,getCardProps:m,getRippleProps:y}=function(e){var t,r,n,c;let u=(0,i.o)(),[d,h]=(0,a.rE)(e,g.variantKeys),{ref:p,as:f,children:m,onClick:y,onPress:S,autoFocus:I,className:C,classNames:A,allowTextSelectionOnPress:M=!0,...N}=d,D=(0,s.zD)(p),T=f||(e.isPressable?"button":"div"),j="string"==typeof T,R=null!=(r=null!=(t=e.disableAnimation)?t:null==u?void 0:u.disableAnimation)&&r,L=null!=(c=null!=(n=e.disableRipple)?n:null==u?void 0:u.disableRipple)&&c,B=(0,E.$)(null==A?void 0:A.base,C),{onClick:W,onClear:U,ripples:G}=(0,O.k)(),z=e=>{R||L||!D.current||W(e)},{buttonProps:q,isPressed:$}=(0,x.l)({onPress:S,elementType:f,isDisabled:!e.isPressable,onClick:(0,v.c)(y,z),allowTextSelectionOnPress:M,...N},D),{hoverProps:V,isHovered:F}=(0,w.M)({isDisabled:!e.isHoverable,...N}),{isFocusVisible:H,isFocused:J,focusProps:K}=(0,_.o)({autoFocus:I}),Y=(0,o.useMemo)(()=>g({...h,disableAnimation:R}),[(0,l.t6)(h),R]),X=(0,o.useMemo)(()=>({slots:Y,classNames:A,disableAnimation:R,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[Y,A,e.isDisabled,e.isFooterBlurred,R,e.fullWidth]),Q=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:D,className:Y.base({class:B}),tabIndex:e.isPressable?0:-1,"data-hover":(0,P.sE)(F),"data-pressed":(0,P.sE)($),"data-focus":(0,P.sE)(J),"data-focus-visible":(0,P.sE)(H),"data-disabled":(0,P.sE)(e.isDisabled),...(0,b.v)(e.isPressable?{...q,...K,role:"button"}:{},e.isHoverable?V:{},(0,k.$)(N,{enabled:j}),(0,k.$)(t))}},[D,Y,B,j,e.isPressable,e.isHoverable,e.isDisabled,F,$,H,q,K,V,N]),Z=(0,o.useCallback)(()=>({ripples:G,onClear:U}),[G,U]);return{context:X,domRef:D,Component:T,classNames:A,children:m,isHovered:F,isPressed:$,disableAnimation:R,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:L,handleClick:z,isFocusVisible:H,getCardProps:Q,getRippleProps:Z}}({...e,ref:t});return(0,u.jsxs)(c,{...m(),children:[(0,u.jsx)(p,{value:n,children:r}),d&&!h&&!f&&(0,u.jsx)(S.j,{...y()})]})});I.displayName="NextUI.Card";var C=I,A=r(3453),M=r(31121),N=(0,m.tv)({slots:{base:"group flex flex-col data-[hidden=true]:hidden",label:["absolute","z-10","pointer-events-none","origin-top-left","rtl:origin-top-right","subpixel-antialiased","block","text-small","text-foreground-500"],mainWrapper:"h-full",inputWrapper:"relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",innerWrapper:"inline-flex w-full items-center h-full box-border",input:["w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none","data-[has-start-content=true]:ps-1.5","data-[has-end-content=true]:pe-1.5","file:cursor-pointer file:bg-transparent file:border-0","autofill:bg-transparent bg-clip-text"],clearButton:["p-2","-m-2","z-10","hidden","absolute","end-3","start-auto","appearance-none","outline-none","select-none","opacity-0","hover:!opacity-100","cursor-pointer","active:!opacity-70","rounded-full",...y.zb],helperWrapper:"hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","data-[hover=true]:bg-default-200","group-data-[focus=true]:bg-default-100"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{inputWrapper:["border-medium","border-default-200","data-[hover=true]:border-default-400","group-data-[focus=true]:border-default-foreground"]},underlined:{inputWrapper:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","group-data-[focus=true]:after:w-full"],innerWrapper:"pb-1",label:"group-data-[filled-within=true]:text-foreground"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:"text-tiny",inputWrapper:"h-8 min-h-8 px-2 rounded-small",input:"text-small",clearButton:"text-medium"},md:{inputWrapper:"h-10 min-h-10 rounded-medium",input:"text-small",clearButton:"text-large"},lg:{inputWrapper:"h-12 min-h-12 rounded-large",input:"text-medium",clearButton:"text-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{mainWrapper:"flex flex-col"},"outside-left":{base:"flex-row items-center flex-nowrap data-[has-helper=true]:items-start",inputWrapper:"flex-1",mainWrapper:"flex flex-col",label:"relative text-foreground pe-2 ps-2 pointer-events-auto"},inside:{label:"text-tiny cursor-text",inputWrapper:"flex-col items-start justify-center gap-0",innerWrapper:"group-data-[has-label=true]:items-end"}},fullWidth:{true:{base:"w-full"}},isClearable:{true:{input:"peer pr-6 rtl:pr-0 rtl:pl-6",clearButton:"peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",input:"!placeholder:text-danger !text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5 rtl:after:ml-[unset] rtl:after:mr-0.5"}},isMultiline:{true:{label:"relative",inputWrapper:"!h-auto",innerWrapper:"items-start group-data-[has-label=true]:items-start",input:"resize-none data-[hide-scroll=true]:scrollbar-hide"}},disableAnimation:{true:{input:"transition-none",inputWrapper:"transition-none",label:"transition-none"},false:{inputWrapper:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","!duration-200","!ease-out","motion-reduce:transition-none","transition-[transform,color,left,opacity]"],clearButton:["transition-opacity","motion-reduce:transition-none"]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,labelPlacement:"inside",isDisabled:!1,isMultiline:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{inputWrapper:["bg-primary-50","data-[hover=true]:bg-primary-100","text-primary","group-data-[focus=true]:bg-primary-50","placeholder:text-primary"],input:"placeholder:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{inputWrapper:["bg-secondary-50","text-secondary","data-[hover=true]:bg-secondary-100","group-data-[focus=true]:bg-secondary-50","placeholder:text-secondary"],input:"placeholder:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{inputWrapper:["bg-success-50","text-success-600","dark:text-success","placeholder:text-success-600","dark:placeholder:text-success","data-[hover=true]:bg-success-100","group-data-[focus=true]:bg-success-50"],input:"placeholder:text-success-600 dark:placeholder:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{inputWrapper:["bg-warning-50","text-warning-600","dark:text-warning","placeholder:text-warning-600","dark:placeholder:text-warning","data-[hover=true]:bg-warning-100","group-data-[focus=true]:bg-warning-50"],input:"placeholder:text-warning-600 dark:placeholder:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{inputWrapper:["bg-danger-50","text-danger","dark:text-danger-500","placeholder:text-danger","dark:placeholder:text-danger-500","data-[hover=true]:bg-danger-100","group-data-[focus=true]:bg-danger-50"],input:"placeholder:text-danger dark:placeholder:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{label:"text-primary",inputWrapper:"data-[hover=true]:border-primary focus-within:border-primary"}},{variant:"faded",color:"secondary",class:{label:"text-secondary",inputWrapper:"data-[hover=true]:border-secondary focus-within:border-secondary"}},{variant:"faded",color:"success",class:{label:"text-success",inputWrapper:"data-[hover=true]:border-success focus-within:border-success"}},{variant:"faded",color:"warning",class:{label:"text-warning",inputWrapper:"data-[hover=true]:border-warning focus-within:border-warning"}},{variant:"faded",color:"danger",class:{label:"text-danger",inputWrapper:"data-[hover=true]:border-danger focus-within:border-danger"}},{variant:"underlined",color:"default",class:{input:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{inputWrapper:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{inputWrapper:"group-data-[focus=true]:border-primary",label:"text-primary"}},{variant:"bordered",color:"secondary",class:{inputWrapper:"group-data-[focus=true]:border-secondary",label:"text-secondary"}},{variant:"bordered",color:"success",class:{inputWrapper:"group-data-[focus=true]:border-success",label:"text-success"}},{variant:"bordered",color:"warning",class:{inputWrapper:"group-data-[focus=true]:border-warning",label:"text-warning"}},{variant:"bordered",color:"danger",class:{inputWrapper:"group-data-[focus=true]:border-danger",label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled-within=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled-within=true]:text-foreground"}},{radius:"full",size:["sm"],class:{inputWrapper:"px-3"}},{radius:"full",size:"md",class:{inputWrapper:"px-4"}},{radius:"full",size:"lg",class:{inputWrapper:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{inputWrapper:[...y.wA]}},{isInvalid:!0,variant:"flat",class:{inputWrapper:["!bg-danger-50","data-[hover=true]:!bg-danger-100","group-data-[focus=true]:!bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:"!border-danger group-data-[focus=true]:!border-danger"}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:"after:!bg-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{label:"text-small",inputWrapper:"h-16 py-2.5 gap-0"}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:"py-1"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled-within=true]:pointer-events-auto"]}},{labelPlacement:"outside",isMultiline:!1,class:{base:"relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled-within=true]:start-0"]}},{labelPlacement:["inside"],class:{label:["group-data-[filled-within=true]:scale-85"]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:"pb-0.5"}},{variant:"underlined",size:"sm",class:{innerWrapper:"pb-1"}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:"pb-1.5"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small"}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"lg",isMultiline:!1,class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:["start-2","text-tiny","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]"}},{labelPlacement:"outside",size:"md",isMultiline:!1,class:{label:["start-3","end-auto","text-small","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]"}},{labelPlacement:"outside",size:"lg",isMultiline:!1,class:{label:["start-3","end-auto","text-medium","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]"}},{labelPlacement:"outside-left",size:"sm",class:{label:"group-data-[has-helper=true]:pt-2"}},{labelPlacement:"outside-left",size:"md",class:{label:"group-data-[has-helper=true]:pt-3"}},{labelPlacement:"outside-left",size:"lg",class:{label:"group-data-[has-helper=true]:pt-4"}},{labelPlacement:["outside","outside-left"],isMultiline:!0,class:{inputWrapper:"py-2"}},{labelPlacement:"outside",isMultiline:!0,class:{label:"pb-1.5"}},{labelPlacement:"inside",isMultiline:!0,class:{label:"pb-0.5",input:"pt-0"}},{isMultiline:!0,disableAnimation:!1,class:{input:"transition-height !duration-100 motion-reduce:transition-none"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}},{isMultiline:!0,radius:"full",class:{inputWrapper:"data-[has-multiple-rows=true]:rounded-large"}}]}),D=r(80712),T=r(35824),j=(...e)=>{let t=" ";for(let r of e)if("string"==typeof r&&r.length>0){t=r;break}return t},R=r(17013),L={};function B(e,t,r){let[n,i]=(0,o.useState)(e||t),a=(0,o.useRef)(void 0!==e),s=void 0!==e;(0,o.useEffect)(()=>{let e=a.current;e!==s&&console.warn(`WARN: A component changed from ${e?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}.`),a.current=s},[s]);let l=s?e:n,c=(0,o.useCallback)((e,...t)=>{let n=(e,...t)=>{r&&!Object.is(l,e)&&r(e,...t),s||(l=e)};"function"==typeof e?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),i((r,...i)=>{let a=e(s?l:r,...i);return(n(a,...t),s)?r:a})):(s||i(e),n(e,...t))},[s,l,r]);return[l,c]}var W=r(67915),U=r(8225),G=r(15552),z=r(14026),q=r(82496),$=r(4624);function V(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function F(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function H(e){let t=null;return()=>(null==t&&(t=e()),t)}let J=H(function(){return F(/^Mac/i)}),K=H(function(){return F(/^iPhone/i)}),Y=H(function(){return F(/^iPad/i)||J()&&navigator.maxTouchPoints>1}),X=H(function(){return K()||Y()});H(function(){return J()||X()}),H(function(){return V(/AppleWebKit/i)&&!Q()});let Q=H(function(){return V(/Chrome/i)}),Z=H(function(){return V(/Android/i)});H(function(){return V(/Firefox/i)});let ee=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},et=e=>e&&"window"in e&&e.window===e?e:ee(e).defaultView||window,er=null,en=new Set,ei=new Map,ea=!1,es=!1;function eo(e,t){for(let r of en)r(e,t)}function el(e){ea=!0,e.metaKey||!J()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||eo("keyboard",e)}function ec(e){("mousedown"===e.type||"pointerdown"===e.type)&&(ea=!0,eo("pointer",e))}function eu(e){(0===e.mozInputSource&&e.isTrusted||(Z()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType))&&(ea=!0)}function ed(e){e.target!==window&&e.target!==document&&(ea||es||eo("virtual",e),ea=!1,es=!1)}function eh(){ea=!1,es=!0}function ep(e){if("undefined"==typeof window||ei.get(et(e)))return;let t=et(e),r=ee(e),n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ea=!0,n.apply(this,arguments)},r.addEventListener("keydown",el,!0),r.addEventListener("keyup",el,!0),r.addEventListener("click",eu,!0),t.addEventListener("focus",ed,!0),t.addEventListener("blur",eh,!1),"undefined"!=typeof PointerEvent?(r.addEventListener("pointerdown",ec,!0),r.addEventListener("pointermove",ec,!0),r.addEventListener("pointerup",ec,!0)):(r.addEventListener("mousedown",ec,!0),r.addEventListener("mousemove",ec,!0),r.addEventListener("mouseup",ec,!0)),t.addEventListener("beforeunload",()=>{ef(e)},{once:!0}),ei.set(t,{focus:n})}let ef=(e,t)=>{let r=et(e),n=ee(e);t&&n.removeEventListener("DOMContentLoaded",t),ei.has(r)&&(r.HTMLElement.prototype.focus=ei.get(r).focus,n.removeEventListener("keydown",el,!0),n.removeEventListener("keyup",el,!0),n.removeEventListener("click",eu,!0),r.removeEventListener("focus",ed,!0),r.removeEventListener("blur",eh,!1),"undefined"!=typeof PointerEvent?(n.removeEventListener("pointerdown",ec,!0),n.removeEventListener("pointermove",ec,!0),n.removeEventListener("pointerup",ec,!0)):(n.removeEventListener("mousedown",ec,!0),n.removeEventListener("mousemove",ec,!0),n.removeEventListener("mouseup",ec,!0)),ei.delete(r))};"undefined"!=typeof document&&function(e){let t;let r=ee(void 0);"loading"!==r.readyState?ep(void 0):(t=()=>{ep(void 0)},r.addEventListener("DOMContentLoaded",t)),()=>ef(e,t)}();var em=r(73698),ey=r(19474);let eg={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},ev={...eg,customError:!0,valid:!1},eb={isInvalid:!1,validationDetails:eg,validationErrors:[]},e_=(0,o.createContext)({}),ew="__formValidationState"+Date.now();function ex(e){return e?Array.isArray(e)?e:[e]:[]}function eE(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:ev}:null}function eP(e,t){return e===t||e&&t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((e,r)=>e===t.validationErrors[r])&&Object.entries(e.validationDetails).every(([e,r])=>t.validationDetails[e]===r)}var ek=e=>(0,u.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,u.jsx)("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})}),eO=(0,a.Rf)((e,t)=>{let{Component:r,label:n,description:c,isClearable:d,startContent:h,endContent:p,labelPlacement:f,hasHelper:m,isOutsideLeft:y,shouldLabelBeOutside:g,errorMessage:x,isInvalid:O,getBaseProps:S,getLabelProps:I,getInputProps:C,getInnerWrapperProps:A,getInputWrapperProps:V,getMainWrapperProps:F,getHelperWrapperProps:H,getDescriptionProps:J,getErrorMessageProps:K,getClearButtonProps:Y}=function(e){var t,r,n,c;let u=(0,i.o)(),[d,h]=(0,a.rE)(e,N.variantKeys),{ref:p,as:f,type:m,label:y,baseRef:g,wrapperRef:x,description:O,className:S,classNames:I,autoFocus:C,startContent:A,endContent:V,onClear:F,onChange:H,validationState:J,validationBehavior:K=null!=(t=null==u?void 0:u.validationBehavior)?t:"aria",innerWrapperRef:Y,onValueChange:X=()=>{},...Q}=d,Z=(0,o.useCallback)(e=>{X(null!=e?e:"")},[X]),[ee,et]=(0,o.useState)(!1),er=null!=(n=null!=(r=e.disableAnimation)?r:null==u?void 0:u.disableAnimation)&&n,en=(0,s.zD)(p),ei=(0,s.zD)(g),ea=(0,s.zD)(x),es=(0,s.zD)(Y),[el,ec]=B(d.value,null!=(c=d.defaultValue)?c:"",Z),eu=["date","time","month","week","range"].includes(m),ed=!(0,P.Im)(el)||eu,eh=ed||ee,ep="hidden"===m,ef=e.isMultiline,eg="file"===m,ek=(0,E.$)(null==I?void 0:I.base,S,ed?"is-filled":""),eO=(0,o.useCallback)(()=>{var e;ec(""),null==F||F(),null==(e=en.current)||e.focus()},[ec,F]);(0,M.U)(()=>{en.current&&ec(en.current.value)},[en.current]);let{labelProps:eS,inputProps:eI,isInvalid:eC,validationErrors:eA,validationDetails:eM,descriptionProps:eN,errorMessageProps:eD}=function(e,t){let r,n,{inputElementType:i="input",isDisabled:a=!1,isRequired:s=!1,isReadOnly:l=!1,type:c="text",validationBehavior:u="aria"}=e,[d,h]=B(e.value,e.defaultValue||"",e.onChange),{focusableProps:p}=(0,$.W)(e,t),f=function(e){if(e[ew]){let{realtimeValidation:t,displayValidation:r,updateValidation:n,resetValidation:i,commitValidation:a}=e[ew];return{realtimeValidation:t,displayValidation:r,updateValidation:n,resetValidation:i,commitValidation:a}}return function(e){let{isInvalid:t,validationState:r,name:n,value:i,builtinValidation:a,validate:s,validationBehavior:l="aria"}=e;r&&(t||(t="invalid"===r));let c=void 0!==t?{isInvalid:t,validationErrors:[],validationDetails:ev}:null,u=(0,o.useMemo)(()=>eE(function(e,t){if("function"==typeof e){let r=e(t);if(r&&"boolean"!=typeof r)return ex(r)}return[]}(s,i)),[s,i]);(null==a?void 0:a.validationDetails.valid)&&(a=null);let d=(0,o.useContext)(e_),h=(0,o.useMemo)(()=>n?Array.isArray(n)?n.flatMap(e=>ex(d[e])):ex(d[n]):[],[d,n]),[p,f]=(0,o.useState)(d),[m,y]=(0,o.useState)(!1);d!==p&&(f(d),y(!1));let g=(0,o.useMemo)(()=>eE(m?[]:h),[m,h]),v=(0,o.useRef)(eb),[b,_]=(0,o.useState)(eb),w=(0,o.useRef)(eb),[x,E]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!x)return;E(!1);let e=u||a||v.current;eP(e,w.current)||(w.current=e,_(e))}),{realtimeValidation:c||g||u||a||eb,displayValidation:"native"===l?c||g||b:c||g||u||a||b,updateValidation(e){"aria"!==l||eP(b,e)?v.current=e:_(e)},resetValidation(){eP(eb,w.current)||(w.current=eb,_(eb)),"native"===l&&E(!1),y(!0)},commitValidation(){"native"===l&&E(!0),y(!0)}}}(e)}({...e,value:d}),{isInvalid:m,validationErrors:y,validationDetails:g}=f.displayValidation,{labelProps:v,fieldProps:_,descriptionProps:w,errorMessageProps:x}=function(e){let{description:t,errorMessage:r,isInvalid:n,validationState:i}=e,{labelProps:a,fieldProps:s}=function(e){let{id:t,label:r,"aria-labelledby":n,"aria-label":i,labelElementType:a="label"}=e;t=(0,z.Bi)(t);let s=(0,z.Bi)(),o={};return r?(n=n?`${s} ${n}`:s,o={id:s,htmlFor:"label"===a?t:void 0}):n||i||console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility"),{labelProps:o,fieldProps:function(e,t){let{id:r,"aria-label":n,"aria-labelledby":i}=e;return r=(0,z.Bi)(r),i&&n?i=[...new Set([r,...i.trim().split(/\s+/)])].join(" "):i&&(i=i.trim().split(/\s+/).join(" ")),{id:r,"aria-label":n,"aria-labelledby":i}}({id:t,"aria-label":i,"aria-labelledby":n})}}(e),o=(0,z.X1)([!!t,!!r,n,i]),l=(0,z.X1)([!!t,!!r,n,i]);return{labelProps:a,fieldProps:s=(0,q.v)(s,{"aria-describedby":[o,l,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),descriptionProps:{id:o},errorMessageProps:{id:l}}}({...e,isInvalid:m,errorMessage:e.errorMessage||y}),E=(0,W.$)(e,{labelable:!0}),P={type:c,pattern:e.pattern};return r=(0,o.useRef)(d),n=(0,U.J)(()=>{h&&h(r.current)}),(0,o.useEffect)(()=>{var e;let r=null==t?void 0:null===(e=t.current)||void 0===e?void 0:e.form;return null==r||r.addEventListener("reset",n),()=>{null==r||r.removeEventListener("reset",n)}},[t,n]),!function(e,t,r){let{validationBehavior:n,focus:i}=e;(0,em.N)(()=>{if("native"===n&&(null==r?void 0:r.current)){var e;let n,i=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";r.current.setCustomValidity(i),r.current.hasAttribute("title")||(r.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation({isInvalid:!(e=r.current).validity.valid,validationDetails:{badInput:(n=e.validity).badInput,customError:n.customError,patternMismatch:n.patternMismatch,rangeOverflow:n.rangeOverflow,rangeUnderflow:n.rangeUnderflow,stepMismatch:n.stepMismatch,tooLong:n.tooLong,tooShort:n.tooShort,typeMismatch:n.typeMismatch,valueMissing:n.valueMissing,valid:n.valid},validationErrors:e.validationMessage?[e.validationMessage]:[]})}});let a=(0,ey.J)(()=>{t.resetValidation()}),s=(0,ey.J)(e=>{var n,a;t.displayValidation.isInvalid||t.commitValidation();let s=null==r?void 0:null===(n=r.current)||void 0===n?void 0:n.form;!e.defaultPrevented&&r&&s&&function(e){for(let t=0;t<e.elements.length;t++){let r=e.elements[t];if(!r.validity.valid)return r}return null}(s)===r.current&&(i?i():null===(a=r.current)||void 0===a||a.focus(),eo("keyboard",null)),e.preventDefault()}),l=(0,ey.J)(()=>{t.commitValidation()});(0,o.useEffect)(()=>{let e=null==r?void 0:r.current;if(!e)return;let t=e.form;return e.addEventListener("invalid",s),e.addEventListener("change",l),null==t||t.addEventListener("reset",a),()=>{e.removeEventListener("invalid",s),e.removeEventListener("change",l),null==t||t.removeEventListener("reset",a)}},[r,s,l,a,n])}(e,f,t),(0,o.useEffect)(()=>{if(t.current instanceof(0,G.m)(t.current).HTMLTextAreaElement){let e=t.current;Object.defineProperty(e,"defaultValue",{get:()=>e.value,set:()=>{},configurable:!0})}},[t]),{labelProps:v,inputProps:(0,b.v)(E,"input"===i&&P,{disabled:a,readOnly:l,required:s&&"native"===u,"aria-required":s&&"aria"===u||void 0,"aria-invalid":m||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],value:d,onChange:e=>h(e.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...p,..._}),descriptionProps:w,errorMessageProps:x,isInvalid:m,validationErrors:y,validationDetails:g}}({...e,validationBehavior:K,autoCapitalize:e.autoCapitalize,value:el,"aria-label":j(e["aria-label"],e.label,e.placeholder),inputElementType:ef?"textarea":"input",onChange:ec},en);eg&&(delete eI.value,delete eI.onChange);let{isFocusVisible:eT,isFocused:ej,focusProps:eR}=(0,_.o)({autoFocus:C,isTextInput:!0}),{isHovered:eL,hoverProps:eB}=(0,w.M)({isDisabled:!!(null==e?void 0:e.isDisabled)}),{isHovered:eW,hoverProps:eU}=(0,w.M)({isDisabled:!!(null==e?void 0:e.isDisabled)}),{focusProps:eG,isFocusVisible:ez}=(0,_.o)(),{focusWithinProps:eq}=(0,D.R)({onFocusWithinChange:et}),{pressProps:e$}=(0,T.d)({isDisabled:!!(null==e?void 0:e.isDisabled)||!!(null==e?void 0:e.isReadOnly),onPress:eO}),eV="invalid"===J||e.isInvalid||eC,eF=(0,o.useMemo)(()=>{var t;if(eg){if(!e.labelPlacement)return"outside";if("inside"===e.labelPlacement)return!function(e,t,...r){var n;let i=`[Next UI] : ${e}`;"undefined"==typeof console||L[i]||(L[i]=!0,(null==(n=null==R?void 0:R.env)?void 0:n.NODE_ENV)==="production")||console.warn(i,r)}("Input with file type doesn't support inside label. Converting to outside ..."),"outside"}return e.labelPlacement&&"inside"!==e.labelPlacement||y?null!=(t=e.labelPlacement)?t:"inside":"outside"},[e.labelPlacement,y]),eH="function"==typeof d.errorMessage?d.errorMessage({isInvalid:eV,validationErrors:eA,validationDetails:eM}):d.errorMessage||(null==eA?void 0:eA.join(" ")),eJ=!!F||e.isClearable,eK=!!y||!!O||!!eH,eY=!!d.placeholder,eX=!!y,eQ=!!O||!!eH,eZ="outside"===eF||"outside-left"===eF,e0="inside"===eF,e1=!!en.current&&(!en.current.value||""===en.current.value||!el||""===el)&&eY,e2="outside-left"===eF,e3=!!A,e5=!!eZ&&("outside-left"===eF||eY||"outside"===eF&&e3),e4="outside"===eF&&!eY&&!e3,e6=(0,o.useMemo)(()=>N({...h,isInvalid:eV,labelPlacement:eF,isClearable:eJ,disableAnimation:er}),[(0,l.t6)(h),eV,eF,eJ,e3,er]),e8=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:ei,className:e6.base({class:ek}),"data-slot":"base","data-filled":(0,P.sE)(ed||eY||e3||e1||eg),"data-filled-within":(0,P.sE)(eh||eY||e3||e1||eg),"data-focus-within":(0,P.sE)(ee),"data-focus-visible":(0,P.sE)(eT),"data-readonly":(0,P.sE)(e.isReadOnly),"data-focus":(0,P.sE)(ej),"data-hover":(0,P.sE)(eL||eW),"data-required":(0,P.sE)(e.isRequired),"data-invalid":(0,P.sE)(eV),"data-disabled":(0,P.sE)(e.isDisabled),"data-has-elements":(0,P.sE)(eK),"data-has-helper":(0,P.sE)(eQ),"data-has-label":(0,P.sE)(eX),"data-has-value":(0,P.sE)(!e1),"data-hidden":(0,P.sE)(ep),...eq,...t}},[e6,ek,ed,ej,eL,eW,eV,eQ,eX,eK,e1,e3,ee,eT,eh,eY,eq,ep,e.isReadOnly,e.isRequired,e.isDisabled]),e7=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-slot":"label",className:e6.label({class:null==I?void 0:I.label}),...(0,b.v)(eS,eU,e)}},[e6,eW,eS,null==I?void 0:I.label]),e9=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:en,"data-slot":"input","data-filled":(0,P.sE)(ed),"data-filled-within":(0,P.sE)(eh),"data-has-start-content":(0,P.sE)(e3),"data-has-end-content":(0,P.sE)(!!V),className:e6.input({class:(0,E.$)(null==I?void 0:I.input,ed?"is-filled":"")}),...(0,b.v)(eR,eI,(0,k.$)(Q,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(eI))}),t),"aria-readonly":(0,P.sE)(e.isReadOnly),onChange:(0,v.c)(eI.onChange,H)}},[e6,el,eR,eI,Q,ed,eh,e3,V,null==I?void 0:I.input,e.isReadOnly,e.isRequired,H]),te=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:ea,"data-slot":"input-wrapper","data-hover":(0,P.sE)(eL||eW),"data-focus-visible":(0,P.sE)(eT),"data-focus":(0,P.sE)(ej),className:e6.inputWrapper({class:(0,E.$)(null==I?void 0:I.inputWrapper,ed?"is-filled":"")}),...(0,b.v)(e,eB),onClick:e=>{en.current&&e.currentTarget===e.target&&en.current.focus()},style:{cursor:"text",...e.style}}},[e6,eL,eW,eT,ej,el,null==I?void 0:I.inputWrapper]),tt=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,ref:es,"data-slot":"inner-wrapper",onClick:e=>{en.current&&e.currentTarget===e.target&&en.current.focus()},className:e6.innerWrapper({class:(0,E.$)(null==I?void 0:I.innerWrapper,null==e?void 0:e.className)})}},[e6,null==I?void 0:I.innerWrapper]),tr=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,"data-slot":"main-wrapper",className:e6.mainWrapper({class:(0,E.$)(null==I?void 0:I.mainWrapper,null==e?void 0:e.className)})}},[e6,null==I?void 0:I.mainWrapper]),tn=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,"data-slot":"helper-wrapper",className:e6.helperWrapper({class:(0,E.$)(null==I?void 0:I.helperWrapper,null==e?void 0:e.className)})}},[e6,null==I?void 0:I.helperWrapper]),ti=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,...eN,"data-slot":"description",className:e6.description({class:(0,E.$)(null==I?void 0:I.description,null==e?void 0:e.className)})}},[e6,null==I?void 0:I.description]),ta=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,...eD,"data-slot":"error-message",className:e6.errorMessage({class:(0,E.$)(null==I?void 0:I.errorMessage,null==e?void 0:e.className)})}},[e6,eD,null==I?void 0:I.errorMessage]),ts=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,role:"button",tabIndex:0,"aria-label":"clear input","data-slot":"clear-button","data-focus-visible":(0,P.sE)(ez),className:e6.clearButton({class:(0,E.$)(null==I?void 0:I.clearButton,null==e?void 0:e.className)}),...(0,b.v)(e$,eG)}},[e6,ez,e$,eG,null==I?void 0:I.clearButton]);return{Component:f||"div",classNames:I,domRef:en,label:y,description:O,startContent:A,endContent:V,labelPlacement:eF,isClearable:eJ,hasHelper:eQ,hasStartContent:e3,isLabelOutside:e5,isOutsideLeft:e2,isLabelOutsideAsPlaceholder:e4,shouldLabelBeOutside:eZ,shouldLabelBeInside:e0,hasPlaceholder:eY,isInvalid:eV,errorMessage:eH,getBaseProps:e8,getLabelProps:e7,getInputProps:e9,getMainWrapperProps:tr,getInputWrapperProps:te,getInnerWrapperProps:tt,getHelperWrapperProps:tn,getDescriptionProps:ti,getErrorMessageProps:ta,getClearButtonProps:ts}}({...e,ref:t}),X=n?(0,u.jsx)("label",{...I(),children:n}):null,Q=(0,o.useMemo)(()=>d?(0,u.jsx)("span",{...Y(),children:p||(0,u.jsx)(ek,{})}):p,[d,Y]),Z=(0,o.useMemo)(()=>m?(0,u.jsx)("div",{...H(),children:O&&x?(0,u.jsx)("div",{...K(),children:x}):c?(0,u.jsx)("div",{...J(),children:c}):null}):null,[m,O,x,c,H,K,J]),ee=(0,o.useMemo)(()=>(0,u.jsxs)("div",{...A(),children:[h,(0,u.jsx)("input",{...C()}),Q]}),[h,Q,C,A]),et=(0,o.useMemo)(()=>g?(0,u.jsxs)("div",{...F(),children:[(0,u.jsxs)("div",{...V(),children:[y?null:X,ee]}),Z]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{...V(),children:[X,ee]}),Z]}),[f,Z,g,X,ee,x,c,F,V,K,J]);return(0,u.jsxs)(r,{...S(),children:[y?X:null,et]})});eO.displayName="NextUI.Input";var eS=eO},82872:(e,t,r)=>{"use strict";r.d(t,{b:()=>p});var n=r(57932),i=r(46889),a=r(32287),s=r(3276);r(80893);let o=s.createContext(null);function l(e){let{children:t}=e,r=(0,s.useContext)(o),[n,i]=(0,s.useState)(0),a=(0,s.useMemo)(()=>({parent:r,modalCount:n,addModal(){i(e=>e+1),r&&r.addModal()},removeModal(){i(e=>e-1),r&&r.removeModal()}}),[r,n]);return s.createElement(o.Provider,{value:a},t)}function c(e){let t;let{modalProviderProps:r}={modalProviderProps:{"aria-hidden":!!(t=(0,s.useContext)(o))&&t.modalCount>0||null}};return s.createElement("div",{"data-overlay-container":!0,...e,...r})}function u(e){return s.createElement(l,null,s.createElement(c,e))}var d=r(48189),h=r(68320),p=e=>{let{children:t,navigate:r,useHref:o,disableAnimation:l=!1,disableRipple:c=!1,skipFramerMotionAnimations:p=l,validationBehavior:f="aria",locale:m="en-US",defaultDates:y,createCalendar:g,...v}=e,b=t;r&&(b=(0,h.jsx)(a.pg,{navigate:r,useHref:o,children:b}));let _=(0,s.useMemo)(()=>(l&&p&&(d.W.skipAnimations=!0),{createCalendar:g,defaultDates:y,disableAnimation:l,disableRipple:c,validationBehavior:f}),[g,null==y?void 0:y.maxDate,null==y?void 0:y.minDate,l,c,f]);return(0,h.jsx)(n.n,{value:_,children:(0,h.jsx)(i.C,{locale:m,children:(0,h.jsx)(u,{...v,children:b})})})}}}]);