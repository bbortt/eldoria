(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{95705:(e,t,r)=>{"use strict";r.d(t,{R:()=>o,a:()=>i});class n{constructor(e){let t=function(){let e=0xefc8249d;return function(t){let r=t.toString();for(let t=0;t<r.length;t++){let n=.02519603282416938*(e+=r.charCodeAt(t));e=n>>>0,n-=e,n*=e,e=n>>>0,n-=e,e+=0x100000000*n}return(e>>>0)*23283064365386963e-26}}();this.c=1,this.s0=t(" "),this.s1=t(" "),this.s2=t(" "),this.s0-=t(e),this.s0<0&&(this.s0+=1),this.s1-=t(e),this.s1<0&&(this.s1+=1),this.s2-=t(e),this.s2<0&&(this.s2+=1)}next(){let e=2091639*this.s0+23283064365386963e-26*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=Math.trunc(e))}}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){let r=new n(e),i=r.next.bind(r);return t&&a(t,r),i.state=()=>a(r,{}),i}class s{constructor(e){this.state=e||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;let e=this.state,t=i(e.prngstate?"":e.seed,e.prngstate),r=t();return this.state={...e,prngstate:t.state()},r}api(){let e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(let n in t){let a=t[n];r[n]=t=>void 0===t?Math.floor(e()*a)+1:Array.from({length:t}).map(()=>Math.floor(e()*a)+1)}return{...r,Die:function(t=6,r){return void 0===r?Math.floor(e()*t)+1:Array.from({length:r}).map(()=>Math.floor(e()*t)+1)},Number:()=>e(),Shuffle:t=>{let r=[...t],n=t.length,a=0,i=Array.from({length:n});for(;n;){let t=Math.trunc(n*e());i[a++]=r[t],r[t]=r[--n]}return i},_private:this}}}let o={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new s(e).api(),setup:({game:e})=>{let{seed:t}=e;return void 0===t&&(t=s.seed()),{seed:t}},playerView:()=>void 0}},8340:(e,t,r)=>{"use strict";let n,a;r.d(t,{K:()=>tT});var i,s,o,l,u,c={};r.r(c),r.d(c,{Decoder:()=>tb,Encoder:()=>tg,PacketType:()=>l,protocol:()=>ty}),r(84126);var d=r(40674);let h=(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){!function(e,t,r){var n;(n=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==p(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var g="function"==typeof Symbol&&Symbol.observable||"@@observable",v=function(){return Math.random().toString(36).substring(7).split("").join(".")},b={INIT:"@@redux/INIT"+v(),REPLACE:"@@redux/REPLACE"+v(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+v()}};function x(e,t,r){if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw Error(y(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw Error(y(1));return r(x)(e,t)}if("function"!=typeof e)throw Error(y(2));var n,a=e,i=t,s=[],o=s,l=!1;function u(){o===s&&(o=s.slice())}function c(){if(l)throw Error(y(3));return i}function d(e){if("function"!=typeof e)throw Error(y(4));if(l)throw Error(y(5));var t=!0;return u(),o.push(e),function(){if(t){if(l)throw Error(y(6));t=!1,u();var r=o.indexOf(e);o.splice(r,1),s=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(y(7));if(void 0===e.type)throw Error(y(8));if(l)throw Error(y(9));try{l=!0,i=a(i,e)}finally{l=!1}for(var t=s=o,r=0;r<t.length;r++)(0,t[r])();return e}return h({type:b.INIT}),(n={dispatch:h,subscribe:d,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw Error(y(10));a=e,h({type:b.REPLACE})}})[g]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(y(11));function t(){e.next&&e.next(c())}return t(),{unsubscribe:d(t)}}})[g]=function(){return this},e},n}function w(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function _(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw Error(y(15))},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map(function(e){return e(a)});return n=w.apply(void 0,i)(r.dispatch),m(m({},r),{},{dispatch:n})}}}var E=r(67509);function k(e){if(void 0!==e.processMove)return e;if(void 0===e.name&&(e.name="default"),void 0===e.deltaState&&(e.deltaState=!1),void 0===e.disableUndo&&(e.disableUndo=!1),void 0===e.setup&&(e.setup=()=>({})),void 0===e.moves&&(e.moves={}),void 0===e.playerView&&(e.playerView=({G:e})=>e),void 0===e.plugins&&(e.plugins=[]),e.plugins.forEach(e=>{if(void 0===e.name)throw Error("Plugin missing name attribute");if(e.name.includes(" "))throw Error(e.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw Error(e.name+": Game name must not include spaces");let t=function({moves:e,phases:t,endIf:r,onEnd:n,turn:a,events:i,plugins:s}){void 0===e&&(e={}),void 0===i&&(i={}),void 0===s&&(s=[]),void 0===t&&(t={}),r||(r=()=>void 0),n||(n=({G:e})=>e),a||(a={});let o={...t};""in o&&(0,E.e)("cannot specify phase with empty name"),o[""]={};let l={},u=new Set,c=null;Object.keys(e).forEach(e=>u.add(e));let d=(e,t)=>{let r=(0,E.F)(e,t,s);return e=>r({...(0,E.a)(e),G:e.G,ctx:e.ctx,playerID:e.playerID})},h=e=>t=>e({...(0,E.a)(t),G:t.G,ctx:t.ctx}),p={onEnd:d(n,E.G.GAME_ON_END),endIf:h(r)};for(let e in o){let t=o[e];if(!0===t.start&&(c=e),void 0!==t.moves)for(let r of Object.keys(t.moves))l[e+"."+r]=t.moves[r],u.add(r);for(let r in void 0===t.endIf&&(t.endIf=()=>void 0),void 0===t.onBegin&&(t.onBegin=({G:e})=>e),void 0===t.onEnd&&(t.onEnd=({G:e})=>e),void 0===t.turn&&(t.turn=a),void 0===t.turn.order&&(t.turn.order=E.T.DEFAULT),void 0===t.turn.onBegin&&(t.turn.onBegin=({G:e})=>e),void 0===t.turn.onEnd&&(t.turn.onEnd=({G:e})=>e),void 0===t.turn.endIf&&(t.turn.endIf=()=>!1),void 0===t.turn.onMove&&(t.turn.onMove=({G:e})=>e),void 0===t.turn.stages&&(t.turn.stages={}),(0,E.b)(t.turn,!0),t.turn.stages){let n=t.turn.stages[r].moves||{};for(let t of Object.keys(n))l[e+"."+r+"."+t]=n[t],u.add(t)}if(t.wrapped={onBegin:d(t.onBegin,E.G.PHASE_ON_BEGIN),onEnd:d(t.onEnd,E.G.PHASE_ON_END),endIf:h(t.endIf)},t.turn.wrapped={onMove:d(t.turn.onMove,E.G.TURN_ON_MOVE),onBegin:d(t.turn.onBegin,E.G.TURN_ON_BEGIN),onEnd:d(t.turn.onEnd,E.G.TURN_ON_END),endIf:h(t.turn.endIf)},"function"!=typeof t.next){let{next:e}=t;t.next=()=>e||null}t.wrapped.next=h(t.next)}function f(e){return e.phase?o[e.phase]:o[""]}function m(e){return e}function y(e,t){let r=new Set,n=new Set;for(let s=0;s<t.length;s++){var a,i;let{fn:o,arg:l,...u}=t[s];if(o===S){n.clear();let t=e.ctx.phase;if(r.has(t)){let t={...e.ctx,phase:null};return{...e,ctx:t}}r.add(t)}let c=[];if(e=o(e,{...u,arg:l,next:c}),o===P)break;let d=(a=e,p.endIf(a));if(d){t.push({fn:P,arg:d,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}let h=f((i=e).ctx).wrapped.endIf(i);if(h){t.push({fn:S,arg:h,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}if([m,_,k].includes(o)){let r=function(e){let t=f(e.ctx),r=e.ctx.numMoves||0;return!!t.turn.maxMoves&&r>=t.turn.maxMoves||t.turn.wrapped.endIf(e)}(e);if(r){t.push({fn:O,arg:r,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}}t.push(...c)}return e}function g(e,{next:t}){return t.push({fn:v}),e}function v(e,{next:t}){let{G:r,ctx:n}=e;return r=f(n).wrapped.onBegin(e),t.push({fn:b}),{...e,G:r,ctx:n}}function b(e,{currentPlayer:t}){let{ctx:r}=e,n=f(r);t?(r={...r,currentPlayer:t},n.turn.activePlayers&&(r=(0,E.c)(r,n.turn.activePlayers))):r=(0,E.I)(e,n.turn);let a=r.turn+1;r={...r,turn:a,numMoves:0,_prevActivePlayers:[]};let i=n.turn.wrapped.onBegin({...e,ctx:r});return{...e,G:i,ctx:r,_undo:[],_redo:[]}}function x(e,{arg:t,next:r,phase:n}){let a=f({phase:n}),{ctx:i}=e;if(t&&t.next){if(!(t.next in o))return(0,E.e)("invalid phase: "+t.next),e;i={...i,phase:t.next}}else i={...i,phase:a.wrapped.next(e)||null};return e={...e,ctx:i},r.push({fn:v}),e}function w(e,{arg:t,currentPlayer:r,next:n}){let{G:a,ctx:i}=e,s=f(i),{endPhase:o,ctx:l}=(0,E.U)(e,r,s.turn,t);return i=l,e={...e,G:a,ctx:i},o?n.push({fn:S,turn:i.turn,phase:i.phase}):n.push({fn:b,currentPlayer:i.currentPlayer}),e}function _(e,{arg:t,playerID:r}){if(("string"==typeof t||t===E.S.NULL)&&(t={stage:t}),"object"!=typeof t)return e;(0,E.b)(t);let{ctx:n}=e,{activePlayers:a,_activePlayersMinMoves:i,_activePlayersMaxMoves:s,_activePlayersNumMoves:o}=n;return void 0!==t.stage&&(null===a&&(a={}),a[r]=t.stage,o[r]=0,t.minMoves&&(null===i&&(i={}),i[r]=t.minMoves),t.maxMoves&&(null===s&&(s={}),s[r]=t.maxMoves)),n={...n,activePlayers:a,_activePlayersMinMoves:i,_activePlayersMaxMoves:s,_activePlayersNumMoves:o},{...e,ctx:n}}function k(e,{arg:t}){return{...e,ctx:(0,E.c)(e.ctx,t)}}function P(e,{arg:t,phase:r}){e=S(e,{phase:r}),void 0===t&&(t=!0),e={...e,ctx:{...e.ctx,gameover:t}};let n=p.onEnd(e);return{...e,G:n}}function S(e,{arg:t,next:r,turn:n,automatic:a}){let{phase:i,turn:s}=(e=O(e,{turn:n,force:!0,automatic:!0})).ctx;if(r&&r.push({fn:x,arg:t,phase:i}),null===i)return e;let o=f(e.ctx).wrapped.onEnd(e),l={...e.ctx,phase:null},u=(0,E.g)("endPhase",t),{_stateID:c}=e,d={action:u,_stateID:c,turn:s,phase:i};a&&(d.automatic=!0);let h=[...e.deltalog||[],d];return{...e,G:o,ctx:l,deltalog:h}}function O(e,{arg:t,next:r,turn:n,force:a,automatic:i,playerID:s}){if(n!==e.ctx.turn)return e;let{currentPlayer:o,numMoves:l,phase:u,turn:c}=e.ctx,d=f(e.ctx);if(!a&&d.turn.minMoves&&(l||0)<d.turn.minMoves)return(0,E.i)(`cannot end turn before making ${d.turn.minMoves} moves`),e;let h=d.turn.wrapped.onEnd(e);r&&r.push({fn:w,arg:t,currentPlayer:o});let p={...e.ctx,activePlayers:null};if(t&&t.remove){s=s||o;let t=p.playOrder.filter(e=>e!=s),n=p.playOrderPos>t.length-1?0:p.playOrderPos;if(p={...p,playOrder:t,playOrderPos:n},0===t.length)return r.push({fn:S,turn:c,phase:u}),e}let m=(0,E.g)("endTurn",t),{_stateID:y}=e,g={action:m,_stateID:y,turn:c,phase:u};i&&(g.automatic=!0);let v=[...e.deltalog||[],g];return{...e,G:h,ctx:p,deltalog:v,_undo:[],_redo:[]}}function I(e,{arg:t,next:r,automatic:n,playerID:a}){a=a||e.ctx.currentPlayer;let{ctx:i,_stateID:s}=e,{activePlayers:o,_activePlayersNumMoves:l,_activePlayersMinMoves:u,_activePlayersMaxMoves:c,phase:d,turn:h}=i,p=null!==o&&a in o,m=f(i);if(!t&&p){let e=m.turn.stages[o[a]];e&&e.next&&(t=e.next)}if(r&&r.push({fn:_,arg:t,playerID:a}),!p)return e;let y=l[a]||0;if(u&&u[a]&&y<u[a])return(0,E.i)(`cannot end stage before making ${u[a]} moves`),e;o={...o},delete o[a],u&&(u={...u},delete u[a]),c&&(c={...c},delete c[a]),i=(0,E.d)({...i,activePlayers:o,_activePlayersMinMoves:u,_activePlayersMaxMoves:c});let g={action:(0,E.g)("endStage",t),_stateID:s,turn:h,phase:d};n&&(g.automatic=!0);let v=[...e.deltalog||[],g];return{...e,ctx:i,deltalog:v}}function C(t,r,n){let a=f(t),i=a.turn.stages,{activePlayers:s}=t;if(s&&void 0!==s[n]&&s[n]!==E.S.NULL&&void 0!==i[s[n]]&&void 0!==i[s[n]].moves){let e=i[s[n]].moves;if(r in e)return e[r]}else if(a.moves){if(r in a.moves)return a.moves[r]}else if(r in e)return e[r];return null}let D={endStage:function(e,t){return y(e,[{fn:I,playerID:t}])},setStage:function(e,t,r){return y(e,[{fn:I,arg:r,playerID:t}])},endTurn:function(e,t,r){return y(e,[{fn:O,turn:e.ctx.turn,phase:e.ctx.phase,arg:r}])},pass:function(e,t,r){return y(e,[{fn:O,turn:e.ctx.turn,phase:e.ctx.phase,force:!0,arg:r}])},endPhase:function(e){return y(e,[{fn:S,phase:e.ctx.phase,turn:e.ctx.turn}])},setPhase:function(e,t,r){return y(e,[{fn:S,phase:e.ctx.phase,turn:e.ctx.turn,arg:{next:r}}])},endGame:function(e,t,r){return y(e,[{fn:P,turn:e.ctx.turn,phase:e.ctx.phase,arg:r}])},setActivePlayers:function(e,t,r){return y(e,[{fn:k,arg:r}])}},N=[];return!1!==i.endTurn&&N.push("endTurn"),!1!==i.pass&&N.push("pass"),!1!==i.endPhase&&N.push("endPhase"),!1!==i.setPhase&&N.push("setPhase"),!1!==i.endGame&&N.push("endGame"),!1!==i.setActivePlayers&&N.push("setActivePlayers"),!1!==i.endStage&&N.push("endStage"),!1!==i.setStage&&N.push("setStage"),{ctx:e=>({numPlayers:e,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:e})].map((e,t)=>t+""),playOrderPos:0,phase:c,activePlayers:null}),init:e=>y(e,[{fn:g}]),isPlayerActive:function(e,t,r){return t.activePlayers?r in t.activePlayers:t.currentPlayer===r},eventHandlers:D,eventNames:Object.keys(D),enabledEventNames:N,moveMap:l,moveNames:[...u.values()],processMove:function(e,t){let{playerID:r,type:n}=t,{currentPlayer:a,activePlayers:i,_activePlayersMaxMoves:s}=e.ctx,o=C(e.ctx,n,r),l=!o||"function"==typeof o||!0!==o.noLimit,{numMoves:u,_activePlayersNumMoves:c}=e.ctx;l&&(r===a&&u++,i&&c[r]++),e={...e,ctx:{...e.ctx,numMoves:u,_activePlayersNumMoves:c}},s&&c[r]>=s[r]&&(e=I(e,{playerID:r,automatic:!0}));let d=f(e.ctx).turn.wrapped.onMove({...e,playerID:r});return y(e={...e,G:d},[{fn:m}])},processEvent:function(e,t){let{type:r,playerID:n,args:a}=t.payload;return"function"!=typeof D[r]?e:D[r](e,n,...Array.isArray(a)?a:[a])},getMove:C}}(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(e=>e.name),processMove:(r,n)=>{let a=t.getMove(r.ctx,n.type,n.playerID);if(P(a)&&(a=a.move),a instanceof Function){let t=(0,E.F)(a,E.G.MOVE,e.plugins),i=[];return void 0!==n.args&&(i=Array.isArray(n.args)?n.args:[n.args]),t({...(0,E.a)(r),G:r.G,ctx:r.ctx,playerID:n.playerID},...i)}return(0,E.e)(`invalid move object: ${n.type}`),r.G}}}function P(e){return e instanceof Object&&void 0!==e.move}!function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"}(i||(i={})),function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"}(s||(s={}));let S=e=>null!==e.payload.playerID&&void 0!==e.payload.playerID,O=(e,t,r)=>void 0===r.undoable||(r.undoable instanceof Function?r.undoable({G:e,ctx:t}):r.undoable);function I(e,t){if(t.game.disableUndo)return e;let r={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return"MAKE_MOVE"===t.action.type&&(r.moveType=t.action.payload.type),{...e,_undo:[...e._undo,r],_redo:[]}}function C(e,t,r){let n={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},a=e.plugins.log.data.metadata;return void 0!==a&&(n.metadata=a),"object"==typeof r&&!0===r.redact?n.redact=!0:"object"==typeof r&&r.redact instanceof Function&&(n.redact=r.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[n]}}function D(e,t,r){let[n,a]=(0,E.q)(e,r);return a?[n,M(t,s.PluginActionInvalid,a)]:[n]}function N(e){if(!e)return[null,void 0];let{transients:t,...r}=e;return[r,t]}function M(e,t,r){return{...e,transients:{error:{type:t,payload:r}}}}let A=e=>t=>r=>{let n=t(r);if(r.type===E.p)return n;{let[,t]=N(e.getState());return void 0!==t?(e.dispatch((0,E.r)()),{...n,transients:t}):n}};function R({game:e,isClient:t}){return e=k(e),(r=null,n)=>{let[a]=N(r);switch(n.type){case E.p:return a;case E.o:{let r;if(a={...a,deltalog:[]},t)return a;if(void 0!==a.ctx.gameover)return(0,E.e)("cannot call event after game end"),M(a,s.GameOver);if(S(n)&&!e.flow.isPlayerActive(a.G,a.ctx,n.payload.playerID))return(0,E.e)(`disallowed event: ${n.payload.type}`),M(a,s.InactivePlayer);a=(0,E.E)(a,{game:e,isClient:!1,playerID:n.payload.playerID});let i=e.flow.processEvent(a,n);if([i,r]=D(i,a,{game:e,isClient:!1}),r)return r;return{...i=I(i,{game:e,action:n}),_stateID:a._stateID+1}}case E.M:{let r;let i=a={...a,deltalog:[]},o=e.flow.getMove(a.ctx,n.payload.type,n.payload.playerID||a.ctx.currentPlayer);if(null===o)return(0,E.e)(`disallowed move: ${n.payload.type}`),M(a,s.UnavailableMove);if(t&&!1===o.client)return a;if(void 0!==a.ctx.gameover)return(0,E.e)("cannot make move after game end"),M(a,s.GameOver);if(S(n)&&!e.flow.isPlayerActive(a.G,a.ctx,n.payload.playerID))return(0,E.e)(`disallowed move: ${n.payload.type}`),M(a,s.InactivePlayer);a=(0,E.E)(a,{game:e,isClient:t,playerID:n.payload.playerID});let l=e.processMove(a,n.payload);if(l===E.n)return(0,E.e)(`invalid move: ${n.payload.type} args: ${n.payload.args}`),M(a,s.InvalidMove);let u={...a,G:l};if(t&&(0,E.N)(u,{game:e}))return a;if(a=u,t){let t;if([a,t]=D(a,i,{game:e,isClient:!0}),t)return t;return{...a,_stateID:a._stateID+1}}if(a=C(a,n,o),a=e.flow.processMove(a,n.payload),[a,r]=D(a,i,{game:e}),r)return r;return{...a=I(a,{game:e,action:n}),_stateID:a._stateID+1}}case E.m:case E.l:case E.k:return n.state;case E.j:{if(a={...a,deltalog:[]},e.disableUndo)return(0,E.e)("Undo is not enabled"),M(a,s.ActionDisabled);let{G:t,ctx:r,_undo:i,_redo:o,_stateID:l}=a;if(i.length<2)return(0,E.e)("No moves to undo"),M(a,s.ActionInvalid);let u=i[i.length-1],c=i[i.length-2];if(S(n)&&n.payload.playerID!==u.playerID)return(0,E.e)("Cannot undo other players' moves"),M(a,s.ActionInvalid);if(u.moveType&&!O(t,r,e.flow.getMove(c.ctx,u.moveType,u.playerID)))return(0,E.e)("Move cannot be undone"),M(a,s.ActionInvalid);return{...a=C(a,n),G:c.G,ctx:c.ctx,plugins:c.plugins,_stateID:l+1,_undo:i.slice(0,-1),_redo:[u,...o]}}case E.R:{if(a={...a,deltalog:[]},e.disableUndo)return(0,E.e)("Redo is not enabled"),M(a,s.ActionDisabled);let{_undo:t,_redo:r,_stateID:i}=a;if(0===r.length)return(0,E.e)("No moves to redo"),M(a,s.ActionInvalid);let o=r[0];if(S(n)&&n.payload.playerID!==o.playerID)return(0,E.e)("Cannot redo other players' moves"),M(a,s.ActionInvalid);return{...a=C(a,n),G:o.G,ctx:o.ctx,plugins:o.plugins,_stateID:i+1,_undo:[...t,o],_redo:r.slice(1)}}case E.f:return(0,E.h)(a,n,{game:e});case E.P:{let e=a,t=JSON.parse(JSON.stringify(e)),r=(0,d.X6)(t,n.patch);if(r.some(e=>null!==e))return(0,E.e)(`Patch ${JSON.stringify(n.patch)} apply failed`),M(e,i.PatchFailed,r);return t}default:return a}}}function j({game:e,numPlayers:t,setupData:r}){e=k(e),t||(t=2);let n={G:{},ctx:e.flow.ctx(t),plugins:{}};n=(0,E.t)(n,{game:e}),n=(0,E.E)(n,{game:e,playerID:void 0});let a=(0,E.a)(n);n.G=e.setup({...a,ctx:n.ctx},r);let i={...n,_undo:[],_redo:[],_stateID:0};return i=e.flow.init(i),[i]=(0,E.q)(i,{game:e}),e.disableUndo||(i._undo=[{G:i.G,ctx:i.ctx,plugins:i.plugins}]),i}class T{constructor({transportDataCallback:e,gameName:t,playerID:r,matchID:n,credentials:a,numPlayers:i}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=e,this.gameName=t||"default",this.playerID=r||null,this.matchID=n||"default",this.credentials=a,this.numPlayers=i||2}subscribeToConnectionStatus(e){this.connectionStatusCallback=e}setConnectionStatus(e){this.isConnected=e,this.connectionStatusCallback()}notifyClient(e){this.transportDataCallback(e)}}class B extends T{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}let L=e=>new B(e);class W{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(e){this.clients.set(e,e),this.mountDebug(e),this.notifySubscribers()}unregister(e){if(this.clients.delete(e),this.currentClient===e)for(let[e]of(this.unmountDebug(),this.clients)){if(this.debugPanel)break;this.mountDebug(e)}this.notifySubscribers()}subscribe(e){let t=Symbol();return this.subscribers.set(t,e),e(this.getState()),()=>{this.subscribers.delete(t)}}switchPlayerID(e){if(this.currentClient.multiplayer){for(let[t]of this.clients)if(t.playerID===e&&!1!==t.debugOpt&&t.multiplayer===this.currentClient.multiplayer){this.switchToClient(t);return}}this.currentClient.updatePlayerID(e),this.notifySubscribers()}switchToClient(e){e!==this.currentClient&&(this.unmountDebug(),this.mountDebug(e),this.notifySubscribers())}notifySubscribers(){let e=this.getState();this.subscribers.forEach(t=>{t(e)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(e=>!1!==e.debugOpt)}mountDebug(e){let t;if(!1===e.debugOpt||null!==this.debugPanel||"undefined"==typeof document)return;let r=document.body;e.debugOpt&&!0!==e.debugOpt&&(t=e.debugOpt.impl||t,r=e.debugOpt.target||r),t&&(this.currentClient=e,this.debugPanel=new t({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}let U=new W;function z(e,t,r){return r||null!=e||(e=t.getState().ctx.currentPlayer),e}function V(e,t,r,n,a,i){let s={};for(let o of t)s[o]=(...t)=>{let s=E.A[e](o,t,z(n,r,i),a);r.dispatch(s)};return s}let q=V.bind(null,"makeMove"),G=V.bind(null,"gameEvent"),$=V.bind(null,"plugin");class F{constructor({game:e,debug:t,numPlayers:r,multiplayer:n,matchID:a,playerID:i,credentials:s,enhancer:o}){this.game=k(e),this.playerID=i,this.matchID=a||"default",this.credentials=s,this.multiplayer=n,this.debugOpt=t,this.manager=U,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=R({game:this.game,isClient:void 0!==n}),this.initialState=null,n||(this.initialState=j({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch((0,E.u)(this.initialState))},this.undo=()=>{let e=(0,E.v)(z(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.redo=()=>{let e=(0,E.w)(z(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.log=[];let l=_(A,()=>e=>t=>{let r=e(t);return this.notifySubscribers(),r},e=>t=>r=>{let n=e.getState(),a=t(r);return"clientOnly"in r||r.type===E.p||this.transport.sendAction(n,r),a},e=>t=>r=>{let n=t(r),a=e.getState();switch(r.type){case E.M:case E.o:case E.j:case E.R:{let e=a.deltalog;this.log=[...this.log,...e];break}case E.m:this.log=[];break;case E.P:case E.l:{let e=-1;this.log.length>0&&(e=this.log[this.log.length-1]._stateID);let t=r.deltalog||[];t=t.filter(t=>t._stateID>e),this.log=[...this.log,...t];break}case E.k:this.initialState=r.initialState,this.log=r.log||[]}return n});o=void 0!==o?w(l,o):l,this.store=x(this.reducer,this.initialState,o),n||(n=L),this.transport=n({transportDataCallback:e=>this.receiveTransportData(e),gameKey:e,game:this.game,matchID:a,playerID:i,credentials:s,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=e=>{this.transport.sendChatMessage(this.matchID,{id:h(7),sender:this.playerID,payload:e})}}receiveMatchData(e){this.matchData=e,this.notifySubscribers()}receiveChatMessage(e){this.chatMessages=[...this.chatMessages,e],this.notifySubscribers()}receiveTransportData(e){let[t]=e.args;if(t===this.matchID)switch(e.type){case"sync":{let[,t]=e.args,r=(0,E.s)(t);this.receiveMatchData(t.filteredMetadata),this.store.dispatch(r);break}case"update":{let[,t,r]=e.args,n=this.store.getState();if(t._stateID>=n._stateID){let e=(0,E.z)(t,r);this.store.dispatch(e)}break}case"patch":{let[,t,r,n,a]=e.args,i=this.store.getState()._stateID;if(t!==i)break;let s=(0,E.y)(t,r,n,a);this.store.dispatch(s),this.store.getState()._stateID===i&&this.transport.requestSync();break}case"matchData":{let[,t]=e.args;this.receiveMatchData(t);break}case"chat":{let[,t]=e.args;this.receiveChatMessage(t)}}}notifySubscribers(){Object.values(this.subscribers).forEach(e=>e(this.getState()))}overrideGameState(e){this.gameStateOverride=e,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(e){let t=Object.keys(this.subscribers).length;return this.subscribers[t]=e,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&e(this.getState()),()=>{delete this.subscribers[t]}}getInitialState(){return this.initialState}getState(){let e=this.store.getState();if(null!==this.gameStateOverride&&(e=this.gameStateOverride),null===e)return e;let t=!0,r=this.game.flow.isPlayerActive(e.G,e.ctx,this.playerID);return this.multiplayer&&!r&&(t=!1),this.multiplayer||null===this.playerID||void 0===this.playerID||r||(t=!1),void 0!==e.ctx.gameover&&(t=!1),this.multiplayer||(e={...e,G:this.game.playerView({G:e.G,ctx:e.ctx,playerID:this.playerID}),plugins:(0,E.x)(e,this)}),{...e,log:this.log,isActive:t,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=q(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=G(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=$(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(e){this.playerID=e,this.createDispatchers(),this.transport.updatePlayerID(e),this.notifySubscribers()}updateMatchID(e){this.matchID=e,this.createDispatchers(),this.transport.updateMatchID(e),this.notifySubscribers()}updateCredentials(e){this.credentials=e,this.createDispatchers(),this.transport.updateCredentials(e),this.notifySubscribers()}}let{parse:H,stringify:J}=JSON,{keys:K}=Object;r(6317);var Y=r(95705);class X{constructor({enumerate:e,seed:t}){this.enumerateFn=e,this.seed=t,this.iterationCounter=0,this._opts={}}addOpt({key:e,range:t,initial:r}){this._opts[e]={range:t,value:r}}getOpt(e){return this._opts[e].value}setOpt(e,t){e in this._opts&&(this._opts[e].value=t)}opts(){return this._opts}enumerate(e,t,r){return this.enumerateFn(e,t,r).map(e=>"payload"in e?e:"move"in e?(0,E.B)(e.move,e.args,r):"event"in e?(0,E.g)(e.event,e.args,r):void 0)}random(e){let t;if(void 0!==this.seed){let e=this.prngstate?"":this.seed,r=(0,Y.a)(e,this.prngstate);t=r(),this.prngstate=r.state()}else t=Math.random();if(e){if(!Array.isArray(e))return Math.floor(t*e);{let r=Math.floor(t*e.length);return e[r]}}return t}}class Q extends X{constructor({enumerate:e,seed:t,objectives:r,game:n,iterations:a,playoutDepth:i,iterationCallback:s}){super({enumerate:e,seed:t}),void 0===r&&(r=()=>({})),this.objectives=r,this.iterationCallback=s||(()=>{}),this.reducer=R({game:n}),this.iterations=a,this.playoutDepth=i,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:"number"==typeof a?a:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:"number"==typeof i?i:50,range:{min:1,max:100}})}createNode({state:e,parentAction:t,parent:r,playerID:n}){let{G:a,ctx:i}=e,s=[],o=[];if(void 0!==n)s=this.enumerate(a,i,n),o=this.objectives(a,i,n);else if(i.activePlayers)for(let e in i.activePlayers)s.push(...this.enumerate(a,i,e)),o.push(this.objectives(a,i,e));else s=this.enumerate(a,i,i.currentPlayer),o=this.objectives(a,i,i.currentPlayer);return{state:e,parent:r,parentAction:t,actions:s,objectives:o,children:[],visits:0,value:0}}select(e){if(e.actions.length>0||0===e.children.length)return e;let t=null,r=0;for(let n of e.children){let a=n.visits+Number.EPSILON,i=n.value/a+Math.sqrt(2*Math.log(e.visits)/a);(null==t||i>r)&&(r=i,t=n)}return this.select(t)}expand(e){let t=e.actions;if(0===t.length||void 0!==e.state.ctx.gameover)return e;let r=this.random(t.length),n=t[r];e.actions.splice(r,1);let a=this.reducer(e.state,n),i=this.createNode({state:a,parentAction:n,parent:e});return e.children.push(i),i}playout({state:e}){let t=this.getOpt("playoutDepth");"function"==typeof this.playoutDepth&&(t=this.playoutDepth(e.G,e.ctx));for(let r=0;r<t&&void 0===e.ctx.gameover;r++){let{G:t,ctx:r}=e,n=r.currentPlayer;r.activePlayers&&(n=Object.keys(r.activePlayers)[0]);let a=this.enumerate(t,r,n),i=this.objectives(t,r,n),s=Object.keys(i).reduce((e,n)=>{let a=i[n];return a.checker(t,r)?e+a.weight:e},0);if(s>0)return{score:s};if(!a||0===a.length)return;let o=this.random(a.length);e=this.reducer(e,a[o])}return e.ctx.gameover}backpropagate(e,t={}){e.visits++,void 0!==t.score&&(e.value+=t.score),!0===t.draw&&(e.value+=.5),e.parentAction&&t.winner===e.parentAction.payload.playerID&&e.value++,e.parent&&this.backpropagate(e.parent,t)}play(e,t){let r=this.createNode({state:e,playerID:t}),n=this.getOpt("iterations");"function"==typeof this.iterations&&(n=this.iterations(e.G,e.ctx));let a=()=>{let e=null;for(let t of r.children)(null==e||t.visits>e.visits)&&(e=t);return{action:e&&e.parentAction,metadata:r}};return new Promise(e=>{let t=()=>{for(let e=0;e<25&&this.iterationCounter<n;e++){let e=this.select(r),t=this.expand(e),n=this.playout(t);this.backpropagate(t,n),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:n,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){let r=()=>{this.iterationCounter<n?(t(),setImmediate(r)):e(a())};r()}else{for(;this.iterationCounter<n;)t();e(a())}})}}let Z=(e,t)=>{if(!e||"string"!=typeof e)throw Error(`Expected ${t} string, got "${e}".`)},ee=e=>Z(e,"game name"),et=e=>Z(e,"match ID"),er=(e,t)=>{if(!e)throw Error(`Expected body, got “${e}”.`);for(let r in t){let n=t[r],a=Array.isArray(n)?n:[n],i=e[r];if(!a.includes(typeof i)){let e=a.join("|");throw TypeError(`Expected body.${r} to be of type ${e}, got “${i}”.`)}}};class en extends Error{constructor(e,t){super(e),this.details=t}}class ea{constructor({server:e=""}={}){this.server=e.replace(/\/$/,"")}async request(e,t){let r=await fetch(this.server+e,t);if(!r.ok){let e;try{e=await r.clone().json()}catch{try{e=await r.text()}catch(t){e=t.message}}throw new en(`HTTP status ${r.status}`,e)}return r.json()}async post(e,t){let r={method:"post",body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}};return t.init&&(r={...r,...t.init,headers:{...r.headers,...t.init.headers}}),this.request(e,r)}async listGames(e){return this.request("/games",e)}async listMatches(e,t,r){ee(e);let n="";if(t){let e=[],{isGameover:r,updatedBefore:a,updatedAfter:i}=t;void 0!==r&&e.push(`isGameover=${r}`),a&&e.push(`updatedBefore=${a}`),i&&e.push(`updatedAfter=${i}`),e.length>0&&(n="?"+e.join("&"))}return this.request(`/games/${e}${n}`,r)}async getMatch(e,t,r){return ee(e),et(t),this.request(`/games/${e}/${t}`,r)}async createMatch(e,t,r){return ee(e),er(t,{numPlayers:"number"}),this.post(`/games/${e}/create`,{body:t,init:r})}async joinMatch(e,t,r,n){return ee(e),et(t),er(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${e}/${t}/join`,{body:r,init:n})}async leaveMatch(e,t,r,n){ee(e),et(t),er(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/leave`,{body:r,init:n})}async updatePlayer(e,t,r,n){ee(e),et(t),er(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/update`,{body:r,init:n})}async playAgain(e,t,r,n){return ee(e),et(t),er(r,{playerID:"string",credentials:"string"}),this.post(`/games/${e}/${t}/playAgain`,{body:r,init:n})}}var ei=r(55634),es=r(22885),eo=r.n(es),el=r(63357);function eu(e){return e.type()===o.SYNC}!function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"}(o||(o={}));class ec{type(){return o.SYNC}connect(){}createMatch(e,t){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.","\nUsing the deprecated createGame method instead."),this.createGame(e,t);console.error("The database connector does not implement a createMatch method.")}listMatches(e){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.","\nUsing the deprecated listGames method instead."),this.listGames(e);console.error("The database connector does not implement a listMatches method.")}}let ed=({game:e,unlisted:t,setupData:r,numPlayers:n})=>{let a={gameName:e.name,unlisted:!!t,players:{},createdAt:Date.now(),updatedAt:Date.now()};void 0!==r&&(a.setupData=r);for(let e=0;e<n;e++)a.players[e]={id:e};return a},eh=({game:e,numPlayers:t,setupData:r,unlisted:n})=>{t&&"number"==typeof t||(t=2);let a=e.validateSetupData&&e.validateSetupData(r,t);return void 0!==a?{setupDataError:a}:{metadata:ed({game:e,numPlayers:t,setupData:r,unlisted:n}),initialState:j({game:e,numPlayers:t,setupData:r})}},ep=e=>Object.values(e.players).map(e=>{let{credentials:t,...r}=e;return r}),ef=e=>{let{credentials:t,...r}=e.payload;return{...e,payload:r}};class em{constructor(e,t,r,n){this.game=k(e),this.storageAPI=t,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=n}subscribe(e){this.subscribeCallback=e}async onUpdate(e,t,r,n){let a,i,s;if(!e||!e.payload)return{error:"missing action or action payload"};if(eu(this.storageAPI)?{metadata:a}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:a}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:e.payload.credentials,metadata:a}))return{error:"unauthorized action"};let o=ef(e);if(eu(this.storageAPI)?{state:i}=this.storageAPI.fetch(r,{state:!0}):{state:i}=await this.storageAPI.fetch(r,{state:!0}),void 0===i)return(0,E.e)(`game not found, matchID=[${r}]`),{error:"game not found"};if(void 0!==i.ctx.gameover){(0,E.e)(`game over - matchID=[${r}] - playerID=[${n}] - action[${o.payload.type}]`);return}let l=x(R({game:this.game}),i,_(A));if(o.type==E.j||o.type==E.R){let e=null!==i.ctx.activePlayers,t=i.ctx.currentPlayer===n;if(!e&&!t||e&&(void 0===i.ctx.activePlayers[n]||Object.keys(i.ctx.activePlayers).length>1)){(0,E.e)(`playerID=[${n}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(i.G,i.ctx,n)){(0,E.e)(`player not active - playerID=[${n}] - action[${o.payload.type}]`);return}let u=o.type==E.M?this.game.flow.getMove(i.ctx,o.payload.type,n):null;if(o.type==E.M&&!u){(0,E.e)(`move not processed - canPlayerMakeMove=false - playerID=[${n}] - action[${o.payload.type}]`);return}if(i._stateID!==t&&!(u&&P(u)&&u.ignoreStaleStateID)){(0,E.e)(`invalid stateID, was=[${t}], expected=[${i._stateID}] - playerID=[${n}] - action[${o.payload.type}]`);return}let c=l.getState();l.dispatch(o),i=l.getState(),this.subscribeCallback({state:i,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,t,c,i]}):this.transportAPI.sendAll({type:"update",args:[r,i]});let{deltalog:d,...h}=i;if(a&&(void 0===a.gameover||null===a.gameover)&&(s={...a,updatedAt:Date.now()},void 0!==i.ctx.gameover&&(s.gameover=i.ctx.gameover)),eu(this.storageAPI))this.storageAPI.setState(r,h,d),s&&this.storageAPI.setMetadata(r,s);else{let e=[this.storageAPI.setState(r,h,d)];s&&e.push(this.storageAPI.setMetadata(r,s)),await Promise.all(e)}}async onSync(e,t,r,n=2){let a={state:!0,metadata:!0,log:!0,initialState:!0},{state:i,initialState:s,log:o,metadata:l}=eu(this.storageAPI)?this.storageAPI.fetch(e,a):await this.storageAPI.fetch(e,a);if(this.auth&&null!=t&&!await this.auth.authenticateCredentials({playerID:t,credentials:r,metadata:l}))return{error:"unauthorized"};if(void 0===i){let t=eh({game:this.game,unlisted:!0,numPlayers:n,setupData:void 0});if("setupDataError"in t)return{error:"game requires setupData"};s=i=t.initialState,l=t.metadata,this.subscribeCallback({state:i,matchID:e}),eu(this.storageAPI)?this.storageAPI.createMatch(e,{initialState:s,metadata:l}):await this.storageAPI.createMatch(e,{initialState:s,metadata:l})}let u={state:i,log:o,filteredMetadata:l?ep(l):void 0,initialState:s};this.transportAPI.send({playerID:t,type:"sync",args:[e,u]})}async onConnectionChange(e,t,r,n){let a;if(null==t)return;if(eu(this.storageAPI)?{metadata:a}=this.storageAPI.fetch(e,{metadata:!0}):{metadata:a}=await this.storageAPI.fetch(e,{metadata:!0}),void 0===a)return(0,E.e)(`metadata not found for matchID=[${e}]`),{error:"metadata not found"};if(void 0===a.players[t])return(0,E.e)(`Player not in the match, matchID=[${e}] playerID=[${t}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:t,credentials:r,metadata:a}))return{error:"unauthorized"};a.players[t].isConnected=n;let i=ep(a);this.transportAPI.sendAll({type:"matchData",args:[e,i]}),eu(this.storageAPI)?this.storageAPI.setMetadata(e,a):await this.storageAPI.setMetadata(e,a)}async onChatMessage(e,t,r){if(this.auth){let{metadata:n}=await this.storageAPI.fetch(e,{metadata:!0});if(!(t&&"string"==typeof t.sender)||!await this.auth.authenticateCredentials({playerID:t.sender,credentials:r,metadata:n}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[e,t]})}}let ey=(e,t,r)=>({...r,G:e.playerView({G:r.G,ctx:r.ctx,playerID:t}),plugins:(0,E.x)(r,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),eg=e=>(t,r)=>{switch(r.type){case"patch":{let[n,a,i,s]=r.args,o=ev(s.deltalog,t),l=ey(e,t,s),u=s._stateID,c=ey(e,t,i);return{type:"patch",args:[n,a,u,(0,d.B8)(c,l),o]}}case"update":{let[n,a]=r.args,i=ev(a.deltalog,t);return{type:"update",args:[n,ey(e,t,a),i]}}case"sync":{let[n,a]=r.args,i=ey(e,t,a.state),s=ev(a.log,t);return{type:"sync",args:[n,{...a,state:i,log:s}]}}default:return r}};function ev(e,t){return void 0===e?e:e.map(e=>{if(null!==t&&+t==+e.action.payload.playerID||!0!==e.redact)return e;let r={...e.action.payload,args:null},{redact:n,...a}={...e,action:{...e.action,payload:r}};return a})}let eb=Object.create(null);eb.open="0",eb.close="1",eb.ping="2",eb.pong="3",eb.message="4",eb.upgrade="5",eb.noop="6";let ex=Object.create(null);Object.keys(eb).forEach(e=>{ex[eb[e]]=e});let ew={type:"error",data:"parser error"},e_="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),eE="function"==typeof ArrayBuffer,ek=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,eP=({type:e,data:t},r,n)=>e_&&t instanceof Blob?r?n(t):eS(t,n):eE&&(t instanceof ArrayBuffer||ek(t))?r?n(t):eS(new Blob([t]),n):n(eb[e]+(t||"")),eS=(e,t)=>{let r=new FileReader;return r.onload=function(){t("b"+(r.result.split(",")[1]||""))},r.readAsDataURL(e)};function eO(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let eI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eC="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<eI.length;e++)eC[eI.charCodeAt(e)]=e;let eD=e=>{let t=.75*e.length,r=e.length,n,a=0,i,s,o,l;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let u=new ArrayBuffer(t),c=new Uint8Array(u);for(n=0;n<r;n+=4)i=eC[e.charCodeAt(n)],s=eC[e.charCodeAt(n+1)],o=eC[e.charCodeAt(n+2)],l=eC[e.charCodeAt(n+3)],c[a++]=i<<2|s>>4,c[a++]=(15&s)<<4|o>>2,c[a++]=(3&o)<<6|63&l;return u},eN="function"==typeof ArrayBuffer,eM=(e,t)=>{if("string"!=typeof e)return{type:"message",data:eR(e,t)};let r=e.charAt(0);return"b"===r?{type:"message",data:eA(e.substring(1),t)}:ex[r]?e.length>1?{type:ex[r],data:e.substring(1)}:{type:ex[r]}:ew},eA=(e,t)=>eN?eR(eD(e),t):{base64:!0,data:e},eR=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,ej=(e,t)=>{let r=e.length,n=Array(r),a=0;e.forEach((e,i)=>{eP(e,!1,e=>{n[i]=e,++a===r&&t(n.join("\x1e"))})})},eT=(e,t)=>{let r=e.split("\x1e"),n=[];for(let e=0;e<r.length;e++){let a=eM(r[e],t);if(n.push(a),"error"===a.type)break}return n};function eB(e){return e.reduce((e,t)=>e+t.length,0)}function eL(e,t){if(e[0].length===t)return e.shift();let r=new Uint8Array(t),n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function eW(e){if(e)return function(e){for(var t in eW.prototype)e[t]=eW.prototype[t];return e}(e)}eW.prototype.on=eW.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},eW.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},eW.prototype.off=eW.prototype.removeListener=eW.prototype.removeAllListeners=eW.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((r=n[a])===t||r.fn===t){n.splice(a,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},eW.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this},eW.prototype.emitReserved=eW.prototype.emit,eW.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},eW.prototype.hasListeners=function(e){return!!this.listeners(e).length};let eU="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ez="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function eV(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}let eq=ez.setTimeout,eG=ez.clearTimeout;function e$(e,t){t.useNativeTimers?(e.setTimeoutFn=eq.bind(ez),e.clearTimeoutFn=eG.bind(ez)):(e.setTimeoutFn=ez.setTimeout.bind(ez),e.clearTimeoutFn=ez.clearTimeout.bind(ez))}function eF(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class eH extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class eJ extends eW{constructor(e){super(),this.writable=!1,e$(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new eH(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=eM(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}class eK extends eJ{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){eT(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,ej(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=eF()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let eY=!1;try{eY="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let eX=eY;function eQ(){}class eZ extends eK{constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class e0 extends eW{constructor(e,t,r){super(),this.createRequest=e,e$(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;let t=eV(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=e0.requestsCount++,e0.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=eQ,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete e0.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function e1(){for(let e in e0.requests)e0.requests.hasOwnProperty(e)&&e0.requests[e].abort()}e0.requestsCount=0,e0.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",e1):"function"==typeof addEventListener&&addEventListener("onpagehide"in ez?"pagehide":"unload",e1,!1));let e2=function(){let e=e6({xdomain:!1});return e&&null!==e.responseType}();class e5 extends eZ{constructor(e){super(e);let t=e&&e.forceBase64;this.supportsBinary=e2&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new e0(e6,this.uri(),e)}}function e6(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||eX))return new XMLHttpRequest}catch(e){}if(!t)try{return new ez[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}let e3="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class e4 extends eJ{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,r=e3?{}:eV(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;eP(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(e){}n&&eU(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=eF()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}let e8=ez.WebSocket||ez.MozWebSocket;class e7 extends e4{createSocket(e,t,r){return e3?new e8(e,t,r):t?new e8(e,t):new e8(e)}doWrite(e,t){this.ws.send(t)}}class e9 extends eJ{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=function(e,t){a||(a=new TextDecoder);let r=[],n=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(0===n){if(1>eB(r))break;let e=eL(r,1);s=(128&e[0])==128,n=(i=127&e[0])<126?3:126===i?1:2}else if(1===n){if(2>eB(r))break;let e=eL(r,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),n=3}else if(2===n){if(8>eB(r))break;let e=eL(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>2097151){l.enqueue(ew);break}i=0x100000000*a+t.getUint32(4),n=3}else{if(eB(r)<i)break;let e=eL(r,i);l.enqueue(eM(s?e:a.decode(e),t)),n=0}if(0===i||i>e){l.enqueue(ew);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=new TransformStream({transform(e,t){var r;r=r=>{let n;let a=r.length;if(a<126)new DataView((n=new Uint8Array(1)).buffer).setUint8(0,a);else if(a<65536){let e=new DataView((n=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,a)}else{let e=new DataView((n=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(a))}e.data&&"string"!=typeof e.data&&(n[0]|=128),t.enqueue(n),t.enqueue(r)},e_&&e.data instanceof Blob?e.data.arrayBuffer().then(eO).then(r):eE&&(e.data instanceof ArrayBuffer||ek(e.data))?r(eO(e.data)):eP(e,!1,e=>{n||(n=new TextEncoder),r(n.encode(e))})}});i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();let s=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),s())}).catch(e=>{})};s();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;this._writer.write(r).then(()=>{n&&eU(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}let te={websocket:e7,webtransport:e9,polling:e5},tt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tn(e){if(e.length>8e3)throw"URI too long";let t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=tt.exec(e||""),i={},s=14;for(;s--;)i[tr[s]]=a[s]||"";return -1!=r&&-1!=n&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,i.path),i.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}(0,i.query),i}let ta="function"==typeof addEventListener&&"function"==typeof removeEventListener,ti=[];ta&&addEventListener("offline",()=>{ti.forEach(e=>e())},!1);class ts extends eW{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let r=tn(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=tn(t.host).host);e$(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,n=r.length;e<n;e++){let n=r[e].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}(this.opts.query)),ta&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ti.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&ts.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",ts.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let r=this.writeBuffer[t].data;if(r&&(e+="string"==typeof r?function(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(r):Math.ceil(1.33*(r.byteLength||r.size))),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,eU(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let a={type:e,data:t,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ts.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ta&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=ti.indexOf(this._offlineEventListener);-1!==e&&ti.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ts.protocol=4;class to extends ts{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;ts.priorWebsocketSuccess=!1;let n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r){if("pong"===e.type&&"probe"===e.data)this.upgrading=!0,this.emitReserved("upgrading",t),t&&(ts.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"===this.readyState||(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{let e=Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}}))};function a(){r||(r=!0,u(),t.close(),t=null)}let i=e=>{let r=Error("probe error: "+e);r.transport=t.name,a(),this.emitReserved("upgradeError",r)};function s(){i("transport closed")}function o(){i("socket closed")}function l(e){t&&e.name!==t.name&&a()}let u=()=>{t.removeListener("open",n),t.removeListener("error",i),t.removeListener("close",s),this.off("close",o),this.off("upgrading",l)};t.once("open",n),t.once("error",i),t.once("close",s),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}class tl extends to{constructor(e,t={}){let r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>te[e]).filter(e=>!!e)),super(e,r)}}tl.protocol;let tu="function"==typeof ArrayBuffer,tc=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,td=Object.prototype.toString,th="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===td.call(Blob),tp="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===td.call(File);function tf(e){return tu&&(e instanceof ArrayBuffer||tc(e))||th&&e instanceof Blob||tp&&e instanceof File}let tm=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ty=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(l||(l={}));class tg{constructor(e){this.replacer=e}encode(e){return(e.type===l.EVENT||e.type===l.ACK)&&function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(e(t[r]))return!0;return!1}if(tf(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===l.EVENT?l.BINARY_EVENT:l.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===l.BINARY_EVENT||e.type===l.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=function(e){let t=[],r=e.data;return e.data=function e(t,r){if(!t)return t;if(tf(t)){let e={_placeholder:!0,num:r.length};return r.push(t),e}if(Array.isArray(t)){let n=Array(t.length);for(let a=0;a<t.length;a++)n[a]=e(t[a],r);return n}if("object"==typeof t&&!(t instanceof Date)){let n={};for(let a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=e(t[a],r));return n}return t}(r,t),e.attachments=t.length,{packet:e,buffers:t}}(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}function tv(e){return"[object Object]"===Object.prototype.toString.call(e)}class tb extends eW{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let r=(t=this.decodeString(e)).type===l.BINARY_EVENT;r||t.type===l.BINARY_ACK?(t.type=r?l.EVENT:l.ACK,this.reconstructor=new tx(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(tf(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===l[r.type])throw Error("unknown packet type "+r.type);if(r.type===l.BINARY_EVENT||r.type===l.BINARY_ACK){let n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let a=e.substring(n,t);if(a!=Number(a)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(t+1)){let n=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(n,t)}else r.nsp="/";let n=e.charAt(t+1);if(""!==n&&Number(n)==n){let n=t+1;for(;++t;){let r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){let n=this.tryParse(e.substr(t));if(tb.isPayloadValid(r.type,n))r.data=n;else throw Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case l.CONNECT:return tv(t);case l.DISCONNECT:return void 0===t;case l.CONNECT_ERROR:return"string"==typeof t||tv(t);case l.EVENT:case l.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===tm.indexOf(t[0]));case l.ACK:case l.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tx{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,r;let e=(t=this.reconPack,r=this.buffers,t.data=function e(t,r){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<r.length)return r[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=e(t[n],r);else if("object"==typeof t)for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=e(t[n],r));return t}(t.data,r),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function tw(e,t,r){return e.on(t,r),function(){e.off(t,r)}}let t_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tE extends eW{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[tw(e,"open",this.onopen.bind(this)),tw(e,"packet",this.onpacket.bind(this)),tw(e,"error",this.onerror.bind(this)),tw(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,n,a;if(t_.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let i={type:l.EVENT,data:t};if(i.options={},i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++,r=t.pop();this._registerAckCallback(e,r),i.id=e}let s=null===(n=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===n?void 0:n.writable,o=this.connected&&!(null===(a=this.io.engine)||void 0===a?void 0:a._hasPingExpired());return this.flags.volatile&&!s||(o?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var r;let n=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===n){this.acks[e]=t;return}let a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))},n),i=(...e)=>{this.io.clearTimeoutFn(a),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise((r,n)=>{let a=(e,t)=>e?n(e):r(t);a.withError=!0,t.push(a),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...n)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...n)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:l.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(!(e.nsp!==this.nsp))switch(e.type){case l.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case l.EVENT:case l.BINARY_EVENT:this.onevent(e);break;case l.ACK:case l.BINARY_ACK:this.onack(e);break;case l.DISCONNECT:this.ondisconnect();break;case l.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...n){r||(r=!0,t.packet({type:l.ACK,id:e,data:n}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:l.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function tk(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}tk.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},tk.prototype.reset=function(){this.attempts=0},tk.prototype.setMin=function(e){this.ms=e},tk.prototype.setMax=function(e){this.max=e},tk.prototype.setJitter=function(e){this.jitter=e};class tP extends eW{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,e$(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new tk({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let n=t.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new tl(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let n=tw(t,"open",function(){r.onopen(),e&&e()}),a=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=tw(t,"error",a);if(!1!==this._timeout){let e=this._timeout,r=this.setTimeoutFn(()=>{n(),a(Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(n),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(tw(e,"ping",this.onping.bind(this)),tw(e,"data",this.ondata.bind(this)),tw(e,"error",this.onerror.bind(this)),tw(e,"close",this.onclose.bind(this)),tw(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){eU(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new tE(this,e,t),this.nsps[e]=r),r}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let tS={};function tO(e,t){let r;"object"==typeof e&&(t=e,e=void 0);let n=function(e,t="",r){let n=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),n=tn(e)),!n.port&&(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),a=n.source,i=n.id,s=n.path,o=tS[i]&&s in tS[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?r=new tP(a,t):(tS[i]||(tS[i]=new tP(a,t)),r=tS[i]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}Object.assign(tO,{Manager:tP,Socket:tE,io:tO,connect:tO});class tI extends ec{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(e,t){this.initial.set(e,t.initialState),this.setState(e,t.initialState),this.setMetadata(e,t.metadata)}setMetadata(e,t){this.metadata.set(e,t)}setState(e,t,r){if(r&&r.length>0){let t=this.log.get(e)||[];this.log.set(e,[...t,...r])}this.state.set(e,t)}fetch(e,t){let r={};return t.state&&(r.state=this.state.get(e)),t.metadata&&(r.metadata=this.metadata.get(e)),t.log&&(r.log=this.log.get(e)||[]),t.initialState&&(r.initialState=this.initial.get(e)),r}wipe(e){this.state.delete(e),this.metadata.delete(e)}listMatches(e){return[...this.metadata.entries()].filter(([,t])=>!e||(void 0===e.gameName||t.gameName===e.gameName)&&(void 0===e.where||(void 0===e.where.isGameover||void 0!==t.gameover===e.where.isGameover)&&(void 0===e.where.updatedBefore||!(t.updatedAt>=e.where.updatedBefore))&&(void 0===e.where.updatedAfter||!(t.updatedAt<=e.where.updatedAfter)))).map(([e])=>e)}}class tC extends Map{constructor(e){super(),this.key=e,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(e=>this.set(...e))}sync(){let e=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(e))}set(e,t){return super.set(e,t),this.sync(),this}delete(e){let t=super.delete(e);return this.sync(),t}}class tD extends tI{constructor(e="bgio"){super();let t=t=>new tC(`${e}_${t}`);this.state=t("state"),this.initial=t("initial"),this.metadata=t("metadata"),this.log=t("log")}}class tN extends em{constructor({game:e,bots:t,storageKey:r,persist:n}){let a={},i={};if(e&&e.ai&&t)for(let r in t){let n=t[r];i[r]=new n({game:e,enumerate:e.ai.enumerate,seed:e.seed})}let s=({playerID:e,...t})=>{let r=a[e];void 0!==r&&r(o(e,t))},o=eg(e);super(e,n?new tD(r):new tI,{send:s,sendAll:e=>{for(let t in a)s({playerID:t,...e})}}),this.connect=(e,t)=>{a[e]=t},this.subscribe(({state:e,matchID:r})=>{if(!t)return;let n=function(e,t){if(void 0!==e.ctx.gameover)return null;if(e.ctx.activePlayers){for(let r of Object.keys(t))if(r in e.ctx.activePlayers)return r}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}(e,i);null!==n&&setTimeout(async()=>{let t=await i[n].play(e,n);await this.onUpdate(t.action,e._stateID,r,t.action.payload.playerID)},100)})}}class tM extends T{constructor({master:e,...t}){super(t),this.master=e}sendChatMessage(e,t){let r=[e,t,this.credentials];this.master.onChatMessage(...r)}sendAction(e,t){this.master.onUpdate(t,e._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,e=>this.notifyClient(e)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(e){this.matchID=e,this.connect()}updatePlayerID(e){this.playerID=e,this.connect()}updateCredentials(e){this.credentials=e,this.connect()}}let tA=new Map;class tR extends T{constructor({socket:e,socketOpts:t,server:r,...n}){super(n),this.server=r,this.socket=e,this.socketOpts=t}sendAction(e,t){let r=[t,e._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(e,t){let r=[e,t,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket){if(this.server){let e=this.server;-1==e.search(/^https?:\/\//)&&(e="http://"+this.server),"/"!=e.slice(-1)&&(e+="/"),this.socket=tO(e+this.gameName,this.socketOpts)}else this.socket=tO("/"+this.gameName,this.socketOpts)}this.socket.on("patch",(e,t,r,n,a)=>{this.notifyClient({type:"patch",args:[e,t,r,n,a]})}),this.socket.on("update",(e,t,r)=>{this.notifyClient({type:"update",args:[e,t,r]})}),this.socket.on("sync",(e,t)=>{this.notifyClient({type:"sync",args:[e,t]})}),this.socket.on("matchData",(e,t)=>{this.notifyClient({type:"matchData",args:[e,t]})}),this.socket.on("chat",(e,t)=>{this.notifyClient({type:"chat",args:[e,t]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){let e=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...e)}}updateMatchID(e){this.matchID=e,this.requestSync()}updatePlayerID(e){this.playerID=e,this.requestSync()}updateCredentials(e){this.credentials=e,this.requestSync()}}function tj({server:e,socketOpts:t}={}){return r=>new tR({server:e,socketOpts:t,...r})}function tT(e){var t;let{game:r,numPlayers:n,board:a,multiplayer:i,enhancer:s}=e,{loading:o,debug:l}=e;return void 0===o&&(o=()=>ei.createElement("div",{className:"bgio-loading"},"connecting...")),(t=class extends ei.Component{constructor(e){super(e),void 0===l&&(l=e.debug),this.client=new F({game:r,debug:l,numPlayers:n,multiplayer:i,matchID:e.matchID,playerID:e.playerID,credentials:e.credentials,enhancer:s})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(e){this.props.matchID!=e.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=e.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=e.credentials&&this.client.updateCredentials(this.props.credentials)}render(){let e=this.client.getState();if(null===e)return ei.createElement(o);let t=null;return a&&(t=ei.createElement(a,{...e,...this.props,isMultiplayer:!!i,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),ei.createElement("div",{className:"bgio-client"},t)}}).propTypes={matchID:eo().string,playerID:eo().string,credentials:eo().string,debug:eo().any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class tB{constructor({server:e,gameComponents:t,playerName:r,playerCredentials:n}){this.client=new ea({server:e}),this.gameComponents=t,this.playerName=r||"Visitor",this.playerCredentials=n,this.matches=[]}async refresh(){try{for(let e of(this.matches=[],await this.client.listGames())){if(!this._getGameComponents(e))continue;let{matches:t}=await this.client.listMatches(e);this.matches.push(...t)}}catch(e){throw Error("failed to retrieve list of matches ("+e+")")}}_getMatchInstance(e){for(let t of this.matches)if(t.matchID===e)return t}_getGameComponents(e){for(let t of this.gameComponents)if(t.game.name===e)return t}_findPlayer(e){for(let t of this.matches)if(t.players.some(t=>t.name===e))return t}async join(e,t,r){try{let n=this._findPlayer(this.playerName);if(n)throw Error("player has already joined "+n.matchID);if(!(n=this._getMatchInstance(t)))throw Error("game instance "+t+" not found");let a=await this.client.joinMatch(e,t,{playerID:r,playerName:this.playerName});n.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=a.playerCredentials}catch(e){throw Error("failed to join match "+t+" ("+e+")")}}async leave(e,t){try{let r=this._getMatchInstance(t);if(!r)throw Error("match instance not found");for(let n of r.players)if(n.name===this.playerName){await this.client.leaveMatch(e,t,{playerID:n.id.toString(),credentials:this.playerCredentials}),delete n.name,delete this.playerCredentials;return}throw Error("player not found in match")}catch(e){throw Error("failed to leave match "+t+" ("+e+")")}}async disconnect(){let e=this._findPlayer(this.playerName);e&&await this.leave(e.gameName,e.matchID),this.matches=[],this.playerName="Visitor"}async create(e,t){try{let r=this._getGameComponents(e);if(!r)throw Error("game not found");if(t<r.game.minPlayers||t>r.game.maxPlayers)throw Error("invalid number of players "+t);await this.client.createMatch(e,{numPlayers:t})}catch(t){throw Error("failed to create match for "+e+" ("+t+")")}}}class tL extends ei.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{""!==this.state.playerName&&this.props.onEnter(this.state.playerName)},this.onKeyPress=e=>{"Enter"===e.key&&this.onClickEnter()},this.onChangePlayerName=e=>{let t=e.target.value.trim();this.setState({playerName:t,nameErrorMsg:t.length>0?"":"empty player name"})}}render(){return ei.createElement("div",null,ei.createElement("p",{className:"phase-title"},"Choose a player name:"),ei.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),ei.createElement("span",{className:"buttons"},ei.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),ei.createElement("br",null),ei.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,ei.createElement("br",null)))}}tL.defaultProps={playerName:""};class tW extends ei.Component{constructor(){super(...arguments),this._createSeat=e=>e.name||"[free]",this._createButtonJoin=(e,t)=>ei.createElement("button",{key:"button-join-"+e.matchID,onClick:()=>this.props.onClickJoin(e.gameName,e.matchID,""+t)},"Join"),this._createButtonLeave=e=>ei.createElement("button",{key:"button-leave-"+e.matchID,onClick:()=>this.props.onClickLeave(e.gameName,e.matchID)},"Leave"),this._createButtonPlay=(e,t)=>ei.createElement("button",{key:"button-play-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,playerID:""+t,numPlayers:e.players.length})},"Play"),this._createButtonSpectate=e=>ei.createElement("button",{key:"button-spectate-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,numPlayers:e.players.length})},"Spectate"),this._createInstanceButtons=e=>{let t=e.players.find(e=>e.name===this.props.playerName),r=e.players.find(e=>!e.name);return t&&r?this._createButtonLeave(e):r?this._createButtonJoin(e,r.id):t?ei.createElement("div",null,[this._createButtonPlay(e,t.id),this._createButtonLeave(e)]):this._createButtonSpectate(e)}}render(){let e=this.props.match,t="OPEN";return e.players.some(e=>!e.name)||(t="RUNNING"),ei.createElement("tr",{key:"line-"+e.matchID},ei.createElement("td",{key:"cell-name-"+e.matchID},e.gameName),ei.createElement("td",{key:"cell-status-"+e.matchID},t),ei.createElement("td",{key:"cell-seats-"+e.matchID},e.players.map(e=>this._createSeat(e)).join(", ")),ei.createElement("td",{key:"cell-buttons-"+e.matchID},this._createInstanceButtons(e)))}}class tU extends ei.Component{constructor(e){for(let t of(super(e),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(e,t)=>ei.createElement("option",{key:"name-option-"+t,value:t},e.game.name),this._createNumPlayersOption=e=>ei.createElement("option",{key:"num-option-"+e,value:e},e),this._createNumPlayersRange=e=>Array.from({length:e.maxPlayers+1}).map((e,t)=>t).slice(e.minPlayers),this.onChangeNumPlayers=e=>{this.setState({numPlayers:Number.parseInt(e.target.value)})},this.onChangeSelectedGame=e=>{let t=Number.parseInt(e.target.value);this.setState({selectedGame:t,numPlayers:this.props.games[t].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)},e.games)){let e=t.game;e.minPlayers||(e.minPlayers=1),e.maxPlayers||(e.maxPlayers=4),console.assert(e.maxPlayers>=e.minPlayers)}this.state={selectedGame:0,numPlayers:e.games[0].game.minPlayers}}render(){return ei.createElement("div",null,ei.createElement("select",{value:this.state.selectedGame,onChange:e=>this.onChangeSelectedGame(e)},this.props.games.map((e,t)=>this._createGameNameOption(e,t))),ei.createElement("span",null,"Players:"),ei.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(e=>this._createNumPlayersOption(e))),ei.createElement("span",{className:"buttons"},ei.createElement("button",{onClick:this.onClickCreate},"Create")))}}!function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"}(u||(u={}));class tz extends ei.Component{constructor(e){super(e),this.state={phase:u.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=e=>{let t=this.state.playerName;this.connection=new tB({server:e.lobbyServer,gameComponents:e.gameComponents,playerName:t,playerCredentials:this.state.credentialStore[t]})},this._updateCredentials=(e,t)=>{this.setState(r=>{let n=Object.assign({},r.credentialStore);return n[e]=t,{credentialStore:n}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=e=>{this._startRefreshInterval(),this.setState({playerName:e,phase:u.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:u.ENTER,errorMsg:""})},this._createMatch=async(e,t)=>{try{await this.connection.create(e,t),await this.connection.refresh(),this.setState({})}catch(e){this.setState({errorMsg:e.message})}},this._joinMatch=async(e,t,r)=>{try{await this.connection.join(e,t,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(e){this.setState({errorMsg:e.message})}},this._leaveMatch=async(e,t)=>{try{await this.connection.leave(e,t),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(e){this.setState({errorMsg:e.message})}},this._startMatch=(e,t)=>{let r;let n=this.connection._getGameComponents(e);if(!n){this.setState({errorMsg:"game "+e+" not supported"});return}if(t.numPlayers>1&&(r=this.props.gameServer?tj({server:this.props.gameServer}):tj()),1==t.numPlayers){let e=n.game.maxPlayers,t={};for(let r=1;r<e;r++)t[r+""]=Q;r=function({bots:e,persist:t,storageKey:r}={}){return n=>{let a;let{gameKey:i,game:s}=n,o=tA.get(i);return o&&o.bots===e&&o.storageKey===r&&o.persist===t&&(a=o.master),a||(a=new tN({game:s,bots:e,persist:t,storageKey:r}),tA.set(i,{master:a,bots:e,persist:t,storageKey:r})),new tM({master:a,...n})}}({bots:t})}let a={app:this.props.clientFactory({game:n.game,board:n.board,debug:this.props.debug,multiplayer:r}),matchID:t.matchID,playerID:t.numPlayers>1?t.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:u.PLAY,runningMatch:a})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:u.LIST,runningMatch:null})},this._getPhaseVisibility=e=>this.state.phase!==e?"hidden":"phase",this.renderMatches=(e,t)=>e.map(e=>{let{matchID:r,gameName:n,players:a}=e;return ei.createElement(tW,{key:"instance-"+r,match:{matchID:r,gameName:n,players:Object.values(a)},playerName:t,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){let e=el.Ay.load("lobbyState")||{};e.phase&&e.phase===u.PLAY&&(e.phase=u.LIST),e.phase&&e.phase!==u.ENTER&&this._startRefreshInterval(),this.setState({phase:e.phase||u.ENTER,playerName:e.playerName||"Visitor",credentialStore:e.credentialStore||{}})}componentDidUpdate(e,t){let r=this.state.playerName,n=this.state.credentialStore[r];if(t.phase!==this.state.phase||t.credentialStore[r]!==n||t.playerName!==r){this._createConnection(this.props),this._updateConnection();let e={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};el.Ay.save("lobbyState",e,{path:"/"})}e.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){let{gameComponents:e,renderer:t}=this.props,{errorMsg:r,playerName:n,phase:a,runningMatch:i}=this.state;return t?t({errorMsg:r,gameComponents:e,matches:this.connection.matches,phase:a,playerName:n,runningMatch:i,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):ei.createElement("div",{id:"lobby-view",style:{padding:50}},ei.createElement("div",{className:this._getPhaseVisibility(u.ENTER)},ei.createElement(tL,{key:n,playerName:n,onEnter:this._enterLobby})),ei.createElement("div",{className:this._getPhaseVisibility(u.LIST)},ei.createElement("p",null,"Welcome, ",n),ei.createElement("div",{className:"phase-title",id:"match-creation"},ei.createElement("span",null,"Create a match:"),ei.createElement(tU,{games:e,createMatch:this._createMatch})),ei.createElement("p",{className:"phase-title"},"Join a match:"),ei.createElement("div",{id:"instances"},ei.createElement("table",null,ei.createElement("tbody",null,this.renderMatches(this.connection.matches,n))),ei.createElement("span",{className:"error-msg"},r,ei.createElement("br",null))),ei.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),ei.createElement("div",{className:this._getPhaseVisibility(u.PLAY)},i&&ei.createElement(i.app,{matchID:i.matchID,playerID:i.playerID,credentials:i.credentials}),ei.createElement("div",{className:"buttons",id:"match-exit"},ei.createElement("button",{onClick:this._exitMatch},"Exit match"))),ei.createElement("div",{className:"buttons",id:"lobby-exit"},ei.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}tz.propTypes={gameComponents:eo().array.isRequired,lobbyServer:eo().string,gameServer:eo().string,debug:eo().bool,clientFactory:eo().func,refreshInterval:eo().number},tz.defaultProps={debug:!1,clientFactory:tT,refreshInterval:2e3}},67509:(e,t,r)=>{"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function a(e){return!!e&&!!e[q]}function i(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===G}(e)||Array.isArray(e)||!!e[V]||!!(null===(t=e.constructor)||void 0===t?void 0:t[V])||c(e)||d(e))}function s(e,t,r){void 0===r&&(r=!1),0===o(e)?(r?Object.keys:$)(e).forEach(function(n){r&&"symbol"==typeof n||t(n,e[n],e)}):e.forEach(function(r,n){return t(n,r,e)})}function o(e){var t=e[q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:c(e)?2:d(e)?3:0}function l(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t,r){var n=o(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function c(e){return L&&e instanceof Map}function d(e){return W&&e instanceof Set}function h(e){return e.o||e.t}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=F(e);delete t[q];for(var r=$(t),n=0;n<r.length;n++){var a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function f(e,t){return void 0===t&&(t=!1),y(e)||a(e)||!i(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&s(e,function(e,t){return f(t,!0)},!0)),e}function m(){n(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function g(e){var t=H[e];return t||n(18,e),t}function v(e,t){t&&(g("Patches"),e.u=[],e.s=[],e.v=t)}function b(e){x(e),e.p.forEach(_),e.p=null}function x(e){e===T&&(T=e.l)}function w(e){return T={p:[],l:T,h:e,m:!0,_:0}}function _(e){var t=e[q];0===t.i||1===t.i?t.j():t.g=!0}function E(e,t){t._=t.p.length;var r=t.p[0],a=void 0!==e&&e!==r;return t.h.O||g("ES5").S(t,e,a),a?(r[q].P&&(b(t),n(4)),i(e)&&(e=k(t,e),t.l||S(t,e)),t.u&&g("Patches").M(r[q].t,e,t.u,t.s)):e=k(t,r,[]),b(t),t.u&&t.v(t.u,t.s),e!==z?e:void 0}function k(e,t,r){if(y(t))return t;var n=t[q];if(!n)return s(t,function(a,i){return P(e,n,t,a,i,r)},!0),t;if(n.A!==e)return t;if(!n.P)return S(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=p(n.k):n.o,i=a,o=!1;3===n.i&&(i=new Set(a),a.clear(),o=!0),s(i,function(t,i){return P(e,n,a,t,i,r,o)}),S(e,a,!1),r&&e.u&&g("Patches").N(n,r,e.u,e.s)}return n.o}function P(e,t,r,n,s,o,c){if(a(s)){var d=k(e,s,o&&t&&3!==t.i&&!l(t.R,n)?o.concat(n):void 0);if(u(r,n,d),!a(d))return;e.m=!1}else c&&r.add(s);if(i(s)&&!y(s)){if(!e.h.D&&e._<1)return;k(e,s),t&&t.A.l||S(e,s)}}function S(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&f(t,r)}function O(e,t){var r=e[q];return(r?h(r):e)[t]}function I(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function C(e){e.P||(e.P=!0,e.l&&C(e.l))}function D(e){e.o||(e.o=p(e.t))}function N(e,t,r){var n,a,i,s,o,l,u,h=c(t)?g("MapSet").F(t,r):d(t)?g("MapSet").T(t,r):e.O?(i=a={i:(n=Array.isArray(t))?1:0,A:r?r.A:T,P:!1,I:!1,R:{},l:r,t:t,k:null,o:null,j:null,C:!1},s=J,n&&(i=[a],s=K),l=(o=Proxy.revocable(i,s)).revoke,u=o.proxy,a.k=u,a.j=l,u):g("ES5").J(t,r);return(r?r.A:T).p.push(h),h}function M(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}r.d(t,{A:()=>eb,B:()=>eu,E:()=>eA,F:()=>eN,G:()=>A,I:()=>eq,M:()=>Z,N:()=>ej,P:()=>es,R:()=>et,S:()=>eF,T:()=>e$,U:()=>eG,a:()=>eD,b:()=>eW,c:()=>eU,d:()=>ez,e:()=>eS,f:()=>eo,g:()=>ec,h:()=>eC,i:()=>eP,j:()=>ea,k:()=>en,l:()=>ei,m:()=>er,n:()=>ex,o:()=>ee,p:()=>el,q:()=>eB,r:()=>ev,s:()=>eh,t:()=>eM,u:()=>em,v:()=>ey,w:()=>eg,x:()=>eL,y:()=>ep,z:()=>ef});var A,R,j,T,B="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),L="undefined"!=typeof Map,W="undefined"!=typeof Set,U="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,z=B?Symbol.for("immer-nothing"):((j={})["immer-nothing"]=!0,j),V=B?Symbol.for("immer-draftable"):"__$immer_draftable",q=B?Symbol.for("immer-state"):"__$immer_state",G=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),$="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,F=Object.getOwnPropertyDescriptors||function(e){var t={};return $(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},H={},J={get:function(e,t){if(t===q)return e;var r,n,a=h(e);if(!l(a,t))return(n=I(a,t))?"value"in n?n.value:null===(r=n.get)||void 0===r?void 0:r.call(e.k):void 0;var s=a[t];return e.I||!i(s)?s:s===O(e.t,t)?(D(e),e.o[t]=N(e.A.h,s,e)):s},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,r){var n=I(h(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=O(h(e),t),i=null==a?void 0:a[q];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if((r===a?0!==r||1/r==1/a:r!=r&&a!=a)&&(void 0!==r||l(e.t,t)))return!0;D(e),C(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==O(e.t,t)||t in e.t?(e.R[t]=!1,D(e),C(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},K={};s(J,function(e,t){K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),K.deleteProperty=function(e,t){return K.set.call(this,e,t,void 0)},K.set=function(e,t,r){return J.set.call(this,e[0],t,r,e[0])};var Y=new(function(){function e(e){var t=this;this.O=U,this.D=!0,this.produce=function(e,r,a){if("function"==typeof e&&"function"!=typeof r){var s,o=r;return r=e,function(e){var n=this;void 0===e&&(e=o);for(var a=arguments.length,i=Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return t.produce(e,function(e){var t;return(t=r).call.apply(t,[n,e].concat(i))})}}if("function"!=typeof r&&n(6),void 0!==a&&"function"!=typeof a&&n(7),i(e)){var l=w(t),u=N(t,e,void 0),c=!0;try{s=r(u),c=!1}finally{c?b(l):x(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return v(l,a),E(e,l)},function(e){throw b(l),e}):(v(l,a),E(s,l))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===z&&(s=void 0),t.D&&f(s,!0),a){var d=[],h=[];g("Patches").M(e,s,d,h),a(d,h)}return s}n(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,function(t){return e.apply(void 0,[t].concat(a))})};var n,a,i=t.produce(e,r,function(e,t){n=e,a=t});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(function(e){return[e,n,a]}):[i,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||n(8),a(e)&&(a(t=e)||n(22,t),e=function e(t){if(!i(t))return t;var r,n=t[q],a=o(t);if(n){if(!n.P&&(n.i<4||!g("ES5").K(n)))return n.t;n.I=!0,r=M(t,a),n.I=!1}else r=M(t,a);return s(r,function(t,a){var i;n&&(2===o(i=n.t)?i.get(t):i[t])===a||u(r,t,e(a))}),3===a?new Set(r):r}(t));var t,r=w(this),l=N(this,e,void 0);return l[q].C=!0,x(r),l},t.finishDraft=function(e,t){var r=(e&&e[q]).A;return v(r,t),E(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!U&&n(20),this.O=e},t.applyPatches=function(e,t){for(r=t.length-1;r>=0;r--){var r,n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var i=g("Patches").$;return a(e)?i(e,t):this.produce(e,function(e){return i(e,t)})},e}()),X=Y.produce;Y.produceWithPatches.bind(Y),Y.setAutoFreeze.bind(Y),Y.setUseProxies.bind(Y),Y.applyPatches.bind(Y),Y.createDraft.bind(Y),Y.finishDraft.bind(Y);var Q=r(95705);r(84126);let Z="MAKE_MOVE",ee="GAME_EVENT",et="REDO",er="RESET",en="SYNC",ea="UNDO",ei="UPDATE",es="PATCH",eo="PLUGIN",el="STRIP_TRANSIENTS",eu=(e,t,r,n)=>({type:Z,payload:{type:e,args:t,playerID:r,credentials:n}}),ec=(e,t,r,n)=>({type:ee,payload:{type:e,args:t,playerID:r,credentials:n}}),ed=(e,t,r,n)=>({type:ee,payload:{type:e,args:t,playerID:r,credentials:n},automatic:!0}),eh=e=>({type:en,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),ep=(e,t,r,n)=>({type:es,prevStateID:e,stateID:t,patch:r,deltalog:n,clientOnly:!0}),ef=(e,t)=>({type:ei,state:e,deltalog:t,clientOnly:!0}),em=e=>({type:er,state:e,clientOnly:!0}),ey=(e,t)=>({type:ea,payload:{type:null,args:null,playerID:e,credentials:t}}),eg=(e,t)=>({type:et,payload:{type:null,args:null,playerID:e,credentials:t}}),ev=()=>({type:el});var eb=Object.freeze({__proto__:null,makeMove:eu,gameEvent:ec,automaticGameEvent:ed,sync:eh,patch:ep,update:ef,reset:em,undo:ey,redo:eg,plugin:(e,t,r,n)=>({type:eo,payload:{type:e,args:t,playerID:r,credentials:n}}),stripTransients:ev});let ex="INVALID_MOVE";!function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"}(A||(A={})),function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks — the turn is already ending.",e.MaxTurnEndings="Maximum number of turn endings exceeded for this update.\nThis likely means game code is triggering an infinite loop.",e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phase’s `onEnd` hook — the phase is already ending.\nIf you’re trying to dynamically choose the next phase when a phase ends, use the phase’s `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phase’s `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."}(R||(R={}));class ew{constructor(e,t,r){this.flow=e,this.playerID=r,this.dispatch=[],this.initialTurn=t.turn,this.updateTurnContext(t,void 0),this.maxEndedTurnsPerAction=100*t.numPlayers}api(){let e={_private:this};for(let t of this.flow.eventNames)e[t]=(...e)=>{this.dispatch.push({type:t,args:e,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:Error("Events Plugin Error")})};return e}isUsed(){return this.dispatch.length>0}updateTurnContext(e,t){this.currentPhase=e.phase,this.currentTurn=e.turn,this.currentMethod=t}unsetCurrentMethod(){this.currentMethod=void 0}update(e){let t=e,r=({stack:e},r)=>({...t,plugins:{...t.plugins,events:{...t.plugins.events,data:{error:r+"\n"+e}}}});for(let t=0;t<this.dispatch.length;t++){let n=this.dispatch[t],a=n.turn!==e.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(n.error,R.MaxTurnEndings);if(void 0===n.calledFrom)return r(n.error,R.CalledOutsideHook);if(e.ctx.gameover)break;switch(n.type){case"endStage":case"setStage":case"setActivePlayers":switch(n.calledFrom){case A.TURN_ON_END:case A.PHASE_ON_END:return r(n.error,R.StageEventInOnEnd);case A.PHASE_ON_BEGIN:return r(n.error,R.StageEventInPhaseBegin);case A.TURN_ON_BEGIN:if("setActivePlayers"===n.type)break;return r(n.error,R.StageEventInTurnBegin)}if(a)continue;break;case"endTurn":if(n.calledFrom===A.TURN_ON_END||n.calledFrom===A.PHASE_ON_END)return r(n.error,R.EndTurnInOnEnd);if(a)continue;break;case"endPhase":case"setPhase":if(n.calledFrom===A.PHASE_ON_END)return r(n.error,R.PhaseEventInOnEnd);if(n.phase!==e.ctx.phase)continue}let i=ed(n.type,n.args,this.playerID);e=this.flow.processEvent(e,i)}return e}}let e_={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(r,...n)=>{let a=r.events;a&&a._private.updateTurnContext(r.ctx,t);let i=e(r,...n);return a&&a._private.unsetCurrentMethod(),i},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:r})=>new ew(e.flow,t,r).api()},eE=()=>{},ek=(...e)=>console.error(...e);function eP(e){eE(`INFO: ${e}`)}function eS(e){ek("ERROR:",e)}let eO=[{name:"plugin-immer",fnWrap:e=>(t,...r)=>{let n=!1,a=X(t.G,a=>{let i=e({...t,G:a},...r);if(i===ex){n=!0;return}return i});return n?ex:a}},Q.R,{name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},{name:"plugin-serializable",fnWrap:e=>(t,...r)=>e(t,...r)}],eI=[...eO,e_],eC=(e,t,r)=>(r.game.plugins.filter(e=>void 0!==e.action).filter(e=>e.name===t.payload.type).forEach(r=>{let n=r.name,a=e.plugins[n]||{data:{}},i=r.action(a.data,t.payload);e={...e,plugins:{...e.plugins,[n]:{...a,data:i}}}}),e),eD=({plugins:e})=>Object.entries(e||{}).reduce((e,[t,{api:r}])=>(e[t]=r,e),{}),eN=(e,t,r)=>[...eO,...r,e_].filter(e=>void 0!==e.fnWrap).reduce((e,{fnWrap:r})=>r(e,t),e),eM=(e,t)=>([...eI,...t.game.plugins].filter(e=>void 0!==e.setup).forEach(r=>{let n=r.name,a=r.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[n]:{data:a}}}}),e),eA=(e,t)=>([...eI,...t.game.plugins].filter(e=>void 0!==e.api).forEach(r=>{let n=r.name,a=e.plugins[n]||{data:{}},i=r.api({G:e.G,ctx:e.ctx,data:a.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[n]:{...a,api:i}}}}),e),eR=(e,t)=>([...eO,...t.game.plugins,e_].reverse().forEach(r=>{let n=r.name,a=e.plugins[n]||{data:{}};if(r.flush){let n=r.flush({G:e.G,ctx:e.ctx,game:t.game,api:a.api,data:a.data});e={...e,plugins:{...e.plugins,[r.name]:{data:n}}}}else if(r.dangerouslyFlushRawState){let i=(e=r.dangerouslyFlushRawState({state:e,game:t.game,api:a.api,data:a.data})).plugins[n].data;e={...e,plugins:{...e.plugins,[r.name]:{data:i}}}}}),e),ej=(e,t)=>[...eI,...t.game.plugins].filter(e=>void 0!==e.noClient).map(r=>{let n=r.name,a=e.plugins[n];return!!a&&r.noClient({G:e.G,ctx:e.ctx,game:t.game,api:a.api,data:a.data})}).includes(!0),eT=(e,t)=>[...eI,...t.game.plugins].filter(e=>void 0!==e.isInvalid).map(r=>{let{name:n}=r,a=e.plugins[n],i=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:a&&a.data});return!!i&&{plugin:n,message:i}}).find(e=>e)||!1,eB=(e,t)=>{let r=eR(e,t),n=eT(r,t);if(!n)return[r];let{plugin:a,message:i}=n;return eS(`${a} plugin declared action invalid:
${i}`),[e,n]},eL=({G:e,ctx:t,plugins:r={}},{game:n,playerID:a})=>([...eI,...n.plugins].forEach(({name:i,playerView:s})=>{if(!s)return;let{data:o}=r[i]||{data:{}},l=s({G:e,ctx:t,game:n,data:o,playerID:a});r={...r,[i]:{data:l}}}),r);function eW(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function eU(e,t){let r={},n=[],a=null,i={},s={};if(Array.isArray(t)){let e={};t.forEach(t=>e[t]=eF.NULL),r=e}else{if(eW(t),t.next&&(a=t.next),t.revert&&(n=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),void 0!==t.currentPlayer&&eV(r,i,s,e.currentPlayer,t.currentPlayer),void 0!==t.others)for(let n=0;n<e.playOrder.length;n++){let a=e.playOrder[n];a!==e.currentPlayer&&eV(r,i,s,a,t.others)}if(void 0!==t.all)for(let n=0;n<e.playOrder.length;n++)eV(r,i,s,e.playOrder[n],t.all);if(t.value)for(let e in t.value)eV(r,i,s,e,t.value[e]);if(t.minMoves)for(let e in r)void 0===i[e]&&(i[e]=t.minMoves);if(t.maxMoves)for(let e in r)void 0===s[e]&&(s[e]=t.maxMoves)}0===Object.keys(r).length&&(r=null),0===Object.keys(i).length&&(i=null),0===Object.keys(s).length&&(s=null);let o={};for(let e in r)o[e]=0;return{...e,activePlayers:r,_activePlayersMinMoves:i,_activePlayersMaxMoves:s,_activePlayersNumMoves:o,_prevActivePlayers:n,_nextActivePlayers:a}}function ez(e){let{activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:a,_prevActivePlayers:i,_nextActivePlayers:s}=e;if(t&&0===Object.keys(t).length){if(s)e=eU(e,s),{activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:a,_prevActivePlayers:i}=e;else if(i.length>0){let e=i.length-1;({activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:a}=i[e]),i=i.slice(0,e)}else t=null,r=null,n=null}return{...e,activePlayers:t,_activePlayersMinMoves:r,_activePlayersMaxMoves:n,_activePlayersNumMoves:a,_prevActivePlayers:i}}function eV(e,t,r,n,a){("object"!=typeof a||a===eF.NULL)&&(a={stage:a}),void 0!==a.stage&&(eW(a),e[n]=a.stage,a.minMoves&&(t[n]=a.minMoves),a.maxMoves&&(r[n]=a.maxMoves))}function eq(e,t){let{G:r,ctx:n}=e,{numPlayers:a}=n,i={...eD(e),G:r,ctx:n},s=t.order,o=[...Array.from({length:a})].map((e,t)=>t+"");void 0!==s.playOrder&&(o=s.playOrder(i));let l=s.first(i),u=typeof l;"number"!==u&&eS(`invalid value returned by turn.order.first — expected number got ${u} “${l}”.`);let c=o[l]+"";return eU(n={...n,currentPlayer:c,playOrderPos:l,playOrder:o},t.activePlayers||{})}function eG(e,t,r,n){let a=r.order,{G:i,ctx:s}=e,o=s.playOrderPos,l=!1;if(n&&!0!==n)"object"!=typeof n&&eS(`invalid argument to endTurn: ${n}`),Object.keys(n).forEach(e=>{switch(e){case"remove":t=s.playOrder[o]+"";break;case"next":o=s.playOrder.indexOf(n.next),t=n.next;break;default:eS(`invalid argument to endTurn: ${e}`)}});else{let r={...eD(e),G:i,ctx:s},n=a.next(r),u=typeof n;(void 0!==n&&"number"!==u&&eS(`invalid value returned by turn.order.next — expected number or undefined got ${u} “${n}”.`),void 0===n)?l=!0:(o=n,t=s.playOrder[o]+"")}return{endPhase:l,ctx:s={...s,playOrderPos:o,currentPlayer:t}}}let e$={DEFAULT:{first:({ctx:e})=>0===e.turn?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},RESET:{first:()=>0,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},CONTINUE:{first:({ctx:e})=>e.playOrderPos,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},ONCE:{first:()=>0,next:({ctx:e})=>{if(e.playOrderPos<e.playOrder.length-1)return e.playOrderPos+1}},CUSTOM:e=>({playOrder:()=>e,first:()=>0,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}),CUSTOM_FROM:e=>({playOrder:({G:t})=>t[e],first:()=>0,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length})},eF={NULL:null};eF.NULL,eF.NULL,eF.NULL,eF.NULL},61762:(e,t)=>{"use strict";t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var n={},i=e.split(a),s=(t||{}).decode||r,o=0;o<i.length;o++){var l=i[o],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),d=l.substr(++u,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==n[c]&&(n[c]=function(e,t){try{return t(e)}catch(t){return e}}(d,s))}}return n},t.serialize=function(e,t,r){var a=r||{},s=a.encode||n;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var o=s(t);if(o&&!i.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=a.maxAge){var u=a.maxAge-0;if(isNaN(u))throw Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(u)}if(a.domain){if(!i.test(a.domain))throw TypeError("option domain is invalid");l+="; Domain="+a.domain}if(a.path){if(!i.test(a.path))throw TypeError("option path is invalid");l+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(l+="; HttpOnly"),a.secure&&(l+="; Secure"),a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;default:throw TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,n=encodeURIComponent,a=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},84126:e=>{var t,r,n=Object.prototype,a=Function.prototype.toString,i=n.hasOwnProperty,s=a.call(Object),o=n.toString,l=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!(e&&"object"==typeof e)||"[object Object]"!=o.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=l(e);if(null===t)return!0;var r=i.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&a.call(r)==s}},97014:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(55634);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:d,...h}=e;return(0,n.createElement)("svg",{ref:t,...s,width:a,height:a,stroke:r,strokeWidth:l?24*Number(o)/Number(a):o,className:i("lucide",u),...h},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:l,...u}=r;return(0,n.createElement)(o,{ref:s,iconNode:t,className:i("lucide-".concat(a(e)),l),...u})});return r.displayName="".concat(e),r}},33636:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(97014).A)("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]])},64248:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(97014).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6993:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(97014).A)("ShieldHalf",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 22V2",key:"zs6s6o"}]])},14461:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(97014).A)("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]])},9148:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(97014).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},16786:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(97014).A)("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]])},76130:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(97014).A)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]])},9029:(e,t,r)=>{"use strict";var n=r(39537);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},81321:e=>{"use strict";var t=Object.assign.bind(Object);e.exports=t,e.exports.default=e.exports},6317:(e,t,r)=>{var n=r(54819);"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//"),({189:function(){!function(e,t){"use strict";if(!e.setImmediate){var r,a,i,s,o,l=1,u={},c=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);(h=h&&h.setTimeout?h:e,"[object process]"===({}).toString.call(e.process))?o=function(e){n.nextTick(function(){f(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(r="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&f(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),o=function(t){e.postMessage(r+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},o=function(e){i.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(s=d.documentElement,o=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):o=function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=Function(""+e));for(var t=Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return u[l]=n,o(l),l++},h.clearImmediate=p}function p(e){delete u[e]}function f(e){if(c)setTimeout(f,0,e);else{var r=u[e];if(r){c=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)}})[189](),e.exports={}},95471:(e,t,r)=>{"use strict";var n=r(79356);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,i,s){if(s!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},22885:(e,t,r)=>{e.exports=r(95471)()},79356:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},63357:(e,t,r)=>{"use strict";var n=r(54819),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(r(61762)),s=o(r(81321));function o(e){return e&&e.__esModule?e:{default:e}}var l="undefined"==typeof document||void 0!==n&&n.env&&!1,u={},c=void 0;function d(){return c&&!c.headersSent}function h(e){u=e?i.default.parse(e):{}}t.Ay={setRawCookie:h,load:function(e,t){var r=l?u:i.default.parse(document.cookie),n=r&&r[e];if(void 0===t&&(t=!n||"{"!==n[0]&&"["!==n[0]),!t)try{n=JSON.parse(n)}catch(e){}return n},loadAll:function(e){var t=l?u:i.default.parse(document.cookie);if(void 0===e&&(e=!t||"{"!==t[0]&&"["!==t[0]),!e)try{t=JSON.parse(t)}catch(e){}return t},select:function(e){var t=l?u:i.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(r,n){if(!e.test(n))return r;var a={};return a[n]=t[n],(0,s.default)({},r,a)},{}):t:{}},save:function(e,t,r){u[e]=t,(void 0===t?"undefined":a(t))==="object"&&(u[e]=JSON.stringify(t)),l||(document.cookie=i.default.serialize(e,u[e],r)),d()&&c.cookie&&c.cookie(e,t,r)},remove:function(e,t){delete u[e],t=void 0===t?{}:"string"==typeof t?{path:t}:(0,s.default)({},t),"undefined"!=typeof document&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=i.default.serialize(e,"",t)),d()&&c.clearCookie&&c.clearCookie(e,t)},plugToRequest:function(e,t){return e.cookie?u=e.cookie:e.cookies?u=e.cookies:e.headers&&e.headers.cookie?h(e.headers.cookie):u={},c=t,function(){c=null,u={}}}}},86997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffAny=t.diffObjects=t.diffArrays=t.intersection=t.subtract=t.isDestructive=void 0;var n=r(8898);function a(e,t){var r={};for(var a in e)n.hasOwnProperty.call(e,a)&&void 0!==e[a]&&(r[a]=1);for(var i in t)n.hasOwnProperty.call(t,i)&&void 0!==t[i]&&delete r[i];return Object.keys(r)}function i(e){for(var t=e.length,r={},a=0;a<t;a++){var i=e[a];for(var s in i)n.hasOwnProperty.call(i,s)&&void 0!==i[s]&&(r[s]=(r[s]||0)+1)}for(var s in r)r[s]<t&&delete r[s];return Object.keys(r)}function s(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function o(e,t,r,n){void 0===n&&(n=u);var a={"0,0":{operations:[],cost:0}},i=isNaN(e.length)||e.length<=0?0:e.length;return(function i(o,l){var u="".concat(o,",").concat(l),c=a[u];if(void 0===c){if(o>0&&l>0&&!n(e[o-1],t[l-1],r.add(String(o-1))).length)c=i(o-1,l-1);else{var d=[];if(o>0){var h=i(o-1,l);d.push(s(h,{op:"remove",index:o-1}))}if(l>0){var p=i(o,l-1),f={op:"add",index:o-1,value:t[l-1]};d.push(s(p,f))}if(o>0&&l>0){var m=i(o-1,l-1),y={op:"replace",index:o-1,original:e[o-1],value:t[l-1]};d.push(s(m,y))}c=d.sort(function(e,t){return e.cost-t.cost})[0]}a[u]=c}return c})(i,isNaN(t.length)||t.length<=0?0:t.length).operations.reduce(function(e,t){var a=e[0],s=e[1];if("add"===t.op){var o=t.index+1+s,l=o<i+s?String(o):"-",u={op:t.op,path:r.add(l).toString(),value:t.value};return[a.concat(u),s+1]}if("remove"===t.op){var u={op:t.op,path:r.add(String(t.index+s)).toString()};return[a.concat(u),s-1]}var c=r.add(String(t.index+s)),d=n(t.original,t.value,c);return[a.concat.apply(a,d),s]},[[],0])[0]}function l(e,t,r,n){void 0===n&&(n=u);var s=[];return a(e,t).forEach(function(e){s.push({op:"remove",path:r.add(e).toString()})}),a(t,e).forEach(function(e){s.push({op:"add",path:r.add(e).toString(),value:t[e]})}),i([e,t]).forEach(function(a){s.push.apply(s,n(e[a],t[a],r.add(a)))}),s}function u(e,t,r,a){if(void 0===a&&(a=u),e===t)return[];var i=(0,n.objectType)(e),s=(0,n.objectType)(t);return"array"==i&&"array"==s?o(e,t,r,a):"object"==i&&"object"==s?l(e,t,r,a):[{op:"replace",path:r.toString(),value:t}]}t.isDestructive=function(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t},t.subtract=a,t.intersection=i,t.diffArrays=o,t.diffObjects=l,t.diffAny=u},40674:(e,t,r)=>{"use strict";t.B8=t.X6=void 0;var n=r(68843),a=r(31864),i=r(86997);t.X6=function(e,t){return t.map(function(t){return(0,a.apply)(e,t)})},t.B8=function(e,t,r){var a=new n.Pointer;return(r?function e(t,n,a){var s=r(t,n,a);return Array.isArray(s)?s:(0,i.diffAny)(t,n,a,e)}:i.diffAny)(e,t,a)}},31864:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.InvalidOperationError=t.test=t.copy=t.move=t.replace=t.remove=t.add=t.TestError=t.MissingError=void 0;var i=r(68843),s=r(8898),o=r(86997),l=function(e){function t(t){var r=e.call(this,"Value required at path: ".concat(t))||this;return r.path=t,r.name="MissingError",r}return a(t,e),t}(Error);t.MissingError=l;var u=function(e){function t(t,r){var n=e.call(this,"Test failed: ".concat(t," != ").concat(r))||this;return n.actual=t,n.expected=r,n.name="TestError",n}return a(t,e),t}(Error);function c(e,t,r){if(Array.isArray(e)){if("-"==t)e.push(r);else{var n=parseInt(t,10);e.splice(n,0,r)}}else e[t]=r}function d(e,t){if(Array.isArray(e)){var r=parseInt(t,10);e.splice(r,1)}else delete e[t]}function h(e,t){var r=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new l(t.path):(c(r.parent,r.key,(0,s.clone)(t.value)),null)}function p(e,t){var r=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.value?new l(t.path):(d(r.parent,r.key),null)}function f(e,t){var r=i.Pointer.fromJSON(t.path).evaluate(e);if(null===r.parent)return new l(t.path);if(Array.isArray(r.parent)){if(parseInt(r.key,10)>=r.parent.length)return new l(t.path)}else if(void 0===r.value)return new l(t.path);return r.parent[r.key]=(0,s.clone)(t.value),null}function m(e,t){var r=i.Pointer.fromJSON(t.from).evaluate(e);if(void 0===r.value)return new l(t.from);var n=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new l(t.path):(d(r.parent,r.key),c(n.parent,n.key,r.value),null)}function y(e,t){var r=i.Pointer.fromJSON(t.from).evaluate(e);if(void 0===r.value)return new l(t.from);var n=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new l(t.path):(c(n.parent,n.key,(0,s.clone)(r.value)),null)}function g(e,t){var r=i.Pointer.fromJSON(t.path).evaluate(e);return(0,o.diffAny)(r.value,t.value,new i.Pointer).length?new u(r.value,t.value):null}t.TestError=u,t.add=h,t.remove=p,t.replace=f,t.move=m,t.copy=y,t.test=g;var v=function(e){function t(t){var r=e.call(this,"Invalid operation: ".concat(t.op))||this;return r.operation=t,r.name="InvalidOperationError",r}return a(t,e),t}(Error);t.InvalidOperationError=v,t.apply=function(e,t){switch(t.op){case"add":return h(e,t);case"remove":return p(e,t);case"replace":return f(e,t);case"move":return m(e,t);case"copy":return y(e,t);case"test":return g(e,t)}return new v(t)}},68843:(e,t)=>{"use strict";function r(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=t.escapeToken=t.unescapeToken=void 0,t.unescapeToken=r,t.escapeToken=n;var a=function(){function e(e){void 0===e&&(e=[""]),this.tokens=e}return e.fromJSON=function(t){var n=t.split("/").map(r);if(""!==n[0])throw Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(n).join("/")},e.prototype.evaluate=function(e){for(var t=null,r="",n=e,a=1,i=this.tokens.length;a<i;a++)t=n,"__proto__"!=(r=this.tokens[a])&&"constructor"!=r&&"prototype"!=r&&(n=(t||{})[r]);return{parent:t,key:r,value:n}},e.prototype.get=function(e){return this.evaluate(e).value},e.prototype.set=function(e,t){var r=this.evaluate(e);r.parent&&(r.parent[r.key]=t)},e.prototype.push=function(e){this.tokens.push(e)},e.prototype.add=function(t){return new e(this.tokens.concat(String(t)))},e}();t.Pointer=a},8898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.objectType=t.hasOwnProperty=void 0,t.hasOwnProperty=Object.prototype.hasOwnProperty,t.objectType=function(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e},t.clone=function e(r){if(!(null!=r&&"object"==typeof r))return r;if(r.constructor==Array){for(var n=r.length,a=Array(n),i=0;i<n;i++)a[i]=e(r[i]);return a}if(r.constructor==Date)return new Date(+r);var s={};for(var o in r)t.hasOwnProperty.call(r,o)&&(s[o]=e(r[o]));return s}},22882:(e,t,r)=>{"use strict";r.d(t,{e2v:()=>h,ZpM:()=>D,Sc0:()=>eh,pde:()=>ew,aFV:()=>eY,cwr:()=>eP,$mQ:()=>eL,jlY:()=>eU,y$y:()=>ep.o});var n=r(13613),a=r(66749),i=r(27042),s=r(21396),o=r(55634),l=r(72994),u=r(43406),c=r(5082),d=(0,i.Rf)((e,t)=>{let{Component:r,domRef:d,context:h,children:p,classNames:f,getButtonGroupProps:m}=function(e){var t,r;let u=(0,a.o)(),[c,d]=(0,i.rE)(e,n.G.variantKeys),{ref:h,as:p,children:f,color:m="default",size:y="md",variant:g="solid",radius:v,isDisabled:b=!1,isIconOnly:x=!1,disableRipple:w=null!=(t=null==u?void 0:u.disableRipple)&&t,disableAnimation:_=null!=(r=null==u?void 0:u.disableAnimation)&&r,className:E,...k}=c,P=(0,s.zD)(h),S=(0,o.useMemo)(()=>(0,n.G)({...d,className:E}),[(0,l.t6)(d),E]);return{Component:p||"div",children:f,domRef:P,context:(0,o.useMemo)(()=>({size:y,color:m,variant:g,radius:v,isIconOnly:x,isDisabled:b,disableAnimation:_,disableRipple:w,fullWidth:!!(null==e?void 0:e.fullWidth)}),[y,m,g,v,b,x,_,w,null==e?void 0:e.fullWidth]),classNames:S,getButtonGroupProps:(0,o.useCallback)(()=>({role:"group",...k}),[k])}}({...e,ref:t});return(0,c.jsx)(u.l,{value:h,children:(0,c.jsx)(r,{ref:d,className:f,...m(),children:p})})});d.displayName="NextUI.ButtonGroup";var h=d,p=r(16314),[f,m]=(0,p.q)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"}),y=r(28523),g=r(88509),v=(0,y.tv)({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-none","text-foreground","box-border","bg-content1",...g.zb],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),b=r(20418),x=r(1069),w=r(60040),_=r(18027),E=r(68091),k=r(10050),P=r(85794),S=r(66028),O=r(89968),I=r(8918),C=(0,i.Rf)((e,t)=>{let{children:r,context:n,Component:u,isPressable:d,disableAnimation:h,disableRipple:p,getCardProps:m,getRippleProps:y}=function(e){var t,r,n,u;let c=(0,a.o)(),[d,h]=(0,i.rE)(e,v.variantKeys),{ref:p,as:f,children:m,onClick:y,onPress:g,autoFocus:I,className:C,classNames:D,allowTextSelectionOnPress:N=!0,...M}=d,A=(0,s.zD)(p),R=f||(e.isPressable?"button":"div"),j="string"==typeof R,T=null!=(r=null!=(t=e.disableAnimation)?t:null==c?void 0:c.disableAnimation)&&r,B=null!=(u=null!=(n=e.disableRipple)?n:null==c?void 0:c.disableRipple)&&u,L=(0,k.$)(null==D?void 0:D.base,C),{onClear:W,onPress:U,ripples:z}=(0,O.k)(),V=(0,o.useCallback)(e=>{B||T||!A.current||U(e)},[B,T,A,U]),{buttonProps:q,isPressed:G}=(0,E.l)({onPress:(0,b.c)(g,V),elementType:f,isDisabled:!e.isPressable,onClick:y,allowTextSelectionOnPress:N,...M},A),{hoverProps:$,isHovered:F}=(0,_.M)({isDisabled:!e.isHoverable,...M}),{isFocusVisible:H,isFocused:J,focusProps:K}=(0,w.o)({autoFocus:I}),Y=(0,o.useMemo)(()=>v({...h,disableAnimation:T}),[(0,l.t6)(h),T]),X=(0,o.useMemo)(()=>({slots:Y,classNames:D,disableAnimation:T,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[Y,D,e.isDisabled,e.isFooterBlurred,T,e.fullWidth]),Q=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:A,className:Y.base({class:L}),tabIndex:e.isPressable?0:-1,"data-hover":(0,P.sE)(F),"data-pressed":(0,P.sE)(G),"data-focus":(0,P.sE)(J),"data-focus-visible":(0,P.sE)(H),"data-disabled":(0,P.sE)(e.isDisabled),...(0,x.v)(e.isPressable?{...q,...K,role:"button"}:{},e.isHoverable?$:{},(0,S.$)(M,{enabled:j}),(0,S.$)(t))}},[A,Y,L,j,e.isPressable,e.isHoverable,e.isDisabled,F,G,H,q,K,$,M]),Z=(0,o.useCallback)(()=>({ripples:z,onClear:W}),[z,W]);return{context:X,domRef:A,Component:R,classNames:D,children:m,isHovered:F,isPressed:G,disableAnimation:T,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:B,handlePress:V,isFocusVisible:H,getCardProps:Q,getRippleProps:Z}}({...e,ref:t});return(0,c.jsxs)(u,{...m(),children:[(0,c.jsx)(f,{value:n,children:r}),d&&!h&&!p&&(0,c.jsx)(I.j,{...y()})]})});C.displayName="NextUI.Card";var D=C;function N(e){let{isSelected:t,disableAnimation:r,...n}=e;return(0,c.jsx)("svg",{"aria-hidden":"true",role:"presentation",viewBox:"0 0 17 18",...n,children:(0,c.jsx)("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,style:!r&&t?{transition:"stroke-dashoffset 250ms linear 0.2s"}:{}})})}function M(e){let{isSelected:t,disableAnimation:r,...n}=e;return(0,c.jsx)("svg",{stroke:"currentColor",strokeWidth:3,viewBox:"0 0 24 24",...n,children:(0,c.jsx)("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function A(e){let{isIndeterminate:t,...r}=e;return(0,c.jsx)(t?M:N,{...r})}var[R,j]=(0,p.q)({name:"CheckboxGroupContext",strict:!1}),T=r(38577);function B(e={}){let{isReadOnly:t}=e,[r,n]=(0,T.P)(e.isSelected,e.defaultSelected||!1,e.onChange);return{isSelected:r,setSelected:function(e){t||n(e)},toggle:function(){t||n(!r)}}}var L=(0,y.tv)({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer tap-highlight-transparent p-2 -m-2 select-none",wrapper:["relative","inline-flex","items-center","justify-center","flex-shrink-0","overflow-hidden","before:content-['']","before:absolute","before:inset-0","before:border-solid","before:border-2","before:box-border","before:border-default","after:content-['']","after:absolute","after:inset-0","after:scale-50","after:opacity-0","after:origin-center","group-data-[selected=true]:after:scale-100","group-data-[selected=true]:after:opacity-100","group-data-[hover=true]:before:bg-default-100",...g.wA],hiddenInput:g.n3,icon:"z-10 w-4 h-3 opacity-0 group-data-[selected=true]:opacity-100 pointer-events-none",label:"relative text-foreground select-none"},variants:{color:{default:{wrapper:"after:bg-default after:text-default-foreground text-default-foreground"},primary:{wrapper:"after:bg-primary after:text-primary-foreground text-primary-foreground"},secondary:{wrapper:"after:bg-secondary after:text-secondary-foreground text-secondary-foreground"},success:{wrapper:"after:bg-success after:text-success-foreground text-success-foreground"},warning:{wrapper:"after:bg-warning after:text-warning-foreground text-warning-foreground"},danger:{wrapper:"after:bg-danger after:text-danger-foreground text-danger-foreground"}},size:{sm:{wrapper:["w-4 h-4 me-2","rounded-[calc(theme(borderRadius.medium)*0.5)]","before:rounded-[calc(theme(borderRadius.medium)*0.5)]","after:rounded-[calc(theme(borderRadius.medium)*0.5)]"],label:"text-small",icon:"w-3 h-2"},md:{wrapper:["w-5 h-5 me-2","rounded-[calc(theme(borderRadius.medium)*0.6)]","before:rounded-[calc(theme(borderRadius.medium)*0.6)]","after:rounded-[calc(theme(borderRadius.medium)*0.6)]"],label:"text-medium",icon:"w-4 h-3"},lg:{wrapper:["w-6 h-6 me-2","rounded-[calc(theme(borderRadius.medium)*0.7)]","before:rounded-[calc(theme(borderRadius.medium)*0.7)]","after:rounded-[calc(theme(borderRadius.medium)*0.7)]"],label:"text-large",icon:"w-5 h-4"}},radius:{none:{wrapper:"rounded-none before:rounded-none after:rounded-none"},sm:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.5)]","before:rounded-[calc(theme(borderRadius.medium)*0.5)]","after:rounded-[calc(theme(borderRadius.medium)*0.5)]"]},md:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.6)]","before:rounded-[calc(theme(borderRadius.medium)*0.6)]","after:rounded-[calc(theme(borderRadius.medium)*0.6)]"]},lg:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.7)]","before:rounded-[calc(theme(borderRadius.medium)*0.7)]","after:rounded-[calc(theme(borderRadius.medium)*0.7)]"]},full:{wrapper:"rounded-full before:rounded-full after:rounded-full"}},lineThrough:{true:{label:["inline-flex","items-center","justify-center","before:content-['']","before:absolute","before:bg-foreground","before:w-0","before:h-0.5","group-data-[selected=true]:opacity-60","group-data-[selected=true]:before:w-full"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isInvalid:{true:{wrapper:"before:border-danger",label:"text-danger"}},disableAnimation:{true:{wrapper:"transition-none",icon:"transition-none",label:"transition-none"},false:{wrapper:["before:transition-colors","group-data-[pressed=true]:scale-95","transition-transform","after:transition-transform-opacity","after:!ease-linear","after:!duration-200","motion-reduce:transition-none"],icon:"transition-opacity motion-reduce:transition-none",label:"transition-colors-opacity before:transition-width motion-reduce:transition-none"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1,lineThrough:!1}});(0,y.tv)({slots:{base:"relative flex flex-col gap-2",label:"relative text-medium text-foreground-500",wrapper:"flex flex-col flex-wrap gap-2 data-[orientation=horizontal]:flex-row",description:"text-small text-foreground-400",errorMessage:"text-small text-danger"},variants:{isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5"}},isInvalid:{true:{description:"text-danger"}},disableAnimation:{true:{},false:{description:"transition-colors !duration-150 motion-reduce:transition-none"}}},defaultVariants:{isInvalid:!1,isRequired:!1}});var W=r(68494),U=r(53933),z=(...e)=>{let t=" ";for(let r of e)if("string"==typeof r&&r.length>0){t=r;break}return t};let V={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},q={...V,customError:!0,valid:!1},G={isInvalid:!1,validationDetails:V,validationErrors:[]},$=(0,o.createContext)({}),F="__formValidationState"+Date.now();function H(e){if(e[F]){let{realtimeValidation:t,displayValidation:r,updateValidation:n,resetValidation:a,commitValidation:i}=e[F];return{realtimeValidation:t,displayValidation:r,updateValidation:n,resetValidation:a,commitValidation:i}}return function(e){let{isInvalid:t,validationState:r,name:n,value:a,builtinValidation:i,validate:s,validationBehavior:l="aria"}=e;r&&(t||(t="invalid"===r));let u=void 0!==t?{isInvalid:t,validationErrors:[],validationDetails:q}:null,c=(0,o.useMemo)(()=>s&&null!=a?K(function(e,t){if("function"==typeof e){let r=e(t);if(r&&"boolean"!=typeof r)return J(r)}return[]}(s,a)):null,[s,a]);(null==i?void 0:i.validationDetails.valid)&&(i=void 0);let d=(0,o.useContext)($),h=(0,o.useMemo)(()=>n?Array.isArray(n)?n.flatMap(e=>J(d[e])):J(d[n]):[],[d,n]),[p,f]=(0,o.useState)(d),[m,y]=(0,o.useState)(!1);d!==p&&(f(d),y(!1));let g=(0,o.useMemo)(()=>K(m?[]:h),[m,h]),v=(0,o.useRef)(G),[b,x]=(0,o.useState)(G),w=(0,o.useRef)(G),[_,E]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!_)return;E(!1);let e=c||i||v.current;Y(e,w.current)||(w.current=e,x(e))}),{realtimeValidation:u||g||c||i||G,displayValidation:"native"===l?u||g||b:u||g||c||i||b,updateValidation(e){"aria"!==l||Y(b,e)?v.current=e:x(e)},resetValidation(){Y(G,w.current)||(w.current=G,x(G)),"native"===l&&E(!1),y(!0)},commitValidation(){"native"===l&&E(!0),y(!0)}}}(e)}function J(e){return e?Array.isArray(e)?e:[e]:[]}function K(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:q}:null}function Y(e,t){return e===t||!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((e,r)=>e===t.validationErrors[r])&&Object.entries(e.validationDetails).every(([e,r])=>t.validationDetails[e]===r)}var X=r(34631),Q=r(94369),Z=r(55403);function ee(e,t,r){let{validationBehavior:n,focus:a}=e;(0,Q.N)(()=>{if("native"===n&&(null==r?void 0:r.current)){var e;let n,a=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";r.current.setCustomValidity(a),r.current.hasAttribute("title")||(r.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation({isInvalid:!(e=r.current).validity.valid,validationDetails:{badInput:(n=e.validity).badInput,customError:n.customError,patternMismatch:n.patternMismatch,rangeOverflow:n.rangeOverflow,rangeUnderflow:n.rangeUnderflow,stepMismatch:n.stepMismatch,tooLong:n.tooLong,tooShort:n.tooShort,typeMismatch:n.typeMismatch,valueMissing:n.valueMissing,valid:n.valid},validationErrors:e.validationMessage?[e.validationMessage]:[]})}});let i=(0,Z.J)(()=>{t.resetValidation()}),s=(0,Z.J)(e=>{var n,i;t.displayValidation.isInvalid||t.commitValidation();let s=null==r?void 0:null===(n=r.current)||void 0===n?void 0:n.form;!e.defaultPrevented&&r&&s&&function(e){for(let t=0;t<e.elements.length;t++){let r=e.elements[t];if(!r.validity.valid)return r}return null}(s)===r.current&&(a?a():null===(i=r.current)||void 0===i||i.focus(),(0,X.Cl)("keyboard")),e.preventDefault()}),l=(0,Z.J)(()=>{t.commitValidation()});(0,o.useEffect)(()=>{let e=null==r?void 0:r.current;if(!e)return;let t=e.form;return e.addEventListener("invalid",s),e.addEventListener("change",l),null==t||t.addEventListener("reset",i),()=>{e.removeEventListener("invalid",s),e.removeEventListener("change",l),null==t||t.removeEventListener("reset",i)}},[r,s,l,i,n])}var et=r(18803),er=r(73661);function en(e,t,r){let n=(0,o.useRef)(t),a=(0,Z.J)(()=>{r&&r(n.current)});(0,o.useEffect)(()=>{var t;let r=null==e?void 0:null===(t=e.current)||void 0===t?void 0:t.form;return null==r||r.addEventListener("reset",a),()=>{null==r||r.removeEventListener("reset",a)}},[e,a])}var ea=r(75186);function ei(e,t,r){let n=H({...e,value:t.isSelected}),{isInvalid:a,validationErrors:i,validationDetails:s}=n.displayValidation,{labelProps:l,inputProps:u,isSelected:c,isPressed:d,isDisabled:h,isReadOnly:p}=function(e,t,r){let{isDisabled:n=!1,isReadOnly:a=!1,value:i,name:s,children:o,"aria-label":l,"aria-labelledby":u,validationState:c="valid",isInvalid:d}=e;null!=o||null!=l||null!=u||console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:h,isPressed:p}=(0,et.d)({isDisabled:n}),{pressProps:f,isPressed:m}=(0,et.d)({isDisabled:n||a,onPress(){t.toggle()}}),{focusableProps:y}=(0,ea.W)(e,r),g=(0,x.v)(h,y),v=(0,er.$)(e,{labelable:!0});return en(r,t.isSelected,t.setSelected),{labelProps:(0,x.v)(f,{onClick:e=>e.preventDefault()}),inputProps:(0,x.v)(v,{"aria-invalid":d||"invalid"===c||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":a||void 0,onChange:e=>{e.stopPropagation(),t.setSelected(e.target.checked)},disabled:n,...null==i?{}:{value:i},name:s,type:"checkbox",...g}),isSelected:t.isSelected,isPressed:p||m,isDisabled:n,isReadOnly:a,isInvalid:d||"invalid"===c}}({...e,isInvalid:a},t,r);ee(e,n,r);let{isIndeterminate:f,isRequired:m,validationBehavior:y="aria"}=e;(0,o.useEffect)(()=>{r.current&&(r.current.indeterminate=!!f)});let{pressProps:g}=(0,et.d)({isDisabled:h||p,onPress(){let{[F]:t}=e,{commitValidation:r}=t||n;r()}});return{labelProps:(0,x.v)(l,g),inputProps:{...u,checked:c,"aria-required":m&&"aria"===y||void 0,required:m&&"native"===y},isSelected:c,isPressed:d,isDisabled:h,isReadOnly:p,isInvalid:a,validationErrors:i,validationDetails:s}}let es=new WeakMap;var eo=r(7180),el=Symbol("default");function eu(e,t){let r=(0,o.useContext)(e);if(null===t)return null;if(r&&"object"==typeof r&&"slots"in r&&r.slots){let e=new Intl.ListFormat().format(Object.keys(r.slots).map(e=>'"'.concat(e,'"')));if(!t&&!r.slots[el])throw Error("A slot prop is required. Valid slot names are ".concat(e,"."));let n=t||el;if(!r.slots[n])throw Error('Invalid slot "'.concat(t,'". Valid slot names are ').concat(e,"."));return r.slots[n]}return r}var ec=(0,o.createContext)(null),ed=(0,i.Rf)((e,t)=>{let{Component:r,children:n,icon:i=(0,c.jsx)(A,{}),getBaseProps:s,getWrapperProps:l,getInputProps:u,getIconProps:d,getLabelProps:h}=function(){var e,t,r,n,i,s,l,u;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=(0,a.o)(),h=j(),{validationBehavior:p}=eu(ec)||{},f=!!h,{as:m,ref:y,value:g="",children:v,icon:E,name:S,isRequired:O,isReadOnly:I=!1,autoFocus:C=!1,isSelected:D,size:N=null!=(e=null==h?void 0:h.size)?e:"md",color:M=null!=(t=null==h?void 0:h.color)?t:"primary",radius:A=null==h?void 0:h.radius,lineThrough:R=null!=(r=null==h?void 0:h.lineThrough)&&r,isDisabled:T=null!=(n=null==h?void 0:h.isDisabled)&&n,disableAnimation:V=null!=(s=null!=(i=null==h?void 0:h.disableAnimation)?i:null==d?void 0:d.disableAnimation)&&s,validationState:q,isInvalid:$=q?"invalid"===q:null!=(l=null==h?void 0:h.isInvalid)&&l,isIndeterminate:J=!1,validationBehavior:K=f?h.validationBehavior:null!=(u=null!=p?p:null==d?void 0:d.validationBehavior)?u:"native",defaultSelected:Y,classNames:X,className:Q,onValueChange:Z,validate:ee,...et}=c;h&&P.gt&&(D&&(0,U.R)("The Checkbox.Group is being used, `isSelected` will be ignored. Use the `value` of the Checkbox.Group instead.","Checkbox"),Y&&(0,U.R)("The Checkbox.Group is being used, `defaultSelected` will be ignored. Use the `defaultValue` of the Checkbox.Group instead.","Checkbox"));let er=(0,o.useRef)(null),en=(0,o.useRef)(null),ea=c.onChange;f&&(ea=(0,b.c)(()=>{h.groupState.resetValidation()},ea));let el=(0,o.useId)(),ed=(0,o.useMemo)(()=>({name:S,value:g,children:v,autoFocus:C,defaultSelected:Y,isIndeterminate:J,isRequired:O,isInvalid:$,isSelected:D,isDisabled:T,isReadOnly:I,"aria-label":z(et["aria-label"],v),"aria-labelledby":et["aria-labelledby"]||el,onChange:Z}),[S,g,v,C,Y,J,O,$,D,T,I,et["aria-label"],et["aria-labelledby"],el,Z]),eh=B(ed),ep={isInvalid:$,isRequired:O,validate:ee,validationState:q,validationBehavior:K},{inputProps:ef,isSelected:em,isDisabled:ey,isReadOnly:eg,isPressed:ev,isInvalid:eb}=f?function(e,t,r){var n,a;let i=B({isReadOnly:e.isReadOnly||t.isReadOnly,isSelected:t.isSelected(e.value),onChange(r){r?t.addValue(e.value):t.removeValue(e.value),e.onChange&&e.onChange(r)}}),{name:s,descriptionId:l,errorMessageId:u,validationBehavior:c}=es.get(t);c=null!==(n=e.validationBehavior)&&void 0!==n?n:c;let{realtimeValidation:d}=H({...e,value:i.isSelected,name:void 0,validationBehavior:"aria"}),h=(0,o.useRef)(G),p=()=>{t.setInvalid(e.value,d.isInvalid?d:h.current)};(0,o.useEffect)(p);let f=t.realtimeValidation.isInvalid?t.realtimeValidation:d,m="native"===c?t.displayValidation:f,y=ei({...e,isReadOnly:e.isReadOnly||t.isReadOnly,isDisabled:e.isDisabled||t.isDisabled,name:e.name||s,isRequired:null!==(a=e.isRequired)&&void 0!==a?a:t.isRequired,validationBehavior:c,[F]:{realtimeValidation:f,displayValidation:m,resetValidation:t.resetValidation,commitValidation:t.commitValidation,updateValidation(e){h.current=e,p()}}},i,r);return{...y,inputProps:{...y.inputProps,"aria-describedby":[e["aria-describedby"],t.isInvalid?u:null,l].filter(Boolean).join(" ")||void 0}}}({...ed,...ep},h.groupState,en):ei({...ed,...ep},eh,en),ex="invalid"===q||$||eb,ew=!(ey||eg)&&ev,{hoverProps:e_,isHovered:eE}=(0,_.M)({isDisabled:ef.disabled}),{focusProps:ek,isFocused:eP,isFocusVisible:eS}=(0,w.o)({autoFocus:ef.autoFocus}),eO=(0,o.useMemo)(()=>L({color:M,size:N,radius:A,isInvalid:ex,lineThrough:R,isDisabled:ey,disableAnimation:V}),[M,N,A,ex,R,ey,V]);(0,W.U)(()=>{if(!en.current)return;let e=!!en.current.checked;eh.setSelected(e)},[en.current]);let eI=function(e,t=[]){let r=(0,o.useRef)(e);return(0,W.U)(()=>{r.current=e}),(0,o.useCallback)((...e)=>{var t;return null==(t=r.current)?void 0:t.call(r,...e)},t)}(ea),eC=(0,o.useCallback)(e=>{if(eg||ey){e.preventDefault();return}null==eI||eI(e)},[eg,ey,eI]),eD=(0,k.$)(null==X?void 0:X.base,Q),eN=(0,o.useCallback)(()=>({ref:er,className:eO.base({class:eD}),"data-disabled":(0,P.sE)(ey),"data-selected":(0,P.sE)(em||J),"data-invalid":(0,P.sE)(ex),"data-hover":(0,P.sE)(eE),"data-focus":(0,P.sE)(eP),"data-pressed":(0,P.sE)(ew),"data-readonly":(0,P.sE)(ef.readOnly),"data-focus-visible":(0,P.sE)(eS),"data-indeterminate":(0,P.sE)(J),...(0,x.v)(e_,et)}),[eO,eD,ey,em,J,ex,eE,eP,ew,ef.readOnly,eS,e_,et]),eM=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,"aria-hidden":!0,className:(0,k.$)(eO.wrapper({class:(0,k.$)(null==X?void 0:X.wrapper,null==e?void 0:e.className)}))}},[eO,null==X?void 0:X.wrapper]),eA=(0,o.useCallback)(()=>({ref:(0,eo.P)(en,y),...(0,x.v)(ef,ek),className:eO.hiddenInput({class:null==X?void 0:X.hiddenInput}),onChange:(0,b.c)(ef.onChange,eC)}),[ef,ek,eC,null==X?void 0:X.hiddenInput]),eR=(0,o.useCallback)(()=>({id:el,className:eO.label({class:null==X?void 0:X.label})}),[eO,null==X?void 0:X.label,ey,em,ex]),ej=(0,o.useCallback)(()=>({isSelected:em,isIndeterminate:J,disableAnimation:V,className:eO.icon({class:null==X?void 0:X.icon})}),[eO,null==X?void 0:X.icon,em,J,V]);return{Component:m||"label",icon:E,children:v,isSelected:em,isDisabled:ey,isInvalid:ex,isFocused:eP,isHovered:eE,isFocusVisible:eS,getBaseProps:eN,getWrapperProps:eM,getInputProps:eA,getLabelProps:eR,getIconProps:ej}}({...e,ref:t}),p="function"==typeof i?i(d()):(0,o.cloneElement)(i,d());return(0,c.jsxs)(r,{...s(),children:[(0,c.jsx)("input",{...u()}),(0,c.jsx)("span",{...l(),children:p}),n&&(0,c.jsx)("span",{...h(),children:n})]})});ed.displayName="NextUI.Checkbox";var eh=ed,ep=r(21848),ef=(0,y.tv)({slots:{base:"group flex flex-col data-[hidden=true]:hidden",label:["absolute","z-10","pointer-events-none","origin-top-left","flex-shrink-0","rtl:origin-top-right","subpixel-antialiased","block","text-small","text-foreground-500"],mainWrapper:"h-full",inputWrapper:"relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",innerWrapper:"inline-flex w-full items-center h-full box-border",input:["w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none","data-[has-start-content=true]:ps-1.5","data-[has-end-content=true]:pe-1.5","file:cursor-pointer file:bg-transparent file:border-0","autofill:bg-transparent bg-clip-text"],clearButton:["p-2","-m-2","z-10","absolute","end-3","start-auto","pointer-events-none","appearance-none","outline-none","select-none","opacity-0","hover:!opacity-100","cursor-pointer","active:!opacity-70","rounded-full",...g.zb],helperWrapper:"hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","data-[hover=true]:bg-default-50","group-data-[focus=true]:bg-default-100"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400 focus-within:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{inputWrapper:["border-medium","border-default-200","data-[hover=true]:border-default-400","group-data-[focus=true]:border-default-foreground"]},underlined:{inputWrapper:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","group-data-[focus=true]:after:w-full"],innerWrapper:"pb-1",label:"group-data-[filled-within=true]:text-foreground"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:"text-tiny",inputWrapper:"h-8 min-h-8 px-2 rounded-small",input:"text-small",clearButton:"text-medium"},md:{inputWrapper:"h-10 min-h-10 rounded-medium",input:"text-small",clearButton:"text-large"},lg:{label:"text-medium",inputWrapper:"h-12 min-h-12 rounded-large",input:"text-medium",clearButton:"text-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{mainWrapper:"flex flex-col"},"outside-left":{base:"flex-row items-center flex-nowrap data-[has-helper=true]:items-start",inputWrapper:"flex-1",mainWrapper:"flex flex-col",label:"relative text-foreground pe-2 ps-2 pointer-events-auto"},inside:{label:"cursor-text",inputWrapper:"flex-col items-start justify-center gap-0",innerWrapper:"group-data-[has-label=true]:items-end"}},fullWidth:{true:{base:"w-full"},false:{}},isClearable:{true:{input:"peer pe-6 input-search-cancel-button-none",clearButton:["peer-data-[filled=true]:pointer-events-auto","peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block","peer-data-[filled=true]:scale-100"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",input:"!placeholder:text-danger !text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ms-0.5"}},isMultiline:{true:{label:"relative",inputWrapper:"!h-auto",innerWrapper:"items-start group-data-[has-label=true]:items-start",input:"resize-none data-[hide-scroll=true]:scrollbar-hide",clearButton:"absolute top-2 right-2 rtl:right-auto rtl:left-2 z-10"}},disableAnimation:{true:{input:"transition-none",inputWrapper:"transition-none",label:"transition-none"},false:{inputWrapper:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","!duration-200","!ease-out","motion-reduce:transition-none","transition-[transform,color,left,opacity]"],clearButton:["scale-90","ease-out","duration-150","transition-[opacity,transform]","motion-reduce:transition-none","motion-reduce:scale-100"]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,labelPlacement:"inside",isDisabled:!1,isMultiline:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{inputWrapper:["bg-primary-100","data-[hover=true]:bg-primary-50","text-primary","group-data-[focus=true]:bg-primary-50","placeholder:text-primary"],input:"placeholder:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{inputWrapper:["bg-secondary-100","text-secondary","data-[hover=true]:bg-secondary-50","group-data-[focus=true]:bg-secondary-50","placeholder:text-secondary"],input:"placeholder:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{inputWrapper:["bg-success-100","text-success-600","dark:text-success","placeholder:text-success-600","dark:placeholder:text-success","data-[hover=true]:bg-success-50","group-data-[focus=true]:bg-success-50"],input:"placeholder:text-success-600 dark:placeholder:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{inputWrapper:["bg-warning-100","text-warning-600","dark:text-warning","placeholder:text-warning-600","dark:placeholder:text-warning","data-[hover=true]:bg-warning-50","group-data-[focus=true]:bg-warning-50"],input:"placeholder:text-warning-600 dark:placeholder:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{inputWrapper:["bg-danger-100","text-danger","dark:text-danger-500","placeholder:text-danger","dark:placeholder:text-danger-500","data-[hover=true]:bg-danger-50","group-data-[focus=true]:bg-danger-50"],input:"placeholder:text-danger dark:placeholder:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{label:"text-primary",inputWrapper:"data-[hover=true]:border-primary focus-within:border-primary"}},{variant:"faded",color:"secondary",class:{label:"text-secondary",inputWrapper:"data-[hover=true]:border-secondary focus-within:border-secondary"}},{variant:"faded",color:"success",class:{label:"text-success",inputWrapper:"data-[hover=true]:border-success focus-within:border-success"}},{variant:"faded",color:"warning",class:{label:"text-warning",inputWrapper:"data-[hover=true]:border-warning focus-within:border-warning"}},{variant:"faded",color:"danger",class:{label:"text-danger",inputWrapper:"data-[hover=true]:border-danger focus-within:border-danger"}},{variant:"underlined",color:"default",class:{input:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{inputWrapper:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{inputWrapper:"group-data-[focus=true]:border-primary",label:"text-primary"}},{variant:"bordered",color:"secondary",class:{inputWrapper:"group-data-[focus=true]:border-secondary",label:"text-secondary"}},{variant:"bordered",color:"success",class:{inputWrapper:"group-data-[focus=true]:border-success",label:"text-success"}},{variant:"bordered",color:"warning",class:{inputWrapper:"group-data-[focus=true]:border-warning",label:"text-warning"}},{variant:"bordered",color:"danger",class:{inputWrapper:"group-data-[focus=true]:border-danger",label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled-within=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled-within=true]:text-foreground"}},{radius:"full",size:["sm"],class:{inputWrapper:"px-3"}},{radius:"full",size:"md",class:{inputWrapper:"px-4"}},{radius:"full",size:"lg",class:{inputWrapper:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{inputWrapper:[...g.wA]}},{isInvalid:!0,variant:"flat",class:{inputWrapper:["!bg-danger-50","data-[hover=true]:!bg-danger-100","group-data-[focus=true]:!bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:"!border-danger group-data-[focus=true]:!border-danger"}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:"after:!bg-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{inputWrapper:"h-16 py-2.5 gap-0"}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:"py-1"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled-within=true]:pointer-events-auto"]}},{labelPlacement:"outside",isMultiline:!1,class:{base:"relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled-within=true]:start-0"]}},{labelPlacement:["inside"],class:{label:["group-data-[filled-within=true]:scale-85"]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:"pb-0.5"}},{variant:"underlined",size:"sm",class:{innerWrapper:"pb-1"}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:"pb-1.5"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small"}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"lg",isMultiline:!1,class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:["start-2","text-tiny","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]"}},{labelPlacement:"outside",size:"md",isMultiline:!1,class:{label:["start-3","end-auto","text-small","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]"}},{labelPlacement:"outside",size:"lg",isMultiline:!1,class:{label:["start-3","end-auto","text-medium","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]"}},{labelPlacement:"outside-left",size:"sm",class:{label:"group-data-[has-helper=true]:pt-2"}},{labelPlacement:"outside-left",size:"md",class:{label:"group-data-[has-helper=true]:pt-3"}},{labelPlacement:"outside-left",size:"lg",class:{label:"group-data-[has-helper=true]:pt-4"}},{labelPlacement:["outside","outside-left"],isMultiline:!0,class:{inputWrapper:"py-2"}},{labelPlacement:"outside",isMultiline:!0,class:{label:"pb-1.5"}},{labelPlacement:"inside",isMultiline:!0,class:{label:"pb-0.5",input:"pt-0"}},{isMultiline:!0,disableAnimation:!1,class:{input:"transition-height !duration-100 motion-reduce:transition-none"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}},{isMultiline:!0,radius:"full",class:{inputWrapper:"data-[has-multiple-rows=true]:rounded-large"}},{isClearable:!0,isMultiline:!0,class:{clearButton:["group-data-[has-value=true]:opacity-70 group-data-[has-value=true]:block","group-data-[has-value=true]:scale-100","group-data-[has-value=true]:pointer-events-auto"]}}]}),em=r(75808),ey=r(17926),eg=r(74543),ev=r(7969),eb=e=>(0,c.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,c.jsx)("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})}),ex=(0,i.Rf)((e,t)=>{let{Component:r,label:n,description:u,isClearable:d,startContent:h,endContent:p,labelPlacement:f,hasHelper:m,isOutsideLeft:y,shouldLabelBeOutside:g,errorMessage:v,isInvalid:E,getBaseProps:O,getLabelProps:I,getInputProps:C,getInnerWrapperProps:D,getInputWrapperProps:N,getMainWrapperProps:M,getHelperWrapperProps:A,getDescriptionProps:R,getErrorMessageProps:j,getClearButtonProps:B}=function(e){var t,r,n,u;let c=(0,a.o)(),{validationBehavior:d}=eu(ec)||{},[h,p]=(0,i.rE)(e,ef.variantKeys),{ref:f,as:m,type:y,label:g,baseRef:v,wrapperRef:E,description:O,className:I,classNames:C,autoFocus:D,startContent:N,endContent:M,onClear:A,onChange:R,validationState:j,validationBehavior:B=null!=(t=null!=d?d:null==c?void 0:c.validationBehavior)?t:"native",innerWrapperRef:L,onValueChange:V=()=>{},...q}=h,G=(0,o.useCallback)(e=>{V(null!=e?e:"")},[V]),[$,F]=(0,o.useState)(!1),J=null!=(n=null!=(r=e.disableAnimation)?r:null==c?void 0:c.disableAnimation)&&n,K=(0,s.zD)(f),Y=(0,s.zD)(v),X=(0,s.zD)(E),Q=(0,s.zD)(L),[Z,ei]=(0,T.P)(h.value,null!=(u=h.defaultValue)?u:"",G),es=["date","time","month","week","range"].includes(y),eo=!(0,P.Im)(Z)||es,el=eo||$,ed="hidden"===y,eh=e.isMultiline,ep="file"===y,eb=(0,k.$)(null==C?void 0:C.base,I,eo?"is-filled":""),ex=(0,o.useCallback)(()=>{var e;ei(""),null==A||A(),null==(e=K.current)||e.focus()},[ei,A]);(0,W.U)(()=>{K.current&&ei(K.current.value)},[K.current]);let{labelProps:ew,inputProps:e_,isInvalid:eE,validationErrors:ek,validationDetails:eP,descriptionProps:eS,errorMessageProps:eO}=function(e,t){let{inputElementType:r="input",isDisabled:n=!1,isRequired:a=!1,isReadOnly:i=!1,type:s="text",validationBehavior:l="aria"}=e,[u,c]=(0,T.P)(e.value,e.defaultValue||"",e.onChange),{focusableProps:d}=(0,ea.W)(e,t),h=H({...e,value:u}),{isInvalid:p,validationErrors:f,validationDetails:m}=h.displayValidation,{labelProps:y,fieldProps:g,descriptionProps:v,errorMessageProps:b}=function(e){let{description:t,errorMessage:r,isInvalid:n,validationState:a}=e,{labelProps:i,fieldProps:s}=function(e){let{id:t,label:r,"aria-labelledby":n,"aria-label":a,labelElementType:i="label"}=e;t=(0,eg.Bi)(t);let s=(0,eg.Bi)(),o={};return r?(n=n?`${s} ${n}`:s,o={id:s,htmlFor:"label"===i?t:void 0}):n||a||console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility"),{labelProps:o,fieldProps:(0,ev.b)({id:t,"aria-label":a,"aria-labelledby":n})}}(e),o=(0,eg.X1)([!!t,!!r,n,a]),l=(0,eg.X1)([!!t,!!r,n,a]);return{labelProps:i,fieldProps:s=(0,x.v)(s,{"aria-describedby":[o,l,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),descriptionProps:{id:o},errorMessageProps:{id:l}}}({...e,isInvalid:p,errorMessage:e.errorMessage||f}),w=(0,er.$)(e,{labelable:!0}),_={type:s,pattern:e.pattern};return en(t,u,c),ee(e,h,t),(0,o.useEffect)(()=>{if(t.current instanceof(0,ey.m)(t.current).HTMLTextAreaElement){let e=t.current;Object.defineProperty(e,"defaultValue",{get:()=>e.value,set:()=>{},configurable:!0})}},[t]),{labelProps:y,inputProps:(0,x.v)(w,"input"===r?_:void 0,{disabled:n,readOnly:i,required:a&&"native"===l,"aria-required":a&&"aria"===l||void 0,"aria-invalid":p||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],value:u,onChange:e=>c(e.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...d,...g}),descriptionProps:v,errorMessageProps:b,isInvalid:p,validationErrors:f,validationDetails:m}}({...e,validationBehavior:B,autoCapitalize:e.autoCapitalize,value:Z,"aria-label":z(e["aria-label"],e.label,e.placeholder),inputElementType:eh?"textarea":"input",onChange:ei},K);ep&&(delete e_.value,delete e_.onChange);let{isFocusVisible:eI,isFocused:eC,focusProps:eD}=(0,w.o)({autoFocus:D,isTextInput:!0}),{isHovered:eN,hoverProps:eM}=(0,_.M)({isDisabled:!!(null==e?void 0:e.isDisabled)}),{isHovered:eA,hoverProps:eR}=(0,_.M)({isDisabled:!!(null==e?void 0:e.isDisabled)}),{focusProps:ej,isFocusVisible:eT}=(0,w.o)(),{focusWithinProps:eB}=(0,em.R)({onFocusWithinChange:F}),{pressProps:eL}=(0,et.d)({isDisabled:!!(null==e?void 0:e.isDisabled)||!!(null==e?void 0:e.isReadOnly),onPress:ex}),eW="invalid"===j||eE,eU=(0,o.useMemo)(()=>{var t;if(ep){if(!e.labelPlacement)return"outside";if("inside"===e.labelPlacement)return(0,U.R)("Input with file type doesn't support inside label. Converting to outside ..."),"outside"}return e.labelPlacement&&"inside"!==e.labelPlacement||g?null!=(t=e.labelPlacement)?t:"inside":"outside"},[e.labelPlacement,g]),ez="function"==typeof h.errorMessage?h.errorMessage({isInvalid:eW,validationErrors:ek,validationDetails:eP}):h.errorMessage||(null==ek?void 0:ek.join(" ")),eV=!!A||e.isClearable,eq=!!g||!!O||!!ez,eG=!!h.placeholder,e$=!!g,eF=!!O||!!ez,eH="outside"===eU||"outside-left"===eU,eJ="inside"===eU,eK=!!K.current&&(!K.current.value||""===K.current.value||!Z||""===Z)&&eG,eY="outside-left"===eU,eX=!!N,eQ=!!eH&&("outside-left"===eU||eG||"outside"===eU&&eX),eZ="outside"===eU&&!eG&&!eX,e0=(0,o.useMemo)(()=>ef({...p,isInvalid:eW,labelPlacement:eU,isClearable:eV,disableAnimation:J}),[(0,l.t6)(p),eW,eU,eV,eX,J]),e1=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:Y,className:e0.base({class:eb}),"data-slot":"base","data-filled":(0,P.sE)(eo||eG||eX||eK||ep),"data-filled-within":(0,P.sE)(el||eG||eX||eK||ep),"data-focus-within":(0,P.sE)($),"data-focus-visible":(0,P.sE)(eI),"data-readonly":(0,P.sE)(e.isReadOnly),"data-focus":(0,P.sE)(eC),"data-hover":(0,P.sE)(eN||eA),"data-required":(0,P.sE)(e.isRequired),"data-invalid":(0,P.sE)(eW),"data-disabled":(0,P.sE)(e.isDisabled),"data-has-elements":(0,P.sE)(eq),"data-has-helper":(0,P.sE)(eF),"data-has-label":(0,P.sE)(e$),"data-has-value":(0,P.sE)(!eK),"data-hidden":(0,P.sE)(ed),...eB,...t}},[e0,eb,eo,eC,eN,eA,eW,eF,e$,eq,eK,eX,$,eI,el,eG,eB,ed,e.isReadOnly,e.isRequired,e.isDisabled]),e2=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-slot":"label",className:e0.label({class:null==C?void 0:C.label}),...(0,x.v)(ew,eR,e)}},[e0,eA,ew,null==C?void 0:C.label]),e5=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"data-slot":"input","data-filled":(0,P.sE)(eo),"data-filled-within":(0,P.sE)(el),"data-has-start-content":(0,P.sE)(eX),"data-has-end-content":(0,P.sE)(!!M),className:e0.input({class:(0,k.$)(null==C?void 0:C.input,eo?"is-filled":"",eh?"pe-0":"")}),...(0,x.v)(eD,e_,(0,S.$)(q,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(e_))}),t),"aria-readonly":(0,P.sE)(e.isReadOnly),onChange:(0,b.c)(e_.onChange,R),ref:K}},[e0,Z,eD,e_,q,eo,el,eX,M,null==C?void 0:C.input,e.isReadOnly,e.isRequired,R]),e6=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:X,"data-slot":"input-wrapper","data-hover":(0,P.sE)(eN||eA),"data-focus-visible":(0,P.sE)(eI),"data-focus":(0,P.sE)(eC),className:e0.inputWrapper({class:(0,k.$)(null==C?void 0:C.inputWrapper,eo?"is-filled":"")}),...(0,x.v)(e,eM),onClick:e=>{K.current&&e.currentTarget===e.target&&K.current.focus()},style:{cursor:"text",...e.style}}},[e0,eN,eA,eI,eC,Z,null==C?void 0:C.inputWrapper]),e3=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,ref:Q,"data-slot":"inner-wrapper",onClick:e=>{K.current&&e.currentTarget===e.target&&K.current.focus()},className:e0.innerWrapper({class:(0,k.$)(null==C?void 0:C.innerWrapper,null==e?void 0:e.className)})}},[e0,null==C?void 0:C.innerWrapper]),e4=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,"data-slot":"main-wrapper",className:e0.mainWrapper({class:(0,k.$)(null==C?void 0:C.mainWrapper,null==e?void 0:e.className)})}},[e0,null==C?void 0:C.mainWrapper]),e8=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,"data-slot":"helper-wrapper",className:e0.helperWrapper({class:(0,k.$)(null==C?void 0:C.helperWrapper,null==e?void 0:e.className)})}},[e0,null==C?void 0:C.helperWrapper]),e7=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,...eS,"data-slot":"description",className:e0.description({class:(0,k.$)(null==C?void 0:C.description,null==e?void 0:e.className)})}},[e0,null==C?void 0:C.description]),e9=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,...eO,"data-slot":"error-message",className:e0.errorMessage({class:(0,k.$)(null==C?void 0:C.errorMessage,null==e?void 0:e.className)})}},[e0,eO,null==C?void 0:C.errorMessage]),te=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...t,type:"button",tabIndex:-1,disabled:e.isDisabled,"aria-label":"clear input","data-slot":"clear-button","data-focus-visible":(0,P.sE)(eT),className:e0.clearButton({class:(0,k.$)(null==C?void 0:C.clearButton,null==t?void 0:t.className)}),...(0,x.v)(eL,ej)}},[e0,eT,eL,ej,null==C?void 0:C.clearButton]);return{Component:m||"div",classNames:C,domRef:K,label:g,description:O,startContent:N,endContent:M,labelPlacement:eU,isClearable:eV,hasHelper:eF,hasStartContent:eX,isLabelOutside:eQ,isOutsideLeft:eY,isLabelOutsideAsPlaceholder:eZ,shouldLabelBeOutside:eH,shouldLabelBeInside:eJ,hasPlaceholder:eG,isInvalid:eW,errorMessage:ez,getBaseProps:e1,getLabelProps:e2,getInputProps:e5,getMainWrapperProps:e4,getInputWrapperProps:e6,getInnerWrapperProps:e3,getHelperWrapperProps:e8,getDescriptionProps:e7,getErrorMessageProps:e9,getClearButtonProps:te}}({...e,ref:t}),L=n?(0,c.jsx)("label",{...I(),children:n}):null,V=(0,o.useMemo)(()=>d?(0,c.jsx)("button",{...B(),children:p||(0,c.jsx)(eb,{})}):p,[d,B]),q=(0,o.useMemo)(()=>{let e=E&&v,t=e||u;return m&&t?(0,c.jsx)("div",{...A(),children:e?(0,c.jsx)("div",{...j(),children:v}):(0,c.jsx)("div",{...R(),children:u})}):null},[m,E,v,u,A,j,R]),G=(0,o.useMemo)(()=>(0,c.jsxs)("div",{...D(),children:[h,(0,c.jsx)("input",{...C()}),V]}),[h,V,C,D]),$=(0,o.useMemo)(()=>g?(0,c.jsxs)("div",{...M(),children:[(0,c.jsxs)("div",{...N(),children:[y?null:L,G]}),q]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{...N(),children:[L,G]}),q]}),[f,q,g,L,G,v,u,M,N,j,R]);return(0,c.jsxs)(r,{...O(),children:[y?L:null,$]})});ex.displayName="NextUI.Input";var ew=ex,[e_,eE]=(0,p.q)({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),ek=(0,i.Rf)((e,t)=>{let{as:r,children:n,className:a,...i}=e,{slots:l,classNames:u,bodyId:d,setBodyMounted:h}=eE(),p=(0,s.zD)(t);return(0,o.useEffect)(()=>(h(!0),()=>h(!1)),[h]),(0,c.jsx)(r||"div",{ref:p,className:l.body({class:(0,k.$)(null==u?void 0:u.body,a)}),id:d,...i,children:n})});ek.displayName="NextUI.ModalBody";var eP=ek,eS=r(8150),eO={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,willChange:"auto",transition:{scale:{duration:.4,ease:eS.xf.ease},opacity:{duration:.4,ease:eS.xf.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,willChange:"transform",transition:{duration:.3,ease:eS.xf.ease}}},eI=r(13464),eC=e=>{let{isSelected:t,isIndeterminate:r,disableAnimation:n,...a}=e;return(0,c.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...a,children:(0,c.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})},eD=r(72607),eN=r(63192),eM=r(13209),eA=r(93630);let eR="undefined"!=typeof document&&window.visualViewport;function ej(){return{width:eR&&(null==eR?void 0:eR.width)||window.innerWidth,height:eR&&(null==eR?void 0:eR.height)||window.innerHeight}}var eT=()=>r.e(657).then(r.bind(r,64657)).then(e=>e.default),eB=e=>{let{as:t,children:r,role:n="dialog",...a}=e,{Component:i,domRef:s,slots:l,classNames:u,motionProps:d,backdrop:h,closeButton:p,hideCloseButton:f,disableAnimation:m,getDialogProps:y,getBackdropProps:g,getCloseButtonProps:v,onClose:w}=eE(),_=function(){let e=(0,eA.wR)(),[t,r]=(0,o.useState)(()=>e?{width:0,height:0}:ej());return(0,o.useEffect)(()=>{let e=()=>{r(e=>{let t=ej();return t.width===e.width&&t.height===e.height?e:t})};return eR?eR.addEventListener("resize",e):window.addEventListener("resize",e),()=>{eR?eR.removeEventListener("resize",e):window.removeEventListener("resize",e)}},[]),t}(),{dialogProps:E}=(0,eM.s)({role:n},s),k=(0,o.isValidElement)(p)?(0,o.cloneElement)(p,v()):(0,c.jsx)("button",{...v(),children:(0,c.jsx)(eC,{})}),P=(0,o.useCallback)(e=>{"Tab"===e.key&&e.nativeEvent.isComposing&&(e.stopPropagation(),e.preventDefault())},[]),S=y((0,x.v)(E,a)),O=(0,c.jsxs)(t||i||"div",{...S,onKeyDown:(0,b.c)(S.onKeyDown,P),children:[(0,c.jsx)(eI.R,{onDismiss:w}),!f&&k,"function"==typeof r?r(w):r,(0,c.jsx)(eI.R,{onDismiss:w})]}),I=(0,o.useMemo)(()=>"transparent"===h?null:m?(0,c.jsx)("div",{...g()}):(0,c.jsx)(eD.F,{features:eT,children:(0,c.jsx)(eN.m.div,{animate:"enter",exit:"exit",initial:"exit",variants:eS.zF.fade,...g()})}),[h,m,g]),C={"--visual-viewport-height":_.height+"px"},D=m?(0,c.jsx)("div",{className:l.wrapper({class:null==u?void 0:u.wrapper}),"data-slot":"wrapper",style:C,children:O}):(0,c.jsx)(eD.F,{features:eT,children:(0,c.jsx)(eN.m.div,{animate:"enter",className:l.wrapper({class:null==u?void 0:u.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:eO,...d,style:C,children:O})});return(0,c.jsxs)("div",{tabIndex:-1,children:[I,D]})};eB.displayName="NextUI.ModalContent";var eL=eB,eW=(0,i.Rf)((e,t)=>{let{as:r,children:n,className:a,...i}=e,{slots:o,classNames:l}=eE(),u=(0,s.zD)(t);return(0,c.jsx)(r||"footer",{ref:u,className:o.footer({class:(0,k.$)(null==l?void 0:l.footer,a)}),...i,children:n})});eW.displayName="NextUI.ModalFooter";var eU=eW,ez=r(12026),eV=r(66942),eq=r(57300),eG=r(40603),e$=(0,y.tv)({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center","h-[--visual-viewport-height]"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","end-1","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...g.zb]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] min-h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),eF=r(16912),eH=r(41071),eJ=r(62751),eK=(0,i.Rf)((e,t)=>{let{children:r,...n}=e,u=function(e){var t,r,n;let u=(0,a.o)(),[c,d]=(0,i.rE)(e,e$.variantKeys),{ref:h,as:p,className:f,classNames:m,isOpen:y,defaultOpen:g,onOpenChange:v,motionProps:b,closeButton:_,isDismissable:S=!0,hideCloseButton:O=!1,shouldBlockScroll:I=!0,portalContainer:C,isKeyboardDismissDisabled:D=!1,onClose:N,...M}=c,A=(0,s.zD)(h),R=(0,o.useRef)(null),[j,T]=(0,o.useState)(!1),[B,L]=(0,o.useState)(!1),W=null!=(r=null!=(t=e.disableAnimation)?t:null==u?void 0:u.disableAnimation)&&r,U=(0,o.useId)(),z=(0,o.useId)(),V=(0,o.useId)(),q=(0,eF.T)({isOpen:y,defaultOpen:g,onOpenChange:e=>{null==v||v(e),e||null==N||N()}}),{modalProps:G,underlayProps:$}=function(e={shouldBlockScroll:!0},t,r){let{overlayProps:n,underlayProps:a}=(0,ez.e)({...e,isOpen:t.isOpen,onClose:t.close},r);return(0,eV.H)({isDisabled:!t.isOpen||!e.shouldBlockScroll}),(0,eq.Se)(),(0,o.useEffect)(()=>{if(t.isOpen&&r.current)return(0,eG.h)([r.current])},[t.isOpen,r]),{modalProps:(0,x.v)(n),underlayProps:a}}({isDismissable:S,shouldBlockScroll:I,isKeyboardDismissDisabled:D},q,A),{buttonProps:F}=(0,E.l)({onPress:q.close},R),{isFocusVisible:H,focusProps:J}=(0,w.o)(),K=(0,k.$)(null==m?void 0:m.base,f),Y=(0,o.useMemo)(()=>e$({...d,disableAnimation:W}),[(0,l.t6)(d),W]),X=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{className:Y.backdrop({class:null==m?void 0:m.backdrop}),onClick:()=>q.close(),...$,...e}},[Y,m,$]);return{Component:p||"section",slots:Y,domRef:A,headerId:z,bodyId:V,motionProps:b,classNames:m,isDismissable:S,closeButton:_,hideCloseButton:O,portalContainer:C,shouldBlockScroll:I,backdrop:null!=(n=e.backdrop)?n:"opaque",isOpen:q.isOpen,onClose:q.close,disableAnimation:W,setBodyMounted:L,setHeaderMounted:T,getDialogProps:function(){var t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{ref:(0,eH.P)(n,A),...(0,x.v)(G,M,r),className:Y.base({class:(0,k.$)(K,r.className)}),id:U,"data-open":(0,P.sE)(q.isOpen),"data-dismissable":(0,P.sE)(S),"aria-modal":(0,P.sE)(!0),"data-placement":null!=(t=null==e?void 0:e.placement)?t:"right","aria-labelledby":j?z:void 0,"aria-describedby":B?V:void 0}},getBackdropProps:X,getCloseButtonProps:()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":(0,P.sE)(H),className:Y.closeButton({class:null==m?void 0:m.closeButton}),...(0,x.v)(F,J)})}}({...n,ref:t}),d=(0,c.jsx)(eq.hJ,{portalContainer:u.portalContainer,children:r});return(0,c.jsx)(e_,{value:u,children:u.disableAnimation&&u.isOpen?d:(0,c.jsx)(eJ.N,{children:u.isOpen?d:null})})});eK.displayName="NextUI.Modal";var eY=eK},23150:(e,t,r)=>{"use strict";r.d(t,{b:()=>g});var n=r(66749),a=r(42893),i=r(24017),s=r(55634);r(47951);let o=s.createContext(null);function l(e){let{children:t}=e,r=(0,s.useContext)(o),[n,a]=(0,s.useState)(0),i=(0,s.useMemo)(()=>({parent:r,modalCount:n,addModal(){a(e=>e+1),r&&r.addModal()},removeModal(){a(e=>e-1),r&&r.removeModal()}}),[r,n]);return s.createElement(o.Provider,{value:i},t)}function u(e){let t;let{modalProviderProps:r}={modalProviderProps:{"aria-hidden":!!(t=(0,s.useContext)(o))&&t.modalCount>0||void 0}};return s.createElement("div",{"data-overlay-container":!0,...e,...r})}function c(e){return s.createElement(l,null,s.createElement(u,e))}var d=r(65344),h=r(5082),p=r(22528),f=r(11470),m=r(98633);function y(e){let{children:t,isValidProp:r,...n}=e;r&&(0,f.D)(r),(n={...(0,s.useContext)(p.Q),...n}).isStatic=(0,m.M)(()=>n.isStatic);let a=(0,s.useMemo)(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return(0,h.jsx)(p.Q.Provider,{value:a,children:t})}var g=e=>{let{children:t,navigate:r,disableAnimation:o,useHref:l,disableRipple:u=!1,skipFramerMotionAnimations:p=o,reducedMotion:f="never",validationBehavior:m,locale:g="en-US",defaultDates:v,createCalendar:b,...x}=e,w=t;r&&(w=(0,h.jsx)(i.pg,{navigate:r,useHref:l,children:w}));let _=(0,s.useMemo)(()=>(o&&p&&(d.W.skipAnimations=!0),{createCalendar:b,defaultDates:v,disableAnimation:o,disableRipple:u,validationBehavior:m}),[b,null==v?void 0:v.maxDate,null==v?void 0:v.minDate,o,u,m]);return(0,h.jsx)(n.n,{value:_,children:(0,h.jsx)(a.C,{locale:g,children:(0,h.jsx)(y,{reducedMotion:f,children:(0,h.jsx)(c,{...x,children:w})})})})}}}]);