(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{20352:(e,t,a)=>{Promise.resolve().then(a.bind(a,41797))},41797:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(19488),l=a(51408),n=a(89438),i=a(34500),s=a(90304);let o=(0,a(58246).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var c=a(13971),d=a(46124);let h=e=>{let{character:t,onChange:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.pde,{type:"text",label:"Name",value:t.name,onChange:e=>a({...t,name:e.target.value}),variant:"bordered",color:"secondary",fullWidth:!0,isRequired:!0},"Name"),(0,r.jsx)(s.o3,{ariaLabel:"Character race selection",items:l.oF.ALL_RACES,label:t.race,onSelectionChange:e=>{let r=l.oF.fromLabel(e.values().next().value||l.oF.HUMAN.label);a({...t,race:null==r?void 0:r.label})}}),(0,r.jsx)(s.o3,{ariaLabel:"Character specialization selection",items:l.mQ.ALL_SPECIALIZATIONS,label:t.specialization,onSelectionChange:e=>{let r=l.mQ.fromLabel(e.values().next().value||l.mQ.LUMINARY.label);a({...t,specialization:null==r?void 0:r.label})}})]})};var m=a(88855),u=a(87914),A=a(6117),y=a.n(A);let g=()=>(0,l.qs)("",l.oF.HUMAN,l.mQ.LUMINARY),x=e=>new Set(e.map(e=>e.name)).size!==e.length,p=()=>{let[e,t]=(0,d.useState)([g()]),[a,A]=(0,d.useState)(!1),[p,f]=(0,d.useState)(!0);(0,d.useEffect)(()=>{A(!e.some(e=>!e.name)&&!x(e))},[e]);let b=(0,c.useRouter)(),v=a=>{let r=[...e];1===r.splice(a,1).length&&t(r)},N=(a,r)=>{let n=[...e];n[a]=(0,l.qs)(r.name,l.oF.fromLabel(r.race),l.mQ.fromLabel(r.specialization)),t(n)};return(0,r.jsx)("form",{onSubmit:t=>{t.preventDefault(),e[0]&&((0,m.Vd)({username:e[0].name,team:e,tutorial:!1,showHints:p}),b.push("/board"))},children:(0,r.jsxs)(i.PY.div,{initial:"initial",animate:"animate",exit:"exit",className:"flex flex-col gap-y-2 items-center",transition:{duration:.3},variants:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},children:[e.map((t,a)=>(0,r.jsxs)(i.PY.div,{className:y().inputContainer,transition:{delay:.1*e.length},variants:u.r,children:[(0,r.jsx)(h,{character:t,onChange:e=>N(a,e)}),(0,r.jsx)(s.Y0,{"aria-label":"Remove character",color:"danger",isIconOnly:!0,isDisabled:0===a,onPress:()=>v(a),"data-testid":"button-remove-character",children:(0,r.jsx)(o,{className:"text-primary text-small"})})]},"character-configuration-".concat(a))),(0,r.jsx)("div",{className:y().inputContainer,children:(0,r.jsx)(n.Sc0,{isSelected:p,onValueChange:e=>f(e),color:"secondary",isRequired:!0,"data-testid":"checkbox-show-hints",children:"Enable in-game hints"},"showHints")}),(0,r.jsx)(i.PY.div,{transition:{delay:.1*(e.length+1)},variants:u.r,children:(0,r.jsxs)(n.e2v,{children:[(0,r.jsx)(s.Y0,{color:"secondary",onPress:()=>{t([...e,g()])},variant:"bordered",isDisabled:e.length>=l.Fv,"data-testid":"button-add-ally",children:"Add Ally"}),(0,r.jsx)(s.Y0,{onPress:()=>b.push("/"),color:"warning","data-testid":"button-cancel",children:"Cancel"}),(0,r.jsx)(s.Y0,{color:"secondary",type:"submit",isDisabled:!a,"data-testid":"button-start-game",children:"Start Game"})]})})]},"configure-game-options")})};var f=a(7178),b=a.n(f);let v=()=>(0,r.jsx)("div",{className:b().container,children:(0,r.jsx)(n.aFV,{backdrop:"blur",classNames:{body:b().modalBody},hideCloseButton:!0,isOpen:!0,children:(0,r.jsx)(n.$mQ,{children:(0,r.jsxs)(n.cwr,{children:[(0,r.jsx)("h2",{className:b().title,children:"Game Configuration"}),(0,r.jsxs)("p",{children:["You can add up to ",l.Fv," allies for the upcoming battle. The smaller your group is, the harder it gets."]}),(0,r.jsx)(i.Ny,{mode:"wait",children:(0,r.jsx)(p,{})})]})})})})},88855:(e,t,a)=>{"use strict";a.d(t,{RQ:()=>n,Vd:()=>l,kQ:()=>i});let r=Object.freeze("eldoria-configuration"),l=e=>{localStorage.setItem(r,JSON.stringify(e))},n=()=>{let e=localStorage.getItem(r);if(e)try{return JSON.parse(e)}catch(e){console.error("Failed to parse stored configuration:",e)}return null},i=()=>{localStorage.removeItem(r)}},87914:(e,t,a)=>{"use strict";a.d(t,{r:()=>r});let r=Object.freeze({initial:{height:0,opacity:0,y:50},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-50}})},51408:(e,t,a)=>{"use strict";a.d(t,{Df:()=>G,wi:()=>l,Yj:()=>n,Kj:()=>r.K,st:()=>U,vW:()=>C,Fv:()=>i,XD:()=>F,oF:()=>S,lb:()=>Y,mQ:()=>T,xi:()=>D,tC:()=>A,$W:()=>h,Hd:()=>R,qs:()=>I});var r=a(63628);let l="cell:character",n="cell:core",i=6,s=()=>{let e=[];for(let t=0;t<12;t++){let a=[];for(let e=0;e<12;e++){let r=(5===e||6===e)&&(5===t||6===t);a[e]={x:e,y:t,content:r?{type:n}:void 0}}e.push(Object.freeze(a))}return{cells:Object.freeze(e)}};var o=a(3105);let c=(e,t)=>{let{G:a}=e;a.selectedCharacterIndex=t},d={moves:{highlightCharacter:c},next:o.g9},h=e=>"0"===e?"Player":"Enemy",m=[],u=e=>{m.push(e)},A=()=>[...m],y=(e,t,a,r)=>!!e.cells[r]&&!!e.cells[r][a]&&!e.cells[r][a].content,g=e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.numPlayers},x={moves:{highlightCharacter:c,placeCharacter:(e,t,a,r)=>{let{G:n,events:i}=e,s=n.team.findIndex(e=>e.name===t.name);y(n.grid,t,a,r)&&s>=0&&(n.grid.cells[r][a].content={type:l,characterIndex:s},u("Placed character '".concat(t.name,"' onto (").concat(a,"/").concat(r,")")),i.endTurn())}},next:o.E3,turn:{order:{first:()=>0,next:g,playOrder:e=>{let{G:t}=e;return"0"===t.startingPlayer?["0","1"]:["1","0"]}}},endIf:e=>{let{G:t}=e,a=0;for(let e of t.grid.cells)for(let t of e)t.content&&t.content.type===l&&a++;return a===t.team.length}},p={moves:{initGame:(e,t)=>{let{G:a,ctx:r}=e,{username:l,team:n,tutorial:i,showHints:s}=t;a.username=l,a.team=n,a.tutorial=i,a.showHints=s;for(let e=0;e<r.numPlayers;e++)a.diceRoll["".concat(e)]=0}},next:o.GV,endIf:e=>{let{G:t}=e;return!!t.username},start:!0},f={moves:{highlightCharacter:c},next:o.tR};var b=a(76044);let v={moves:{rollDice:e=>{let{G:t,ctx:a,events:r,random:l}=e;if(!Object.keys(t.diceRoll).includes(a.currentPlayer))return b.n;let n=l.D20();if(t.diceRoll[a.currentPlayer]=n,u("".concat(h(a.currentPlayer)," rolled ").concat(n)),0!==t.diceRoll["0"]&&0!==t.diceRoll["1"]){if(t.diceRoll["0"]===t.diceRoll["1"])t.diceRoll={0:0,1:0};else{let e=t.diceRoll["0"]>t.diceRoll["1"]?"0":"1";t.startingPlayer=e,u("".concat(h(e)," rolled higher and will start the game"))}}r.endTurn()}},next:o.OV,turn:{order:{first:()=>0,next:g}},endIf:e=>{let{G:t}=e;return!!t.startingPlayer},onEnd:e=>{let{G:t}=e;t.diceRoll={0:0,1:0}}},N={moves:{highlightCharacter:c},next:o.E3},R=e=>{if(void 0!==e.selectedCharacterIndex&&e.selectedCharacterIndex>=0)return e.team[e.selectedCharacterIndex]},C={name:"fantasy-board-game",minPlayers:2,maxPlayers:2,setup:()=>({diceRoll:{0:0,1:0},grid:s(),startingPlayer:void 0,team:[],username:"",tutorial:!1,showHints:!0}),moves:{},turn:{minMoves:1,maxMoves:1},phases:{[o.fI]:p,[o.GV]:v,[o.OV]:x,[o.E3]:f,[o.tR]:d,[o.g9]:N}},I=(e,t,a)=>{let r=t.baseDexterity+a.dexterityMod,l=10+Math.floor(r/2)-5+a.acBonus,n=t.baseConstitution+a.constitutionMod,i=100+a.hpBonus+5*n;return new w(e,t.label,a.label,i,i,l,t.baseStrength+a.strengthMod,r,n,t.baseIntelligence+a.intelligenceMod,t.baseWisdom+a.wisdomMod,t.baseCharisma+a.charismaMod)};class w{constructor(e,t,a,r,l,n,i,s,o,c,d,h){this.name=e,this.race=t,this.specialization=a,this.currentHP=r,this.maxHP=l,this.ac=n,this.strength=i,this.dexterity=s,this.constitution=o,this.intelligence=c,this.wisdom=d,this.charisma=h}}class S{static fromLabel(e){let t=e.trim().toLowerCase();for(let e of this.ALL_RACES)if(e.label.toLowerCase()===t)return e;throw Error("Unknown race label: ".concat(e))}constructor(e,t,a,r,l,n,i){this.label=e,this.baseStrength=t,this.baseDexterity=a,this.baseConstitution=r,this.baseIntelligence=l,this.baseWisdom=n,this.baseCharisma=i}}S.HUMAN=new S("Human",10,10,10,10,10,10),S.DWARF=new S("Dwarf",12,8,13,10,11,9),S.ELF=new S("Elf",8,12,9,12,11,11),S.HALFLING=new S("Halfling",8,13,10,10,11,12),S.GIANT=new S("Giant",14,6,13,7,10,8),S.ALL_RACES=[S.HUMAN,S.DWARF,S.ELF,S.HALFLING,S.GIANT];var E=a(59394),L=a(30667),j=a(34274),P=a(11663),M=a(593),_=a(29647),O=a(38835),H=a(63182);class T{static fromLabel(e){let t=e.trim().toLowerCase();for(let e of this.ALL_SPECIALIZATIONS)if(e.label.toLowerCase()===t)return e;throw Error("Unknown specialization label: ".concat(e))}constructor(e,t,a,r,l,n,i,s,o,c){this.label=e,this.icon=t,this.hpBonus=a,this.acBonus=r,this.strengthMod=l,this.dexterityMod=n,this.constitutionMod=i,this.intelligenceMod=s,this.wisdomMod=o,this.charismaMod=c}}T.GUARDIAN=new T("Guardian",E.A,50,3,2,0,3,-1,1,0),T.CHAMPION=new T("Champion",L.A,30,1,3,1,1,0,0,0),T.ROGUE=new T("Rogue",j.A,10,1,1,4,0,1,1,0),T.SHARPSHOOTER=new T("Sharpshooter",P.A,20,0,1,3,0,1,2,0),T.ARCANIST=new T("Arcanist",M.A,0,0,-1,1,0,4,2,1),T.NECROMANCER=new T("Necromancer",j.A,10,0,0,1,1,3,0,2),T.PALADIN=new T("Paladin",_.A,40,2,2,0,2,0,2,1),T.LUMINARY=new T("Luminary",O.A,20,0,0,0,1,1,4,1),T.MYSTIC_HERALD=new T("Mystic Herald",H.A,10,0,0,1,1,2,2,2),T.ALL_SPECIALIZATIONS=[T.GUARDIAN,T.CHAMPION,T.ROGUE,T.SHARPSHOOTER,T.ARCANIST,T.NECROMANCER,T.PALADIN,T.LUMINARY,T.MYSTIC_HERALD];let D=I("Thane",S.DWARF,T.GUARDIAN),F=I("Nyssa",S.HUMAN,T.ROGUE),U=I("Elyndor",S.DWARF,T.ARCANIST),G=I("Brom",S.GIANT,T.CHAMPION),Y=I("Selene",S.ELF,T.LUMINARY)},3105:(e,t,a)=>{"use strict";a.d(t,{E3:()=>i,GV:()=>l,OV:()=>n,fI:()=>r,g9:()=>o,tR:()=>s});let r="INIT_PHASE",l="ROLL_PHASE",n="GATHER_GROUP_PHASE",i="MOVEMENT_PHASE",s="ACTION_PHASE",o="TURN_END_PHASE"},90304:(e,t,a)=>{"use strict";a.d(t,{Y0:()=>n,o3:()=>m});var r=a(19488),l=a(87781);let n=(0,a(46124).forwardRef)((e,t)=>{let{children:a,color:n="primary",type:i="button",...s}=e;return(0,r.jsx)(l.T,{color:n,ref:t,type:i,...s,children:a})});n.displayName="DefaultButton";var i=a(42365),s=a(94919),o=a(54456),c=a(40014),d=a(93010),h=a.n(d);let m=e=>{let{ariaLabel:t,items:a,label:l,onSelectionChange:d}=e;return(0,r.jsxs)(i.A,{className:h().dropdown,children:[(0,r.jsx)(s.b,{children:(0,r.jsx)(n,{className:"transition-transform",color:"secondary",children:l})}),(0,r.jsx)(o.y,{variant:"flat",disallowEmptySelection:!0,items:a,onSelectionChange:d,selectionMode:"single","data-testid":t,children:e=>(0,r.jsx)(c.Y,{color:"default",children:e.label},e.label)})]})}},89438:(e,t,a)=>{"use strict";a.d(t,{e2v:()=>r.e2v,ZpM:()=>r.ZpM,Sc0:()=>r.Sc0,pde:()=>r.pde,aFV:()=>r.aFV,cwr:()=>r.cwr,$mQ:()=>r.$mQ,jlY:()=>r.jlY,y$y:()=>r.y$y}),a(90304),a(34500),a(34744);var r=a(78082)},34500:(e,t,a)=>{"use strict";a.d(t,{Ny:()=>r.Ny,PY:()=>r.PY});var r=a(26215);a(66022)},34744:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppUIProvider:()=>i,NextThemeProvider:()=>s});var r=a(19488),l=a(50610),n=a(66022);let i=e=>{let{children:t}=e;return(0,r.jsx)(l.b,{children:t})},s=e=>{let{children:t,themeProps:a}=e;return(0,r.jsx)(n.N,{defaultTheme:"system",themes:["light","dark","system"],forcedTheme:"light",...a,children:t})}},6117:e=>{e.exports={inputContainer:"game-configuration-form_inputContainer__cU2AB"}},7178:e=>{e.exports={container:"page_container__B6sVQ",modalBody:"page_modalBody__jq8WB",title:"page_title__VUTVG"}},93010:e=>{e.exports={dropdown:"dropdown-for-list-items_dropdown__grQjg"}}},e=>{var t=t=>e(e.s=t);e.O(0,[539,978,251,5,923,463,358],()=>t(20352)),_N_E=e.O()}]);