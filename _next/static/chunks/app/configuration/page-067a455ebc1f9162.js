(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{74656:(e,t,a)=>{Promise.resolve().then(a.bind(a,21131))},21131:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var r=a(68320),s=a(98353),i=a(56097),n=a(3276),l=a(44959),o=a(43517),c=a(22866);let d=[s.oF.HUMAN,s.oF.DWARF,s.oF.ELF,s.oF.HALFLING,s.oF.GIANT],h=[s.mQ.TANK,s.mQ.WARRIOR,s.mQ.ASSASSIN,s.mQ.ARCHER,s.mQ.MAGE,s.mQ.HEALER,s.mQ.BUFFER],u=e=>{let{character:t,onChange:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.pde,{type:"text",label:"Name",value:t.name,onChange:e=>a({...t,name:e.target.value}),variant:"bordered",color:"secondary",fullWidth:!0,isRequired:!0},"Name"),(0,r.jsx)(c.o3,{ariaLabel:"Character race selection",items:d,label:t.race,onSelectionChange:e=>{let r=d.find(t=>t.label===e.values().next().value);r&&a({...t,race:r.label})}}),(0,r.jsx)(c.o3,{ariaLabel:"Character specialization selection",items:h,label:t.specialization,onSelectionChange:e=>{let r=h.find(t=>t.label===e.values().next().value);r&&a({...t,specialization:r.label})}})]})};var m=a(53411),y=a(83734);let p=(0,a(74019).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var x=a(31329),b=a.n(x);let g=()=>(0,s.qs)("",s.oF.HUMAN,s.mQ.HEALER),A=()=>{let[e,t]=(0,n.useState)([g()]),[a,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{d(!e.some(e=>!e.name))},[e]);let h=(0,l.useRouter)(),x=a=>{let r=[...e];1===r.splice(a,1).length&&t(r)},A=(a,r)=>{let i=[...e];i[a]=(0,s.qs)(r.name,s.oF.fromLabel(r.race),s.mQ.fromLabel(r.specialization)),t(i)};return(0,r.jsx)("form",{onSubmit:t=>{t.preventDefault(),(0,m.Vd)({username:e[0].name,team:e}),h.push("/board")},children:(0,r.jsxs)(i.PY.div,{initial:"initial",animate:"animate",exit:"exit",className:"flex flex-col gap-y-2 items-center",transition:{duration:.3},variants:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},children:[e.map((t,a)=>(0,r.jsxs)(i.PY.div,{className:b().inputContainer,transition:{delay:.1*e.length},variants:y.r,children:[(0,r.jsx)(u,{character:t,onChange:e=>A(a,e)}),(0,r.jsx)(c.Y0,{"aria-label":"Remove character",color:"danger",isIconOnly:!0,isDisabled:0===a,onClick:()=>x(a),"data-testid":"button-remove-character",children:(0,r.jsx)(p,{className:"text-primary text-small"})})]},"character-configuration-".concat(a))),(0,r.jsx)(i.PY.div,{transition:{delay:.1*(e.length+1)},variants:y.r,children:(0,r.jsxs)(o.e2v,{children:[(0,r.jsx)(c.Y0,{color:"secondary",onClick:()=>{t([...e,g()])},variant:"bordered",isDisabled:e.length>=s.Fv,"data-testid":"button-add-ally",children:"Add Ally"}),(0,r.jsx)(c.Y0,{onClick:()=>h.push("/"),color:"warning","data-testid":"button-cancel",children:"Cancel"}),(0,r.jsx)(c.Y0,{color:"secondary",type:"submit",isDisabled:!a,"data-testid":"button-start-game",children:"Start Game"})]})})]},"configure-game-options")})};var f=a(55790),v=a.n(f);let R=()=>(0,r.jsx)("div",{className:v().container,children:(0,r.jsx)(i.aF,{backdrop:"blur",classNames:{body:v().modalBody},hideCloseButton:!0,isOpen:!0,children:(0,r.jsx)(i.$m,{children:(0,r.jsxs)(i.cw,{children:[(0,r.jsx)("h2",{className:v().title,children:"Game Configuration"}),(0,r.jsxs)("p",{children:["You can add up to ",s.Fv," allies for the upcoming battle. The smaller your group is, the harder it gets."]}),(0,r.jsx)(i.Ny,{mode:"wait",children:(0,r.jsx)(A,{})})]})})})})},53411:(e,t,a)=>{"use strict";a.d(t,{RQ:()=>i,Vd:()=>s,kQ:()=>n});let r=Object.freeze("eldoria-configuration"),s=e=>{localStorage.setItem(r,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(r);if(e)try{return JSON.parse(e)}catch(e){console.error("Failed to parse stored configuration:",e)}return null},n=()=>{localStorage.removeItem(r)}},83734:(e,t,a)=>{"use strict";a.d(t,{r:()=>r});let r=Object.freeze({initial:{height:0,opacity:0,y:50},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-50}})},98353:(e,t,a)=>{"use strict";a.d(t,{Df:()=>w,Kj:()=>F.K,st:()=>j,vW:()=>d,Fv:()=>r,XD:()=>N,oF:()=>m,lb:()=>E,mQ:()=>v,xi:()=>R,qs:()=>h});let r=6,s=()=>{let e=[];for(let t=0;t<64;t++){let a=[];for(let e=0;e<64;e++)a[e]={x:e,y:t};e.push(Object.freeze(a))}return{cells:Object.freeze(e)}};var i=a(10349);let n=e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.numPlayers},l={moves:{initGame:(e,t)=>{let{G:a,ctx:r}=e,{username:s,team:i}=t;a.username=s,a.team=i;for(let e=0;e<r.numPlayers;e++)a.diceRoll["".concat(e)]=0}},next:i.GV,endIf:e=>{let{G:t}=e;return!!t.username},start:!0};var o=a(83157);let c={moves:{rollDice:e=>{let{G:t,ctx:a,events:r,random:s}=e;if(!Object.keys(t.diceRoll).includes(a.currentPlayer))return o.n;t.diceRoll[a.currentPlayer]=s.D20(),0!==t.diceRoll["0"]&&0!==t.diceRoll["1"]&&(t.diceRoll["0"]===t.diceRoll["1"]?t.diceRoll={0:0,1:0}:t.startingPlayer=t.diceRoll["0"]>t.diceRoll["1"]?"0":"1"),r.endTurn()}},next:i.eL,turn:{order:{first:()=>0,next:n}},endIf:e=>{let{G:t}=e;return!!t.startingPlayer},onEnd:e=>{let{G:t}=e;t.diceRoll={0:0,1:0}}},d={name:"fantasy-board-game",minPlayers:2,maxPlayers:2,setup:()=>({diceRoll:{0:0,1:0},grid:s(),startingPlayer:void 0,team:[],username:""}),moves:{},turn:{minMoves:1,maxMoves:1},phases:{[i.Zz]:l,[i.GV]:c,[i.eL]:{moves:{placeCharacter:()=>{}},next:"phaseB",turn:{order:{first:()=>0,next:n,playOrder:e=>{let{G:t}=e;return"0"===t.startingPlayer?["0","1"]:["1","0"]}}}},phaseB:{}}},h=(e,t,a)=>{let r=t.baseDexterity+a.dexterityMod,s=10+Math.floor(r/2)-5+a.acBonus,i=t.baseConstitution+a.constitutionMod,n=100+a.hpBonus+5*i;return new u(e,t.label,a.label,n,s,t.baseStrength+a.strengthMod,r,i,t.baseIntelligence+a.intelligenceMod,t.baseWisdom+a.wisdomMod,t.baseCharisma+a.charismaMod)};class u{constructor(e,t,a,r,s,i,n,l,o,c,d){this.name=e,this.race=t,this.specialization=a,this.maxHP=r,this.ac=s,this.strength=i,this.dexterity=n,this.constitution=l,this.intelligence=o,this.wisdom=c,this.charisma=d}}class m{static fromLabel(e){switch(e.trim().toLowerCase()){case"human":return m.HUMAN;case"dwarf":return m.DWARF;case"elf":return m.ELF;case"halfling":return m.HALFLING;case"giant":return m.GIANT;default:throw Error("Unknown race label: ".concat(e))}}constructor(e,t,a,r,s,i,n){this.label=e,this.baseStrength=t,this.baseDexterity=a,this.baseConstitution=r,this.baseIntelligence=s,this.baseWisdom=i,this.baseCharisma=n}}m.HUMAN=new m("Human",10,10,10,10,10,10),m.DWARF=new m("Dwarf",12,8,13,10,11,9),m.ELF=new m("Elf",8,12,9,12,11,11),m.HALFLING=new m("Halfling",8,13,10,10,11,12),m.GIANT=new m("Giant",14,6,13,7,10,8);var y=a(98255),p=a(28704),x=a(42411),b=a(46194),g=a(77904),A=a(39706),f=a(13633);class v{static fromLabel(e){switch(e.trim().toLowerCase()){case"tank":return v.TANK;case"warrior":return v.WARRIOR;case"assassin":return v.ASSASSIN;case"archer":return v.ARCHER;case"mage":return v.MAGE;case"healer":return v.HEALER;case"buffer":return v.BUFFER;default:throw Error("Unknown specialization label: ".concat(e))}}constructor(e,t,a,r,s,i,n,l,o,c){this.label=e,this.icon=t,this.hpBonus=a,this.acBonus=r,this.strengthMod=s,this.dexterityMod=i,this.constitutionMod=n,this.intelligenceMod=l,this.wisdomMod=o,this.charismaMod=c}}v.TANK=new v("Tank",y.A,50,3,2,0,3,-1,1,0),v.WARRIOR=new v("Warrior",p.A,30,1,3,1,1,0,0,0),v.ASSASSIN=new v("Assassin",x.A,10,1,1,4,0,1,1,0),v.ARCHER=new v("Archer",b.A,20,0,1,3,0,1,2,0),v.MAGE=new v("Mage",g.A,0,0,-1,1,0,4,2,1),v.HEALER=new v("Healer",A.A,20,0,0,0,1,1,4,1),v.BUFFER=new v("Buffer",f.A,10,0,0,1,1,2,2,2);let R=h("Thane",m.DWARF,v.TANK),N=h("Nyssa",m.HUMAN,v.ASSASSIN),j=h("Elyndor",m.DWARF,v.MAGE),w=h("Brom",m.GIANT,v.WARRIOR),E=h("Selene",m.ELF,v.HEALER);var F=a(69381)},10349:(e,t,a)=>{"use strict";a.d(t,{GV:()=>s,Zz:()=>r,eL:()=>i});let r="INIT",s="ROLL_PHASE",i="GATHER_GROUP"},79870:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,Y:()=>n});var r=a(68320),s=a(3276),i=a(15314);let n=(0,s.forwardRef)((e,t)=>{let{children:a,color:s="primary",type:n="button",...l}=e;return(0,r.jsx)(i.T,{color:s,ref:t,type:n,...l,children:a})}),l=n},22866:(e,t,a)=>{"use strict";a.d(t,{Y0:()=>r.Y,o3:()=>h});var r=a(79870),s=a(68320),i=a(81521),n=a(85764),l=a(79643),o=a(52350),c=a(38638),d=a.n(c);let h=e=>{let{ariaLabel:t,items:a,label:c,onSelectionChange:h}=e;return(0,s.jsxs)(i.A,{className:d().dropdown,children:[(0,s.jsx)(n.b,{children:(0,s.jsx)(r.A,{className:"transition-transform",color:"secondary",children:c})}),(0,s.jsx)(l.y,{"aria-label":t,variant:"flat",disallowEmptySelection:!0,items:a,onSelectionChange:h,selectionMode:"single",children:e=>(0,s.jsx)(o.Y,{color:"default",children:e.label},e.label)})]})}},43517:(e,t,a)=>{"use strict";a.d(t,{e2v:()=>r.e2v,ZpM:()=>r.ZpM,pde:()=>r.pde,y$y:()=>r.y$y}),a(22866),a(56097),a(62092);var r=a(68113)},56097:(e,t,a)=>{"use strict";a.d(t,{Ny:()=>r.Ny,aF:()=>s.Y,cw:()=>i.h,$m:()=>n.g,jl:()=>l.q,PY:()=>r.PY});var r=a(66311);a(3144);var s=a(77978),i=a(10611),n=a(83748),l=a(73695)},62092:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppUIProvider:()=>n,NextThemeProvider:()=>l});var r=a(68320),s=a(82872),i=a(3144);let n=e=>{let{children:t}=e;return(0,r.jsx)(s.b,{children:t})},l=e=>{let{children:t,themeProps:a}=e;return(0,r.jsx)(i.N,{defaultTheme:"system",themes:["light","dark","system"],forcedTheme:"light",...a,children:t})}},31329:e=>{e.exports={inputContainer:"game-configuration-form_inputContainer__cU2AB"}},55790:e=>{e.exports={container:"page_container__B6sVQ",modalBody:"page_modalBody__jq8WB",title:"page_title__VUTVG"}},38638:e=>{e.exports={dropdown:"dropdown-for-list-items_dropdown__grQjg"}}},e=>{var t=t=>e(e.s=t);e.O(0,[112,344,735,370,901,863,358],()=>t(74656)),_N_E=e.O()}]);