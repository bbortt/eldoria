(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{95421:(e,t,a)=>{Promise.resolve().then(a.bind(a,60810))},60810:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(57),s=a(67916),n=a(62424),i=a(17571),l=a(50733);let o=(0,a(13856).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var c=a(93060),d=a(13709);let h=[s.oF.HUMAN,s.oF.DWARF,s.oF.ELF,s.oF.HALFLING,s.oF.GIANT],u=[s.mQ.TANK,s.mQ.WARRIOR,s.mQ.ASSASSIN,s.mQ.ARCHER,s.mQ.MAGE,s.mQ.HEALER,s.mQ.BUFFER],m=e=>{let{character:t,onChange:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.pde,{type:"text",label:"Name",value:t.name,onChange:e=>a({...t,name:e.target.value}),variant:"bordered",color:"secondary",fullWidth:!0,isRequired:!0},"Name"),(0,r.jsx)(l.o3,{ariaLabel:"Character race selection",items:h,label:t.race,onSelectionChange:e=>{let r=h.find(t=>t.label===e.values().next().value);r&&a({...t,race:null==r?void 0:r.label})}}),(0,r.jsx)(l.o3,{ariaLabel:"Character specialization selection",items:u,label:t.specialization,onSelectionChange:e=>{let r=u.find(t=>t.label===e.values().next().value);r&&a({...t,specialization:null==r?void 0:r.label})}})]})};var y=a(8337),p=a(81160),x=a(41413),g=a.n(x);let b=()=>(0,s.qs)("",s.oF.HUMAN,s.mQ.HEALER),f=e=>new Set(e.map(e=>e.name)).size!==e.length,A=()=>{let[e,t]=(0,d.useState)([b()]),[a,h]=(0,d.useState)(!1),[u,x]=(0,d.useState)(!0);(0,d.useEffect)(()=>{h(!e.some(e=>!e.name)&&!f(e))},[e]);let A=(0,c.useRouter)(),v=a=>{let r=[...e];1===r.splice(a,1).length&&t(r)},R=(a,r)=>{let n=[...e];n[a]=(0,s.qs)(r.name,s.oF.fromLabel(r.race),s.mQ.fromLabel(r.specialization)),t(n)};return(0,r.jsx)("form",{onSubmit:t=>{t.preventDefault(),e[0]&&((0,y.Vd)({username:e[0].name,team:e,tutorial:!1,showHints:u}),A.push("/board"))},children:(0,r.jsxs)(i.PY.div,{initial:"initial",animate:"animate",exit:"exit",className:"flex flex-col gap-y-2 items-center",transition:{duration:.3},variants:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},children:[e.map((t,a)=>(0,r.jsxs)(i.PY.div,{className:g().inputContainer,transition:{delay:.1*e.length},variants:p.r,children:[(0,r.jsx)(m,{character:t,onChange:e=>R(a,e)}),(0,r.jsx)(l.Y0,{"aria-label":"Remove character",color:"danger",isIconOnly:!0,isDisabled:0===a,onPress:()=>v(a),"data-testid":"button-remove-character",children:(0,r.jsx)(o,{className:"text-primary text-small"})})]},"character-configuration-".concat(a))),(0,r.jsx)("div",{className:g().inputContainer,children:(0,r.jsx)(n.Sc0,{isSelected:u,onValueChange:e=>x(e),color:"secondary",isRequired:!0,"data-testid":"checkbox-show-hints",children:"Enable in-game hints"},"showHints")}),(0,r.jsx)(i.PY.div,{transition:{delay:.1*(e.length+1)},variants:p.r,children:(0,r.jsxs)(n.e2v,{children:[(0,r.jsx)(l.Y0,{color:"secondary",onPress:()=>{t([...e,b()])},variant:"bordered",isDisabled:e.length>=s.Fv,"data-testid":"button-add-ally",children:"Add Ally"}),(0,r.jsx)(l.Y0,{onPress:()=>A.push("/"),color:"warning","data-testid":"button-cancel",children:"Cancel"}),(0,r.jsx)(l.Y0,{color:"secondary",type:"submit",isDisabled:!a,"data-testid":"button-start-game",children:"Start Game"})]})})]},"configure-game-options")})};var v=a(40970),R=a.n(v);let w=()=>(0,r.jsx)("div",{className:R().container,children:(0,r.jsx)(n.aFV,{backdrop:"blur",classNames:{body:R().modalBody},hideCloseButton:!0,isOpen:!0,children:(0,r.jsx)(n.$mQ,{children:(0,r.jsxs)(n.cwr,{children:[(0,r.jsx)("h2",{className:R().title,children:"Game Configuration"}),(0,r.jsxs)("p",{children:["You can add up to ",s.Fv," allies for the upcoming battle. The smaller your group is, the harder it gets."]}),(0,r.jsx)(i.Ny,{mode:"wait",children:(0,r.jsx)(A,{})})]})})})})},8337:(e,t,a)=>{"use strict";a.d(t,{RQ:()=>n,Vd:()=>s,kQ:()=>i});let r=Object.freeze("eldoria-configuration"),s=e=>{localStorage.setItem(r,JSON.stringify(e))},n=()=>{let e=localStorage.getItem(r);if(e)try{return JSON.parse(e)}catch(e){console.error("Failed to parse stored configuration:",e)}return null},i=()=>{localStorage.removeItem(r)}},81160:(e,t,a)=>{"use strict";a.d(t,{r:()=>r});let r=Object.freeze({initial:{height:0,opacity:0,y:50},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-50}})},67916:(e,t,a)=>{"use strict";a.d(t,{Df:()=>M,wi:()=>s,Yj:()=>n,Kj:()=>r.K,st:()=>F,vW:()=>y,Fv:()=>i,XD:()=>E,oF:()=>g,lb:()=>L,mQ:()=>N,xi:()=>S,qs:()=>p});var r=a(68008);let s="cell:character",n="cell:core",i=6,l=()=>{let e=[];for(let t=0;t<64;t++){let a=[];for(let e=0;e<64;e++){let r=(31===e||32===e)&&(31===t||32===t);a[e]={x:e,y:t,content:r?{type:n}:void 0}}e.push(Object.freeze(a))}return{cells:Object.freeze(e)}};var o=a(49875);let c=(e,t,a,r)=>!!e.cells[r]&&!!e.cells[r][a]&&!e.cells[r][a].content,d=e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.numPlayers},h={moves:{initGame:(e,t)=>{let{G:a,ctx:r}=e,{username:s,team:n,tutorial:i,showHints:l}=t;a.username=s,a.team=n,a.tutorial=i,a.showHints=l;for(let e=0;e<r.numPlayers;e++)a.diceRoll["".concat(e)]=0}},next:o.GV,endIf:e=>{let{G:t}=e;return!!t.username},start:!0};var u=a(66196);let m={moves:{rollDice:e=>{let{G:t,ctx:a,events:r,random:s}=e;if(!Object.keys(t.diceRoll).includes(a.currentPlayer))return u.n;t.diceRoll[a.currentPlayer]=s.D20(),0!==t.diceRoll["0"]&&0!==t.diceRoll["1"]&&(t.diceRoll["0"]===t.diceRoll["1"]?t.diceRoll={0:0,1:0}:t.startingPlayer=t.diceRoll["0"]>t.diceRoll["1"]?"0":"1"),r.endTurn()}},next:o.eL,turn:{order:{first:()=>0,next:d}},endIf:e=>{let{G:t}=e;return!!t.startingPlayer},onEnd:e=>{let{G:t}=e;t.diceRoll={0:0,1:0}}},y={name:"fantasy-board-game",minPlayers:2,maxPlayers:2,setup:()=>({diceRoll:{0:0,1:0},grid:l(),startingPlayer:void 0,team:[],username:"",tutorial:!1,showHints:!0}),moves:{},turn:{minMoves:1,maxMoves:1},phases:{[o.Zz]:h,[o.GV]:m,[o.eL]:{moves:{placeCharacter:(e,t,a,r)=>{let{G:n}=e,i=n.team.findIndex(e=>e.name===t.name);c(n.grid,t,a,r)&&i>=0&&(n.grid.cells[r][a].content={type:s,characterIndex:i})}},next:"phaseB",turn:{order:{first:()=>0,next:d,playOrder:e=>{let{G:t}=e;return"0"===t.startingPlayer?["0","1"]:["1","0"]}}}},phaseB:{}}},p=(e,t,a)=>{let r=t.baseDexterity+a.dexterityMod,s=10+Math.floor(r/2)-5+a.acBonus,n=t.baseConstitution+a.constitutionMod,i=100+a.hpBonus+5*n;return new x(e,t.label,a.label,i,s,t.baseStrength+a.strengthMod,r,n,t.baseIntelligence+a.intelligenceMod,t.baseWisdom+a.wisdomMod,t.baseCharisma+a.charismaMod)};class x{constructor(e,t,a,r,s,n,i,l,o,c,d){this.name=e,this.race=t,this.specialization=a,this.maxHP=r,this.ac=s,this.strength=n,this.dexterity=i,this.constitution=l,this.intelligence=o,this.wisdom=c,this.charisma=d}}class g{static fromLabel(e){switch(e.trim().toLowerCase()){case"human":return g.HUMAN;case"dwarf":return g.DWARF;case"elf":return g.ELF;case"halfling":return g.HALFLING;case"giant":return g.GIANT;default:throw Error("Unknown race label: ".concat(e))}}constructor(e,t,a,r,s,n,i){this.label=e,this.baseStrength=t,this.baseDexterity=a,this.baseConstitution=r,this.baseIntelligence=s,this.baseWisdom=n,this.baseCharisma=i}}g.HUMAN=new g("Human",10,10,10,10,10,10),g.DWARF=new g("Dwarf",12,8,13,10,11,9),g.ELF=new g("Elf",8,12,9,12,11,11),g.HALFLING=new g("Halfling",8,13,10,10,11,12),g.GIANT=new g("Giant",14,6,13,7,10,8);var b=a(64444),f=a(24973),A=a(78908),v=a(42057),R=a(27619),w=a(16649),j=a(10468);class N{static fromLabel(e){switch(e.trim().toLowerCase()){case"tank":return N.TANK;case"warrior":return N.WARRIOR;case"assassin":return N.ASSASSIN;case"archer":return N.ARCHER;case"mage":return N.MAGE;case"healer":return N.HEALER;case"buffer":return N.BUFFER;default:throw Error("Unknown specialization label: ".concat(e))}}constructor(e,t,a,r,s,n,i,l,o,c){this.label=e,this.icon=t,this.hpBonus=a,this.acBonus=r,this.strengthMod=s,this.dexterityMod=n,this.constitutionMod=i,this.intelligenceMod=l,this.wisdomMod=o,this.charismaMod=c}}N.TANK=new N("Tank",b.A,50,3,2,0,3,-1,1,0),N.WARRIOR=new N("Warrior",f.A,30,1,3,1,1,0,0,0),N.ASSASSIN=new N("Assassin",A.A,10,1,1,4,0,1,1,0),N.ARCHER=new N("Archer",v.A,20,0,1,3,0,1,2,0),N.MAGE=new N("Mage",R.A,0,0,-1,1,0,4,2,1),N.HEALER=new N("Healer",w.A,20,0,0,0,1,1,4,1),N.BUFFER=new N("Buffer",j.A,10,0,0,1,1,2,2,2);let S=p("Thane",g.DWARF,N.TANK),E=p("Nyssa",g.HUMAN,N.ASSASSIN),F=p("Elyndor",g.DWARF,N.MAGE),M=p("Brom",g.GIANT,N.WARRIOR),L=p("Selene",g.ELF,N.HEALER)},49875:(e,t,a)=>{"use strict";a.d(t,{GV:()=>s,Zz:()=>r,eL:()=>n});let r="INIT",s="ROLL_PHASE",n="GATHER_GROUP"},50733:(e,t,a)=>{"use strict";a.d(t,{Y0:()=>n,o3:()=>u});var r=a(57),s=a(32234);let n=(0,a(13709).forwardRef)((e,t)=>{let{children:a,color:n="primary",type:i="button",...l}=e;return(0,r.jsx)(s.T,{color:n,ref:t,type:i,...l,children:a})});n.displayName="DefaultButton";var i=a(9895),l=a(50609),o=a(50426),c=a(94485),d=a(74898),h=a.n(d);let u=e=>{let{ariaLabel:t,items:a,label:s,onSelectionChange:d}=e;return(0,r.jsxs)(i.A,{className:h().dropdown,children:[(0,r.jsx)(l.b,{children:(0,r.jsx)(n,{className:"transition-transform",color:"secondary",children:s})}),(0,r.jsx)(o.y,{"aria-label":t,variant:"flat",disallowEmptySelection:!0,items:a,onSelectionChange:d,selectionMode:"single",children:e=>(0,r.jsx)(c.Y,{color:"default",children:e.label},e.label)})]})}},62424:(e,t,a)=>{"use strict";a.d(t,{e2v:()=>r.e2v,ZpM:()=>r.ZpM,Sc0:()=>r.Sc0,pde:()=>r.pde,aFV:()=>r.aFV,cwr:()=>r.cwr,$mQ:()=>r.$mQ,jlY:()=>r.jlY,y$y:()=>r.y$y}),a(50733),a(17571),a(99150);var r=a(36729)},17571:(e,t,a)=>{"use strict";a.d(t,{Ny:()=>r.Ny,PY:()=>r.PY});var r=a(29650);a(204)},99150:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppUIProvider:()=>i,NextThemeProvider:()=>l});var r=a(57),s=a(51558),n=a(204);let i=e=>{let{children:t}=e;return(0,r.jsx)(s.b,{children:t})},l=e=>{let{children:t,themeProps:a}=e;return(0,r.jsx)(n.N,{defaultTheme:"system",themes:["light","dark","system"],forcedTheme:"light",...a,children:t})}},41413:e=>{e.exports={inputContainer:"game-configuration-form_inputContainer__cU2AB"}},40970:e=>{e.exports={container:"page_container__B6sVQ",modalBody:"page_modalBody__jq8WB",title:"page_title__VUTVG"}},74898:e=>{e.exports={dropdown:"dropdown-for-list-items_dropdown__grQjg"}}},e=>{var t=t=>e(e.s=t);e.O(0,[904,552,502,775,782,745,358],()=>t(95421)),_N_E=e.O()}]);