(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{26882:(e,t,a)=>{Promise.resolve().then(a.bind(a,39157))},39157:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var r=a(5082),s=a(95527),i=a(54120),l=a(2779),n=a(42772);let o=(0,a(97014).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var c=a(9029),d=a(55634);let h=[s.oF.HUMAN,s.oF.DWARF,s.oF.ELF,s.oF.HALFLING,s.oF.GIANT],u=[s.mQ.TANK,s.mQ.WARRIOR,s.mQ.ASSASSIN,s.mQ.ARCHER,s.mQ.MAGE,s.mQ.HEALER,s.mQ.BUFFER],m=e=>{let{character:t,onChange:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.pde,{type:"text",label:"Name",value:t.name,onChange:e=>a({...t,name:e.target.value}),variant:"bordered",color:"secondary",fullWidth:!0,isRequired:!0},"Name"),(0,r.jsx)(n.o3,{ariaLabel:"Character race selection",items:h,label:t.race,onSelectionChange:e=>{let r=h.find(t=>t.label===e.values().next().value);r&&a({...t,race:null==r?void 0:r.label})}}),(0,r.jsx)(n.o3,{ariaLabel:"Character specialization selection",items:u,label:t.specialization,onSelectionChange:e=>{let r=u.find(t=>t.label===e.values().next().value);r&&a({...t,specialization:null==r?void 0:r.label})}})]})};var y=a(84471),p=a(28042),g=a(22481),x=a.n(g);let b=()=>(0,s.qs)("",s.oF.HUMAN,s.mQ.HEALER),f=()=>{let[e,t]=(0,d.useState)([b()]),[a,h]=(0,d.useState)(!1),[u,g]=(0,d.useState)(!0);(0,d.useEffect)(()=>{h(!e.some(e=>!e.name))},[e]);let f=(0,c.useRouter)(),A=a=>{let r=[...e];1===r.splice(a,1).length&&t(r)},v=(a,r)=>{let i=[...e];i[a]=(0,s.qs)(r.name,s.oF.fromLabel(r.race),s.mQ.fromLabel(r.specialization)),t(i)};return(0,r.jsx)("form",{onSubmit:t=>{t.preventDefault(),e[0]&&((0,y.Vd)({username:e[0].name,team:e,tutorial:!1,showHints:u}),f.push("/board"))},children:(0,r.jsxs)(l.PY.div,{initial:"initial",animate:"animate",exit:"exit",className:"flex flex-col gap-y-2 items-center",transition:{duration:.3},variants:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},children:[e.map((t,a)=>(0,r.jsxs)(l.PY.div,{className:x().inputContainer,transition:{delay:.1*e.length},variants:p.r,children:[(0,r.jsx)(m,{character:t,onChange:e=>v(a,e)}),(0,r.jsx)(n.Y0,{"aria-label":"Remove character",color:"danger",isIconOnly:!0,isDisabled:0===a,onPress:()=>A(a),"data-testid":"button-remove-character",children:(0,r.jsx)(o,{className:"text-primary text-small"})})]},"character-configuration-".concat(a))),(0,r.jsx)("div",{className:x().inputContainer,children:(0,r.jsx)(i.Sc0,{isSelected:u,onValueChange:e=>g(e),color:"secondary",isRequired:!0,"data-testid":"checkbox-show-hints",children:"Enable in-game hints"},"showHints")}),(0,r.jsx)(l.PY.div,{transition:{delay:.1*(e.length+1)},variants:p.r,children:(0,r.jsxs)(i.e2v,{children:[(0,r.jsx)(n.Y0,{color:"secondary",onPress:()=>{t([...e,b()])},variant:"bordered",isDisabled:e.length>=s.Fv,"data-testid":"button-add-ally",children:"Add Ally"}),(0,r.jsx)(n.Y0,{onPress:()=>f.push("/"),color:"warning","data-testid":"button-cancel",children:"Cancel"}),(0,r.jsx)(n.Y0,{color:"secondary",type:"submit",isDisabled:!a,"data-testid":"button-start-game",children:"Start Game"})]})})]},"configure-game-options")})};var A=a(65534),v=a.n(A);let R=()=>(0,r.jsx)("div",{className:v().container,children:(0,r.jsx)(i.aFV,{backdrop:"blur",classNames:{body:v().modalBody},hideCloseButton:!0,isOpen:!0,children:(0,r.jsx)(i.$mQ,{children:(0,r.jsxs)(i.cwr,{children:[(0,r.jsx)("h2",{className:v().title,children:"Game Configuration"}),(0,r.jsxs)("p",{children:["You can add up to ",s.Fv," allies for the upcoming battle. The smaller your group is, the harder it gets."]}),(0,r.jsx)(l.Ny,{mode:"wait",children:(0,r.jsx)(f,{})})]})})})})},84471:(e,t,a)=>{"use strict";a.d(t,{RQ:()=>i,Vd:()=>s,kQ:()=>l});let r=Object.freeze("eldoria-configuration"),s=e=>{localStorage.setItem(r,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(r);if(e)try{return JSON.parse(e)}catch(e){console.error("Failed to parse stored configuration:",e)}return null},l=()=>{localStorage.removeItem(r)}},28042:(e,t,a)=>{"use strict";a.d(t,{r:()=>r});let r=Object.freeze({initial:{height:0,opacity:0,y:50},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-50}})},95527:(e,t,a)=>{"use strict";a.d(t,{Df:()=>M,wi:()=>s,Yj:()=>i,Kj:()=>r.K,st:()=>F,vW:()=>y,Fv:()=>l,XD:()=>E,oF:()=>x,lb:()=>L,mQ:()=>N,xi:()=>S,qs:()=>p});var r=a(8340);let s="cell:character",i="cell:core",l=6,n=()=>{let e=[];for(let t=0;t<64;t++){let a=[];for(let e=0;e<64;e++){let r=(31===e||32===e)&&(31===t||32===t);a[e]={x:e,y:t,content:r?{type:i}:void 0}}e.push(Object.freeze(a))}return{cells:Object.freeze(e)}};var o=a(33409);let c=(e,t,a,r)=>!!e.cells[r]&&!!e.cells[r][a]&&!e.cells[r][a].content,d=e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.numPlayers},h={moves:{initGame:(e,t)=>{let{G:a,ctx:r}=e,{username:s,team:i,tutorial:l,showHints:n}=t;a.username=s,a.team=i,a.tutorial=l,a.showHints=n;for(let e=0;e<r.numPlayers;e++)a.diceRoll["".concat(e)]=0}},next:o.GV,endIf:e=>{let{G:t}=e;return!!t.username},start:!0};var u=a(67509);let m={moves:{rollDice:e=>{let{G:t,ctx:a,events:r,random:s}=e;if(!Object.keys(t.diceRoll).includes(a.currentPlayer))return u.n;t.diceRoll[a.currentPlayer]=s.D20(),0!==t.diceRoll["0"]&&0!==t.diceRoll["1"]&&(t.diceRoll["0"]===t.diceRoll["1"]?t.diceRoll={0:0,1:0}:t.startingPlayer=t.diceRoll["0"]>t.diceRoll["1"]?"0":"1"),r.endTurn()}},next:o.eL,turn:{order:{first:()=>0,next:d}},endIf:e=>{let{G:t}=e;return!!t.startingPlayer},onEnd:e=>{let{G:t}=e;t.diceRoll={0:0,1:0}}},y={name:"fantasy-board-game",minPlayers:2,maxPlayers:2,setup:()=>({diceRoll:{0:0,1:0},grid:n(),startingPlayer:void 0,team:[],username:"",tutorial:!1,showHints:!0}),moves:{},turn:{minMoves:1,maxMoves:1},phases:{[o.Zz]:h,[o.GV]:m,[o.eL]:{moves:{placeCharacter:(e,t,a,r)=>{let{G:i}=e;console.log("place character:",t),console.log("coordinates:",a,"/",r),console.log("grid:",i.grid),c(i.grid,t,a,r)&&(i.grid.cells[r][a].content={type:s,character:t})}},next:"phaseB",turn:{order:{first:()=>0,next:d,playOrder:e=>{let{G:t}=e;return"0"===t.startingPlayer?["0","1"]:["1","0"]}}}},phaseB:{}}},p=(e,t,a)=>{let r=t.baseDexterity+a.dexterityMod,s=10+Math.floor(r/2)-5+a.acBonus,i=t.baseConstitution+a.constitutionMod,l=100+a.hpBonus+5*i;return new g(e,t.label,a.label,l,s,t.baseStrength+a.strengthMod,r,i,t.baseIntelligence+a.intelligenceMod,t.baseWisdom+a.wisdomMod,t.baseCharisma+a.charismaMod)};class g{constructor(e,t,a,r,s,i,l,n,o,c,d){this.name=e,this.race=t,this.specialization=a,this.maxHP=r,this.ac=s,this.strength=i,this.dexterity=l,this.constitution=n,this.intelligence=o,this.wisdom=c,this.charisma=d}}class x{static fromLabel(e){switch(e.trim().toLowerCase()){case"human":return x.HUMAN;case"dwarf":return x.DWARF;case"elf":return x.ELF;case"halfling":return x.HALFLING;case"giant":return x.GIANT;default:throw Error("Unknown race label: ".concat(e))}}constructor(e,t,a,r,s,i,l){this.label=e,this.baseStrength=t,this.baseDexterity=a,this.baseConstitution=r,this.baseIntelligence=s,this.baseWisdom=i,this.baseCharisma=l}}x.HUMAN=new x("Human",10,10,10,10,10,10),x.DWARF=new x("Dwarf",12,8,13,10,11,9),x.ELF=new x("Elf",8,12,9,12,11,11),x.HALFLING=new x("Halfling",8,13,10,10,11,12),x.GIANT=new x("Giant",14,6,13,7,10,8);var b=a(6993),f=a(16786),A=a(14461),v=a(33636),R=a(76130),w=a(64248),j=a(9148);class N{static fromLabel(e){switch(e.trim().toLowerCase()){case"tank":return N.TANK;case"warrior":return N.WARRIOR;case"assassin":return N.ASSASSIN;case"archer":return N.ARCHER;case"mage":return N.MAGE;case"healer":return N.HEALER;case"buffer":return N.BUFFER;default:throw Error("Unknown specialization label: ".concat(e))}}constructor(e,t,a,r,s,i,l,n,o,c){this.label=e,this.icon=t,this.hpBonus=a,this.acBonus=r,this.strengthMod=s,this.dexterityMod=i,this.constitutionMod=l,this.intelligenceMod=n,this.wisdomMod=o,this.charismaMod=c}}N.TANK=new N("Tank",b.A,50,3,2,0,3,-1,1,0),N.WARRIOR=new N("Warrior",f.A,30,1,3,1,1,0,0,0),N.ASSASSIN=new N("Assassin",A.A,10,1,1,4,0,1,1,0),N.ARCHER=new N("Archer",v.A,20,0,1,3,0,1,2,0),N.MAGE=new N("Mage",R.A,0,0,-1,1,0,4,2,1),N.HEALER=new N("Healer",w.A,20,0,0,0,1,1,4,1),N.BUFFER=new N("Buffer",j.A,10,0,0,1,1,2,2,2);let S=p("Thane",x.DWARF,N.TANK),E=p("Nyssa",x.HUMAN,N.ASSASSIN),F=p("Elyndor",x.DWARF,N.MAGE),M=p("Brom",x.GIANT,N.WARRIOR),L=p("Selene",x.ELF,N.HEALER)},33409:(e,t,a)=>{"use strict";a.d(t,{GV:()=>s,Zz:()=>r,eL:()=>i});let r="INIT",s="ROLL_PHASE",i="GATHER_GROUP"},42772:(e,t,a)=>{"use strict";a.d(t,{Y0:()=>i,o3:()=>u});var r=a(5082),s=a(46397);let i=(0,a(55634).forwardRef)((e,t)=>{let{children:a,color:i="primary",type:l="button",...n}=e;return(0,r.jsx)(s.T,{color:i,ref:t,type:l,...n,children:a})});i.displayName="DefaultButton";var l=a(26561),n=a(4833),o=a(87064),c=a(6785),d=a(3902),h=a.n(d);let u=e=>{let{ariaLabel:t,items:a,label:s,onSelectionChange:d}=e;return(0,r.jsxs)(l.A,{className:h().dropdown,children:[(0,r.jsx)(n.b,{children:(0,r.jsx)(i,{className:"transition-transform",color:"secondary",children:s})}),(0,r.jsx)(o.y,{"aria-label":t,variant:"flat",disallowEmptySelection:!0,items:a,onSelectionChange:d,selectionMode:"single",children:e=>(0,r.jsx)(c.Y,{color:"default",children:e.label},e.label)})]})}},54120:(e,t,a)=>{"use strict";a.d(t,{e2v:()=>r.e2v,ZpM:()=>r.ZpM,Sc0:()=>r.Sc0,pde:()=>r.pde,aFV:()=>r.aFV,cwr:()=>r.cwr,$mQ:()=>r.$mQ,jlY:()=>r.jlY,y$y:()=>r.y$y}),a(42772),a(2779),a(83256);var r=a(22882)},2779:(e,t,a)=>{"use strict";a.d(t,{Ny:()=>r.Ny,PY:()=>r.PY});var r=a(3710);a(67846)},83256:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppUIProvider:()=>l,NextThemeProvider:()=>n});var r=a(5082),s=a(23150),i=a(67846);let l=e=>{let{children:t}=e;return(0,r.jsx)(s.b,{children:t})},n=e=>{let{children:t,themeProps:a}=e;return(0,r.jsx)(i.N,{defaultTheme:"system",themes:["light","dark","system"],forcedTheme:"light",...a,children:t})}},22481:e=>{e.exports={inputContainer:"game-configuration-form_inputContainer__cU2AB"}},65534:e=>{e.exports={container:"page_container__B6sVQ",modalBody:"page_modalBody__jq8WB",title:"page_title__VUTVG"}},3902:e=>{e.exports={dropdown:"dropdown-for-list-items_dropdown__grQjg"}}},e=>{var t=t=>e(e.s=t);e.O(0,[276,355,790,800,486,923,358],()=>t(26882)),_N_E=e.O()}]);